(function(){"use strict";if("Ink"in window)return;var e={Ink:"INK_PATH"in window?window.INK_PATH:window.location.protocol+"//js.ink.sapo.pt/Ink/"},t={},n=[],r={},i=[],s=function(e){if(typeof e!="object")return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};window.Ink={_checkPendingRequireModules:function(){var e,n,r,s,o,u,a=[];for(e=0,n=i.length;e<n;++e){r=i[e];if(!r)continue;for(s in r.left)r.left.hasOwnProperty(s)&&(o=t[s],o&&(r.args[r.left[s]]=o,delete r.left[s],--r.remaining));if(r.remaining>0)a.push(r);else{u=r.cb;if(!u)continue;delete r.cb,u.apply(!1,r.args)}}i=a,i.length>0&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},_modNameToUri:function(t){if(t.indexOf("/")!==-1)return t;var n=t.replace(/_/g,".").split("."),r=n.shift(),i=e[r];return i||(i="./"+r+"/"),[i,n.join("/"),"/lib.js"].join("")},getPath:function(t){return e[t||"Ink"]},setPath:function(t,n){e[t]=n},loadScript:function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",this._modNameToUri(e));var n=document.getElementsByTagName("head");n.length>0&&n[0].appendChild(t)},namespace:function(e,t){if(!e||!e.length)return null;var n=e.split("."),r=window,i;for(var s=0,o=n.length;s<o;++s)r[n[s]]=r[n[s]]||{},i=r,r=r[n[s]];return t?[i,n[s-1]]:r},getModule:function(e,n){var r=n?[e,"_",n].join(""):e;return t[r]},createModule:function(e,i,o,u){var a=function(){if(typeof e!="string")throw new Error("module name must be a string!");if(!(typeof i=="number"||typeof i=="string"&&i.length>0))throw new Error("version number missing!");var o=[e,"_",i].join("");if(t[o])return;delete r[o],delete r[e];var a=Array.prototype.slice.call(arguments),f=u.apply(window,a);n.push(o),typeof f=="object"?f._version=i:typeof f=="function"&&(f.prototype._version=i,f._version=i);var l=e.indexOf("Ink.")===0,c;l&&(c=Ink.namespace(e,!0)),t[o]=f,l&&(c[0][c[1]+"_"+i]=f),t[e]=f,l&&s(c[0][c[1]])&&(c[0][c[1]]=f),this&&Ink._checkPendingRequireModules()};this.requireModules(o,a)},requireModules:function(e,n){var s,o,u,a,f;o=e.length,u={args:new Array(o),left:{},remaining:o,cb:n};if(typeof e!="object"||e.length===undefined)throw new Error("Dependency list should be an array!");if(typeof n!="function")throw new Error("Callback should be a function!");for(s=0;s<o;++s){a=e[s],f=t[a];if(f){u.args[s]=f,--u.remaining;continue}r[a]||(r[a]=!0,Ink.loadScript(a)),u.left[a]=s}u.remaining>0?i.push(u):n.apply(!0,u.args)},getModulesLoadOrder:function(){return n.slice()},getModuleScripts:function(){var e=this.getModulesLoadOrder();return e.unshift("Ink_1"),e=e.map(function(e){var t=e.indexOf(".");t===-1&&(t=e.indexOf("_"));var n=e.substring(0,t);e=e.substring(t+1);var r=Ink.getPath(n);return['<script type="text/javascript" src="',r,e.replace(/\./g,"/"),'/"></script>'].join("")}),e.join("\n")},bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments),i=n.concat(r);return e.apply(t,i)}},bindMethod:function(e,t){return this.bind.apply(this,[e[t],e].concat([].slice.call(arguments,2)))},bindEvent:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(r){var i=n.slice();return i.unshift(r||window.event),e.apply(t,i)}},i:function(e){if(!e)throw new Error("Ink.i => id or element must be passed");return typeof e=="string"?document.getElementById(e):e},s:function(e,t){if(typeof Ink.Dom=="undefined"||typeof Ink.Dom.Selector=="undefined")throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(e,t||document)[0]||null},ss:function(e,t){if(typeof Ink.Dom=="undefined"||typeof Ink.Dom.Selector=="undefined")throw new Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(e,t||document)},extendObj:function(e,t){arguments.length>2&&(t=Ink.extendObj.apply(this,[].slice.call(arguments,1)));if(t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}})(),Ink.createModule("Ink.Net.Ajax","1",[],function(){"use strict";var Ajax=function(e,t){this.init(e,t)};Ajax.globalOptions={parameters:{},requestHeaders:{}};var xMLHttpRequestWithCredentials="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return Ajax.prototype={init:function(e,t){if(!e)throw new Error("WRONG_ARGUMENTS_ERR");var n=Ink.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null,onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},Ajax.globalOptions);if(t&&typeof t=="object"){n=Ink.extendObj(n,t);if(typeof t.parameters=="object")n.parameters=Ink.extendObj(Ink.extendObj({},Ajax.globalOptions.parameters),t.parameters);else if(t.parameters!==null){var r=this.paramsObjToStr(Ajax.globalOptions.parameters);r&&(n.parameters=t.parameters+"&"+r)}n.requestHeaders=Ink.extendObj({},Ajax.globalOptions.requestHeaders),n.requestHeaders=Ink.extendObj(n.requestHeaders,t.requestHeaders)}this.options=n,this.safeCall("onInit");var i=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");i.href=e,this.url=e,this.isHTTP=i.protocol.match(/^https?:$/i)&&!0,this.requestHasBody=n.method.search(/^get|head$/i)<0,!this.isHTTP||location.protocol==="widget:"||typeof window.widget=="object"?this.isCrossDomain=!1:this.isCrossDomain=location.protocol!==i.protocol||location.host!==i.host,this.options.cors&&(this.isCrossDomain=!1),this.transport=this.getTransport(),this.request()},getTransport:function(){if(!xMLHttpRequestWithCredentials&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject=="undefined")return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var e={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1","Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"1"};this.options.cors&&(this.options.signRequest||delete e["X-Requested-With"],delete e["X-Ink-Version"]);if(this.options.requestHeaders&&typeof this.options.requestHeaders=="object")for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&(e[t]=this.options.requestHeaders[t]);this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(e.Connection="close");for(var n in e)e.hasOwnProperty(n)&&this.transport.setRequestHeader(n,e[n])}catch(r){}},paramsObjToStr:function(e){var t,n,r,i,s=[];if(typeof e!="object")return e;for(r in e)if(e.hasOwnProperty(r)){i=e[r];if(Object.prototype.toString.call(i)==="[object Array]"&&!isNaN(i.length))for(t=0,n=i.length;t<n;t++)s=s.concat([encodeURIComponent(r),"[]","=",encodeURIComponent(i[t]),"&"]);else s=s.concat([encodeURIComponent(r),"=",encodeURIComponent(i),"&"])}return s.length>0&&s.pop(),s.join("")},setParams:function(){var e=null,t=this.options.parameters;typeof t=="object"?e=this.paramsObjToStr(t):e=""+t,e&&(this.url.indexOf("?")>-1?this.url=this.url.split("#")[0]+"&"+e:this.url=this.url.split("#")[0]+"?"+e)},getHeader:function(e){if(this.usingXDomainReq&&e==="Content-Type")return this.transport.contentType;try{return this.transport.getResponseHeader(e)}catch(t){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(e){return null}},getResponse:function(){var e=this.transport,t={headerJSON:null,responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:e,timeTaken:new Date-this.startTime,requestedUrl:this.url};t.readyState=e.readyState;try{t.responseText=e.responseText}catch(n){}try{t.responseXML=e.responseXML}catch(n){}try{t.status=e.status}catch(n){t.status=0}try{t.statusText=e.statusText}catch(n){t.statusText=""}return t},abort:function(){if(this.transport){clearTimeout(this.delayTimeout),clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(e){}this.finish()}},runStateChange:function(){var e=this.transport.readyState;if(e===3)this.isHTTP&&this.safeCall("onHeaders");else if(e===4||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime()){this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime());return}var t,n=this.transport.responseText,r=this.getResponse(),i=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"),clearTimeout(this.stoTimeout),i===0?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):i=n?200:404:i===304&&(i=200);var s=this.usingXDomainReq||200<=i&&i<300,o=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(o.indexOf("application/json")>=0||this.options.evalJS==="force"))try{t=this.evalJSON(n,this.sanitizeJSON),t&&(n=r.responseJSON=t)}catch(u){s&&this.safeCall("onException",u)}if(this.usingXDomainReq&&o.indexOf("xml")!==-1&&"DOMParser"in window){var a;switch(o){case"application/xml":case"application/xhtml+xml":case"image/svg+xml":a=o;break;default:a="text/xml"}var f=(new DOMParser).parseFromString(this.transport.responseText,a);this.transport.responseXML=f,r.responseXML=f}this.transport.responseXML!==null&&r.responseJSON===null&&this.transport.responseXML.xml!==""&&(n=this.transport.responseXML);if(i||this.usingXDomainReq)s?this.safeCall("onSuccess",r,n):this.safeCall("onFailure",r,n),this.safeCall("on"+i,r,n);this.finish(r,n)}},finish:function(e,t){e&&this.safeCall("onComplete",e,t),clearTimeout(this.stoTimeout);if(this.transport){try{this.transport.onreadystatechange=null}catch(n){}typeof this.transport.destroy=="function"&&this.transport.destroy(),this.transport=null}},safeCall:function(e,t){function n(e){setTimeout(function(){throw e.message&&(e.message+="\n"+(e.stacktrace||e.stack||"")),e},1)}if(typeof this.options[e]=="function")try{this.options[e].apply(this,[].slice.call(arguments,1))}catch(r){n(r)}else t&&window.Error&&t instanceof Error&&n(t)},setRequestHeader:function(e,t){this.options.requestHeaders||(this.options.requestHeaders={}),this.options.requestHeaders[e]=t},request:function(){if(this.transport){var e=null;this.requestHasBody?(this.options.postBody!==null&&this.options.postBody!==""?(e=this.options.postBody,this.setParams()):this.options.parameters!==null&&this.options.parameters!==""&&(e=this.options.parameters),typeof e=="object"&&!e.nodeType?e=this.paramsObjToStr(e):typeof e!="object"&&e!==null&&(e=""+e),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var t=this.url,n=this.options.method,r=this.isCrossDomain;r&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",t),t=this.options.xhrProxy+encodeURIComponent(t),r=!1);try{this.transport.open(n,t,this.options.asynchronous)}catch(i){return this.safeCall("onException",i),this.finish(this.getResponse(),null)}this.setHeaders(),this.safeCall("onCreate"),this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),this.options.timeout*1e3)),this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0),this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(r)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime(),this.transport.send(e)}catch(i){return this.safeCall("onException",i),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},makeError:function(e,t){if(typeof Error!="function")return{code:e,message:t};var n=new Error(t);return n.code=e,n},isJSON:function(e){return typeof e!="string"||!e?!1:(e=e.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(e))},evalJSON:function(strJSON,sanitize){if(strJSON&&(!sanitize||this.isJSON(strJSON)))try{return typeof JSON!="undefined"&&typeof JSON.parse!="undefined"?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}return null}},Ajax.load=function(e,t){return new Ajax(e,{method:"GET",onSuccess:function(e){t(e.responseText,e)}})},Ajax.ping=function(e,t){return new Ajax(e,{method:"HEAD",onSuccess:function(e){typeof t=="function"&&t(e)}})},Ajax}),Ink.createModule("Ink.Net.JsonP","1",[],function(){"use strict";var e=function(e,t){this.init(e,t)};return e.prototype={init:function(e,t){this.options=Ink.extendObj({onSuccess:undefined,onFailure:undefined,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},t||{}),this.options.randVar!==!1?this.randVar=this.options.randVar:this.randVar=parseInt(Math.random()*1e5,10),this.options.internalCallback+=this.randVar,this.uri=e,typeof this.options.onComplete=="function"&&(this.options.onSuccess=this.options.onComplete);if(typeof this.uri!="string")throw"Please define an URI";if(typeof this.options.onSuccess!="function")throw"please define a callback function on option onSuccess!";Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(){window.clearTimeout(this.timeout),delete window.Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag(),this.options.onSuccess(arguments[0])},this),this._addScriptTag()},_addParamsToGet:function(e,t){var n=e.indexOf("?")!==-1,r,i,s,o=[e];for(i in t)t.hasOwnProperty(i)&&(n?r="&":(r="?",n=!0),s=t[i],typeof s!="number"&&!s&&(s=""),o=o.concat([r,i,"=",encodeURIComponent(s)]));return o.join("")},_getScriptContainer:function(){var e=document.getElementsByTagName("head");if(e.length===0){var t=document.getElementsByTagName("script");return t[0]}return e[0]},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback,this.options.params.rnd_seed=this.randVar,this.uri=this._addParamsToGet(this.uri,this.options.params);var e=document.createElement("script");e.type="text/javascript",e.src=this.uri;var t=this._getScriptContainer();t.appendChild(e),this.timeout=setTimeout(Ink.bind(this._requestFailed,this),this.options.timeout*1e3)},_requestFailed:function(){delete Ink.Net.JsonP[this.options.internalCallback],this._removeScriptTag(),typeof this.options.onFailure=="function"&&this.options.onFailure(this.options.failureObj)},_removeScriptTag:function(){var e,t=document.getElementsByTagName("script"),n;for(var r=0,i=t.length;r<i;++r){e=t[r],n=e.getAttribute("src")||e.src;if(n!==null&&n===this.uri){e.parentNode.removeChild(e);return}}}},e}),Ink.createModule("Ink.Dom.Css",1,[],function(){"use strict";var e={addRemoveClassName:function(e,t,n){if(n)return this.addClassName(e,t);this.removeClassName(e,t)},addClassName:function(e,t){e=Ink.i(e),e&&t&&(typeof e.classList!="undefined"?e.classList.add(t):this.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t))},removeClassName:function(e,t){e=Ink.i(e);if(e&&t)if(typeof e.classList!="undefined")e.classList.remove(t);else{if(typeof e.className=="undefined")return!1;var n=e.className,r=new RegExp("(^|\\s+)"+t+"(\\s+|$)");n=n.replace(r," "),n=n.replace(/^\s+/,"").replace(/\s+$/,""),e.className=n}},setClassName:function(e,t,n){this.addRemoveClassName(e,t,n||!1)},hasClassName:function(e,t){e=Ink.i(e);if(e&&t){if(typeof e.classList!="undefined")return e.classList.contains(t);if(typeof e.className=="undefined")return!1;var n=e.className;if(typeof n.length=="undefined")return!1;if(n.length>0){if(n===t)return!0;var r=new RegExp("(^|\\s)"+t+"(\\s|$)");if(r.test(n))return!0}}return!1},blinkClass:function(e,t,n,r){e=Ink.i(e),this.addRemoveClassName(e,t,!r),setTimeout(Ink.bind(function(){this.addRemoveClassName(e,t,r)},this),Number(n)||100)},toggleClassName:function(e,t,n){if(e&&t&&typeof e.classList!="undefined")return e=Ink.i(e),e!==null&&e.classList.toggle(t),!0;typeof n!="undefined"?n===!0?this.addClassName(e,t):n===!1&&this.removeClassName(e,t):this.hasClassName(e,t)?this.removeClassName(e,t):this.addClassName(e,t)},setOpacity:function(e,t){e=Ink.i(e);if(e!==null){var n=1;isNaN(Number(t))||(t<=0?n=0:t<=1?n=t:t<=100?n=t/100:n=1),typeof e.style.opacity!="undefined"?e.style.opacity=n:e.style.filter="alpha(opacity:"+(n*100|0)+")"}},_camelCase:function(e){return e?e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}):e},getStyle:function(e,t){e=Ink.i(e);if(e!==null){t=t==="float"?"cssFloat":this._camelCase(t);var n=e.style[t];if(window.getComputedStyle&&(!n||n==="auto")){var r=window.getComputedStyle(e,null);n=r?r[t]:null}else!n&&e.currentStyle&&(n=e.currentStyle[t],n==="auto"&&(t==="width"||t==="height")&&(n=e["offset"+t.charAt(0).toUpperCase()+t.slice(1)]+"px"));if(t==="opacity")return n?parseFloat(n,10):1;if(t==="borderTopWidth"||t==="borderBottomWidth"||t==="borderRightWidth"||t==="borderLeftWidth"){if(n==="thin")return"1px";if(n==="medium")return"3px";if(n==="thick")return"5px"}return n==="auto"?null:n}},setStyle:function(e,t){e=Ink.i(e);if(e!==null)if(typeof t=="string")e.style.cssText+="; "+t,t.indexOf("opacity")!==-1&&this.setOpacity(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var n in t)t.hasOwnProperty(n)&&(n==="opacity"?this.setOpacity(e,t[n]):n==="float"||n==="cssFloat"?typeof e.style.styleFloat=="undefined"?e.style.cssFloat=t[n]:e.style.styleFloat=t[n]:e.style[n]=t[n])},show:function(e,t){e=Ink.i(e),e!==null&&(e.style.display=t?t:"")},hide:function(e){e=Ink.i(e),e!==null&&(e.style.display="none")},showHide:function(e,t){e=Ink.i(e),e&&(e.style.display=t?"":"none")},toggle:function(e,t){e=Ink.i(e),e!==null&&(typeof t!="undefined"?t===!0?this.show(e):this.hide(e):e.style.display==="none"?this.show(e):this.hide(e))},_getRefTag:function(e){if(e.firstElementChild)return e.firstElementChild;for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===1)return t;return null},appendStyleTag:function(e,t,n){n=Ink.extendObj({type:"text/css",force:!1},n||{});var r=document.getElementsByTagName("style"),i=!1,s=!0,o,u;for(o=0,u=r.length;o<u;o++)i=r[o].innerHTML,i.indexOf(e)>=0&&(s=!1);if(s){var a=document.createElement("style"),f=document.getElementsByTagName("head")[0],l=!1,c="";a.type=n.type,c+=e+" {",c+=t,c+="} ",typeof a.styleSheet!="undefined"?a.styleSheet.cssText=c:a.appendChild(document.createTextNode(c)),n.force?f.appendChild(a):(l=this._getRefTag(f),l&&f.insertBefore(a,l))}},appendStylesheet:function(e,t){t=Ink.extendObj({media:"screen",type:"text/css",force:!1},t||{});var n,r=document.createElement("link"),i=document.getElementsByTagName("head")[0];r.media=t.media,r.type=t.type,r.href=e,r.rel="Stylesheet",t.force?i.appendChild(r):(n=this._getRefTag(i),n&&i.insertBefore(r,n))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(e,t){if(!e)return t(e);if(this._loadedCSSFiles[e])return t(e);var n=this._loadingCSSFiles[e];if(n)return n.push(t);this._loadingCSSFiles[e]=[t];var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e;var i=document.getElementsByTagName("head")[0];i.appendChild(r);var s=document.createElement("img");s.onerror=Ink.bindEvent(function(e,t){var n=t;this._loadedCSSFiles[n]=!0;var r=this._loadingCSSFiles[n];for(var i=0,s=r.length;i<s;++i)r[i](n);delete this._loadingCSSFiles[n]},this,e),s.src=e},decToHex:function(e){var t=function(e){return e.length===1&&(e="0"+e),e=e.toUpperCase(),e};if(typeof e=="object"){var n=t(parseInt(e.r,10).toString(16)),r=t(parseInt(e.g,10).toString(16)),i=t(parseInt(e.b,10).toString(16));return n+r+i}e+="";var s=e.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return s!==null?t(parseInt(s[1],10).toString(16))+t(parseInt(s[2],10).toString(16))+t(parseInt(s[3],10).toString(16)):t(parseInt(e,10).toString(16))},hexToDec:function(e){e.indexOf("#")===0&&(e=e.substr(1));if(e.length===6)return{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)};if(e.length===3)return{r:parseInt(e.charAt(0)+e.charAt(0),16),g:parseInt(e.charAt(1)+e.charAt(1),16),b:parseInt(e.charAt(2)+e.charAt(2),16)};if(e.length<=2)return parseInt(e,16)},getPropertyFromStylesheet:function(e,t){var n=this.getRuleFromStylesheet(e);return n?n.style[t]:null},getPropertyFromStylesheet2:function(e,t){var n=this.getRulesFromStylesheet(e),r;for(var i=0,s=n.length;i<s;i++){r=n[i].style[t];if(r!==null&&r!==undefined)return r}return null},getRuleFromStylesheet:function(e){var t,n,r,i,s,o=document.styleSheets;if(!o)return null;for(var u=0,a=document.styleSheets.length;u<a;++u){t=document.styleSheets[u],n=t.rules?t.rules:t.cssRules;if(!n)return null;for(r=0,i=n.length;r<i;++r){s=n[r];if(!s.selectorText)continue;if(s.selectorText===e)return s}}return null},getRulesFromStylesheet:function(e){var t=[],n,r,i,s,o,u=document.styleSheets;if(!u)return t;for(var a=0,f=document.styleSheets.length;a<f;++a){n=document.styleSheets[a],r=n.rules?n.rules:n.cssRules;if(!r)return null;for(i=0,s=r.length;i<s;++i){o=r[i];if(!o.selectorText)continue;o.selectorText===e&&t.push(o)}}return t},getPropertiesFromRule:function(e){var t=this.getRuleFromStylesheet(e),n={},r,i,s;t=t.style.cssText;var o=t.split(";"),u,a,f,l;for(i=0,s=o.length;i<s;++i)o[i].charAt(0)===" "&&(o[i]=o[i].substring(1)),u=o[i].split(":"),r=this._camelCase(u[0].toLowerCase()),a=u[1],a&&(a=a.substring(1),r==="padding"||r==="margin"||r==="borderWidth"?(r==="borderWidth"?(f="border",l="Width"):(f=r,l=""),a.indexOf(" ")!==-1?(a=a.split(" "),n[f+"Top"+l]=a[0],n[f+"Bottom"+l]=a[0],n[f+"Left"+l]=a[1],n[f+"Right"+l]=a[1]):(n[f+"Top"+l]=a,n[f+"Bottom"+l]=a,n[f+"Left"+l]=a,n[f+"Right"+l]=a)):r==="borderRadius"?a.indexOf(" ")!==-1?(a=a.split(" "),n.borderTopLeftRadius=a[0],n.borderBottomRightRadius=a[0],n.borderTopRightRadius=a[1],n.borderBottomLeftRadius=a[1]):(n.borderTopLeftRadius=a,n.borderTopRightRadius=a,n.borderBottomLeftRadius=a,n.borderBottomRightRadius=a):n[r]=a);return n},changeFontSize:function(e,t,n,r,i){var s=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(o){var u;typeof e!="string"?u="1st argument must be a CSS selector rule.":typeof t!="number"?u="2nd argument must be a number.":n!==undefined&&n!=="+"&&n!=="*"?u='3rd argument must be one of "+", "*".':r!==undefined&&(typeof r!="number"||r<=0)?u="4th argument must be a positive number.":i!==undefined&&(typeof i!="number"||i<i)&&(u="5th argument must be a positive number greater than minValue.");if(u)throw new TypeError(u);var a,f,l=o.select(e);r===undefined&&(r=1),n=n==="*"?function(e,t){return e*t}:function(e,t){return e+t};for(var c=0,h=l.length;c<h;++c){f=l[c],a=parseFloat(s.getStyle(f,"fontSize")),a=n(a,t);if(a<r)continue;if(typeof i=="number"&&a>i)continue;f.style.fontSize=a+"px"}})}};return e}),Ink.createModule("Ink.Dom.Element",1,[],function(){"use strict";var e={get:function(e){return typeof e!="undefined"?typeof e=="string"?document.getElementById(e):e:null},create:function(e,t){var n=document.createElement(e);for(var r in t)t.hasOwnProperty(r)&&(r==="className"&&(r="class"),n.setAttribute(r,t[r]));return n},remove:function(e){var t;e&&(t=e.parentNode)&&t.removeChild(e)},scrollTo:function(e){e=this.get(e);if(e){if(e.scrollIntoView)return e.scrollIntoView();var t={},n=0,r=0;do n+=e.offsetTop||0,r+=e.offsetLeft||0,e=e.offsetParent;while(e);t={x:r,y:n},window.scrollTo(t.x,t.y)}},offsetTop:function(e){return this.offset(e)[1]},offsetLeft:function(e){return this.offset(e)[0]},positionedOffset:function(e){var t=0,n=0;e=this.get(e);do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;if(e){if(e.tagName.toLowerCase()==="body")break;var r=e.style.position;!r&&e.currentStyle&&(r=e.currentStyle.position);if((!r||r==="auto")&&typeof getComputedStyle!="undefined"){var i=getComputedStyle(e,null);r=i?i.position:null}if(r==="relative"||r==="absolute")break}}while(e);return[n,t]},offset:function(e){e=Ink.i(e);var t=["border-left-width","border-top-width"],n=[0,0],r,i,s,o,u=this._getPropPx,a=Ink.getModule("Ink.Dom.Browser",1);do o=window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle,r=[e.offsetLeft|0,e.offsetTop|0],i=[u(o,t[0]),u(o,t[1])],a.OPERA?(n[0]+=r[0],n[1]+=r[1]):(n[0]+=r[0]+i[0],n[1]+=r[1]+i[1]),s=e.offsetParent;while(e=s);return i=[u(o,t[0]),u(o,t[1])],a.GECKO?(n[0]+=i[0],n[1]+=i[1]):a.OPERA||(n[0]-=i[0],n[1]-=i[1]),n},scroll:function(e){return e=e?Ink.i(e):document.body,[window.pageXOffset?window.pageXOffset:e.scrollLeft,window.pageYOffset?window.pageYOffset:e.scrollTop]},_getPropPx:function(e,t){var n,r,i=e.getPropertyValue?e.getPropertyValue(t):e[t];return i?(r=i.indexOf("px"),r===-1?n=0:n=parseInt(i,10)):n=0,n},offset2:function(e){return this.offset(e)},hasAttribute:function(e,t){return e.hasAttribute?e.hasAttribute(t):!!e.getAttribute(t)},insertAfter:function(e,t){(t=this.get(t))&&t.parentNode.insertBefore(e,t.nextSibling)},insertTop:function(e,t){(t=this.get(t))&&t.insertBefore(e,t.firstChild)},textContent:function(e){e=Ink.i(e);var t,n,r,i;switch(e&&e.nodeType){case 9:return this.textContent(e.documentElement||e.body&&e.body.parentNode||e.body);case 1:t=e.innerText;if(typeof t!="undefined")return t;case 11:t=e.textContent;if(typeof t!="undefined")return t;if(e.firstChild===e.lastChild)return this.textContent(e.firstChild);t=[],r=e.childNodes;for(n=0,i=r.length;n<i;++n)t.push(this.textContent(r[n]));return t.join("");case 3:case 4:return e.nodeValue}return""},setTextContent:function(e,t){e=Ink.i(e);switch(e&&e.nodeType){case 1:if("innerText"in e){e.innerText=t;break};case 11:if("textContent"in e){e.textContent=t;break};case 9:while(e.firstChild)e.removeChild(e.firstChild);if(t!==""){var n=e.ownerDocument||e;e.appendChild(n.createTextNode(t))}break;case 3:case 4:e.nodeValue=t}},isLink:function(e){var t=e&&e.nodeType===1&&(/^a|area$/i.test(e.tagName)||e.hasAttributeNS&&e.hasAttributeNS("http://www.w3.org/1999/xlink","href"));return!!t},isAncestorOf:function(e,t){if(!t||!e)return!1;if(t.compareDocumentPosition)return(e.compareDocumentPosition(t)&16)!==0;while(t=t.parentNode)if(t===e)return!0;return!1},descendantOf:function(e,t){return e!==t&&this.isAncestorOf(e,t)},firstElementChild:function(e){if(!e)return null;if("firstElementChild"in e)return e.firstElementChild;var t=e.firstChild;while(t&&t.nodeType!==1)t=t.nextSibling;return t},lastElementChild:function(e){if(!e)return null;if("lastElementChild"in e)return e.lastElementChild;var t=e.lastChild;while(t&&t.nodeType!==1)t=t.previousSibling;return t},nextElementSibling:function(e){var t=null;if(!e)return t;if("nextElementSibling"in e)return e.nextElementSibling;t=e.nextSibling;while(t&&t.nodeType!==1)t=t.nextSibling;return t},previousElementSibling:function(e){var t=null;if(!e)return t;if("previousElementSibling"in e)return e.previousElementSibling;t=e.previousSibling;while(t&&t.nodeType!==1)t=t.previousSibling;return t},elementWidth:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.offsetWidth},elementHeight:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.offsetHeight},elementLeft:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.offsetLeft},elementTop:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.offsetTop},elementDimensions:function(e){return e=Ink.i(e),[e.offsetWidth,e.offsetHeight]},outerDimensions:function(t){var n=e.elementDimensions(t),r=Ink.getModule("Ink.Dom.Css_1");return[n[0]+parseFloat(r.getStyle(t,"marginLeft")||0)+parseFloat(r.getStyle(t,"marginRight")||0),n[1]+parseFloat(r.getStyle(t,"marginTop")||0)+parseFloat(r.getStyle(t,"marginBottom")||0)]},inViewport:function(t,n){var r=Ink.i(t).getBoundingClientRect();return n?r.bottom>0&&r.left<e.viewportWidth()&&r.top<e.viewportHeight()&&r.right>0:r.top>0&&r.right<e.viewportWidth()&&r.bottom<e.viewportHeight()&&r.left>0},clonePosition:function(e,t){var n=this.offset(t);return e.style.left=n[0]+"px",e.style.top=n[1]+"px",e},ellipsizeText:function(e,t){if(e=Ink.i(e))while(e&&e.scrollHeight>e.offsetHeight+8)e.textContent=e.textContent.replace(/(\s+\S+)\s*$/,t||"\u2026")},findUpwardsHaving:function(e,t){while(e&&e.nodeType===1){if(t(e))return e;e=e.parentNode}return!1},findUpwardsByClass:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)"),r=function(e){var t=e.className;return t&&n.test(t)};return this.findUpwardsHaving(e,r)},findUpwardsByTag:function(e,t){t=t.toUpperCase();var n=function(e){return e.nodeName&&e.nodeName.toUpperCase()===t};return this.findUpwardsHaving(e,n)},findUpwardsById:function(e,t){var n=function(e){return e.id===t};return this.findUpwardsHaving(e,n)},findUpwardsBySelector:function(e,t){if(typeof Ink.Dom=="undefined"||typeof Ink.Dom.Selector=="undefined")throw new Error("This method requires Ink.Dom.Selector");var n=function(e){return Ink.Dom.Selector.matchesSelector(e,t)};return this.findUpwardsHaving(e,n)},getChildrenText:function(e,t){var n,r,i,s=e.childNodes,o=s.length,u="";if(!e)return u;for(r=0;r<o;++r){n=s[r];if(!n)continue;n.nodeType===3&&(i=this._trimString(String(n.data)),i.length>0?(u+=i,t&&e.removeChild(n)):e.removeChild(n))}return u},_trimString:function(e){return String.prototype.trim?e.trim():e.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(e){var t=Ink.i(e),n=[];for(var r=0;r<t.options.length;++r)n.push(t.options[r].value);return n},_normalizeData:function(e){var t,n=[];for(var r=0,i=e.length;r<i;++r)t=e[r],t instanceof Array?t.length===1&&t.push(t[0]):t=[t,t],n.push(t);return n},fillSelect:function(e,t,n,r){var i=Ink.i(e);if(!i)return;i.innerHTML="";var s,o;n||(o=document.createElement("option"),o.setAttribute("value",""),i.appendChild(o)),t=this._normalizeData(t);for(var u=0,a=t.length;u<a;++u)s=t[u],o=document.createElement("option"),o.setAttribute("value",s[0]),s.length>2&&o.setAttribute("extra",s[2]),o.appendChild(document.createTextNode(s[1])),s[0]===r&&o.setAttribute("selected","selected"),i.appendChild(o)},fillSelect2:function(e,t){e=Ink.i(e),e.innerHTML="";var n={skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create",optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist",defaultValue:""};if(!t)throw"param opts is a requirement!";if(!t.data)throw"opts.data is a requirement!";t=Ink.extendObj(n,t);var r,i,s=document.createElement("optgroup");s.setAttribute("label",t.optionsGroupLabel),t.data=this._normalizeData(t.data),t.skipCreate||t.data.unshift(["$create$",t.createLabel]),t.skipEmpty||t.data.unshift(["",t.emptyLabel]);for(var o=0,u=t.data.length;o<u;++o)i=t.data[o],r=document.createElement("option"),r.setAttribute("value",i[0]),r.appendChild(document.createTextNode(i[1])),i[0]===t.defaultValue&&r.setAttribute("selected","selected"),i[0]===""||i[0]==="$create$"?e.appendChild(r):s.appendChild(r);var a=function(e){var t=e[e.length-1][0];return t===""||t==="$create$"};a(t.data)&&(r=document.createElement("option"),r.setAttribute("value","$dummy$"),r.setAttribute("disabled","disabled"),r.appendChild(document.createTextNode(t.emptyOptionsGroupLabel)),s.appendChild(r)),e.appendChild(s);var f=function(t,n){var r=e.options[e.options.length-1];r.getAttribute("disabled")&&r.parentNode.removeChild(r),r=document.createElement("option"),r.setAttribute("value",t),r.appendChild(document.createTextNode(n)),s.appendChild(r),e.options[e.options.length-1].setAttribute("selected",!0)};t.skipCreate||(e.onchange=function(){e.value==="$create$"&&typeof t.onCreate=="function"&&t.onCreate(e,f)})},fillRadios:function(e,t,n,r,i,s){var o=Ink.i(e);o=o.nextSibling;while(o&&o.nodeType!==1)o=o.nextSibling;var u=document.createElement("span");o?o.parentNode.insertBefore(u,o):Ink.i(e).appendChild(u),n=this._normalizeData(n),t.substring(t.length-1)!=="]"&&(t+="[]");var a,f;r||(f=document.createElement("input"),f.setAttribute("type","radio"),f.setAttribute("name",t),f.setAttribute("value",""),u.appendChild(f),s&&u.appendChild(document.createElement(s)));for(var l=0;l<n.length;++l)a=n[l],f=document.createElement("input"),f.setAttribute("type","radio"),f.setAttribute("name",t),f.setAttribute("value",a[0]),u.appendChild(f),u.appendChild(document.createTextNode(a[1])),s&&u.appendChild(document.createElement(s)),a[0]===i&&(f.checked=!0);return u},fillChecks:function(e,t,n,r,i){var s=Ink.i(e);s=s.nextSibling;while(s&&s.nodeType!==1)s=s.nextSibling;var o=document.createElement("span");s?s.parentNode.insertBefore(o,s):Ink.i(e).appendChild(o),n=this._normalizeData(n),t.substring(t.length-1)!=="]"&&(t+="[]");var u,a;for(var f=0;f<n.length;++f)u=n[f],a=document.createElement("input"),a.setAttribute("type","checkbox"),a.setAttribute("name",t),a.setAttribute("value",u[0]),o.appendChild(a),o.appendChild(document.createTextNode(u[1])),i&&o.appendChild(document.createElement(i)),u[0]===r&&(a.checked=!0);return o},parentIndexOf:function(e,t){var n,r=0;for(var i=0,s=e.childNodes.length;i<s;++i){n=e.childNodes[i];if(n.nodeType===1){if(n===t)return r;++r}}return-1},nextSiblings:function(e){typeof e=="string"&&(e=document.getElementById(e));if(typeof e=="object"&&e!==null&&e.nodeType&&e.nodeType===1){var t=[],n=e.parentNode.children,r=this.parentIndexOf(e.parentNode,e);for(var i=++r,s=n.length;i<s;i++)t.push(n[i]);return t}return[]},previousSiblings:function(e){typeof e=="string"&&(e=document.getElementById(e));if(typeof e=="object"&&e!==null&&e.nodeType&&e.nodeType===1){var t=[],n=e.parentNode.children,r=this.parentIndexOf(e.parentNode,e);for(var i=0,s=r;i<s;i++)t.push(n[i]);return t}return[]},siblings:function(e){typeof e=="string"&&(e=document.getElementById(e));if(typeof e=="object"&&e!==null&&e.nodeType&&e.nodeType===1){var t=[],n=e.parentNode.children;for(var r=0,i=n.length;r<i;r++)e!==n[r]&&t.push(n[r]);return t}return[]},childElementCount:function(e){return e=Ink.i(e),"childElementCount"in e?e.childElementCount:e?this.siblings(e).length+1:0},appendHTML:function(e,t){var n=document.createElement("div");n.innerHTML=t;var r=n.children;for(var i=0;i<r.length;i++)e.appendChild(r[i])},prependHTML:function(e,t){var n=document.createElement("div");n.innerHTML=t;var r=e.firstChild,i=n.children;for(var s=i.length-1;s>=0;s--)e.insertBefore(i[s],r),r=e.firstChild},removeTextNodeChildren:function(e){var t,n,r=e;e=e.firstChild;while(e)n=e.nodeType===3,t=e,e=e.nextSibling,n&&r.removeChild(t)},htmlToFragment:function(e){return typeof document.createRange=="function"&&typeof Range.prototype.createContextualFragment=="function"?this.htmlToFragment=function(e){var t;return typeof e!="string"?document.createDocumentFragment():(t=document.createRange(),t.selectNode(document.body),t.createContextualFragment(e))}:this.htmlToFragment=function(e){var t=document.createDocumentFragment(),n,r;if(typeof e!="string")return t;n=document.createElement("div"),n.innerHTML=e;while(r=n.firstChild)t.appendChild(r);return t},this.htmlToFragment.call(this,e)},_camelCase:function(e){return e?e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}):e},data:function(e){var t;if(typeof e!="object"&&typeof e!="string")throw"[Ink.Dom.Element.data] :: Invalid selector defined";if(typeof e=="object")t=e;else{var n=Ink.getModule("Ink.Dom.Selector",1);if(!n)throw"[Ink.Dom.Element.data] :: This method requires Ink.Dom.Selector - v1";t=n.select(e);if(t.length<=0)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";t=t[0]}var r={},i=t.attributes||[],s,o,u;if(i)for(var a=0,f=i.length;a<f;++a)s=i[a],o=s.name,u=s.value,o&&o.indexOf("data-")===0&&(r[this._camelCase(o.replace("data-",""))]=u);return r},moveCursorTo:function(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else{var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},pageWidth:function(){var e;window.innerWidth&&window.scrollMaxX?e=window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?e=document.body.scrollWidth:e=document.body.offsetWidth;var t;return window.self.innerWidth?document.documentElement.clientWidth?t=document.documentElement.clientWidth:t=window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?t=document.documentElement.clientWidth:document.body&&(t=document.body.clientWidth),e<t?e:t},pageHeight:function(){var e;window.innerHeight&&window.scrollMaxY?e=window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?e=document.body.scrollHeight:e=document.body.offsetHeight;var t;return window.self.innerHeight?t=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight?t=document.documentElement.clientHeight:document.body&&(t=document.body.clientHeight),e<t?t:e},viewportWidth:function(){if(typeof window.innerWidth!="undefined")return window.innerWidth;if(document.documentElement&&typeof document.documentElement.offsetWidth!="undefined")return document.documentElement.offsetWidth},viewportHeight:function(){if(typeof window.innerHeight!="undefined")return window.innerHeight;if(document.documentElement&&typeof document.documentElement.offsetHeight!="undefined")return document.documentElement.offsetHeight},scrollWidth:function(){return typeof window.self.pageXOffset!="undefined"?window.self.pageXOffset:typeof document.documentElement!="undefined"&&typeof document.documentElement.scrollLeft!="undefined"?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return typeof window.self.pageYOffset!="undefined"?window.self.pageYOffset:typeof document.documentElement!="undefined"&&typeof document.documentElement.scrollTop!="undefined"?document.documentElement.scrollTop:document.body.scrollTop}};return e}),Ink.createModule("Ink.Dom.Event",1,[],function(){"use strict";var e={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(e,t){t=t||0;var n=0,r,i=function(){var s=+(new Date),o=s-n;if(o>=t)return n=s,e.apply(this,[].slice.call(arguments));var u=this,a=[].slice.call(arguments);clearTimeout(r),r=setTimeout(function(){return i.apply(u,a)})};return i},element:function(e){var t=e.target||e.type==="mouseout"&&e.fromElement||e.type==="mouseleave"&&e.fromElement||e.type==="mouseover"&&e.toElement||e.type==="mouseenter"&&e.toElement||e.srcElement||null;return!t||t.nodeType!==3&&t.nodeType!==4?t:t.parentNode},relatedTarget:function(e){var t=e.relatedTarget||e.type==="mouseout"&&e.toElement||e.type==="mouseleave"&&e.toElement||e.type==="mouseover"&&e.fromElement||e.type==="mouseenter"&&e.fromElement||null;return!t||t.nodeType!==3&&t.nodeType!==4?t:t.parentNode},findElement:function(e,t,n){var r=this.element(e);for(;;){if(r.nodeName.toLowerCase()===t.toLowerCase())return r;r=r.parentNode;if(!r)return n?!1:document;if(!r.parentNode)return n?!1:document}},fire:function(e,t,n){e=Ink.i(e);var r,i;document.createEvent?i={DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,focus:!0,focusin:!0,focusout:!0,blur:!0,load:!0,unload:!0,abort:!0,error:!0,select:!0,change:!0,submit:!0,reset:!0,resize:!0,scroll:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseover:!0,mouseout:!0,mouseup:!0,mousewheel:!0,wheel:!0,textInput:!0,keydown:!0,keypress:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,DOMSubtreeModified:!0,DOMNodeInserted:!0,DOMNodeRemoved:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemovedFromDocument:!0,DOMAttrModified:!0,DOMCharacterDataModified:!0,DOMAttributeNameChanged:!0,DOMElementNameChanged:!0,hashchange:!0}:i={onabort:!0,onactivate:!0,onafterprint:!0,onafterupdate:!0,onbeforeactivate:!0,onbeforecopy:!0,onbeforecut:!0,onbeforedeactivate:!0,onbeforeeditfocus:!0,onbeforepaste:!0,onbeforeprint:!0,onbeforeunload:!0,onbeforeupdate:!0,onblur:!0,onbounce:!0,oncellchange:!0,onchange:!0,onclick:!0,oncontextmenu:!0,oncontrolselect:!0,oncopy:!0,oncut:!0,ondataavailable:!0,ondatasetchanged:!0,ondatasetcomplete:!0,ondblclick:!0,ondeactivate:!0,ondrag:!0,ondragend:!0,ondragenter:!0,ondragleave:!0,ondragover:!0,ondragstart:!0,ondrop:!0,onerror:!0,onerrorupdate:!0,onfilterchange:!0,onfinish:!0,onfocus:!0,onfocusin:!0,onfocusout:!0,onhashchange:!0,onhelp:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onlayoutcomplete:!0,onload:!0,onlosecapture:!0,onmessage:!0,onmousedown:!0,onmouseenter:!0,onmouseleave:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onmousewheel:!0,onmove:!0,onmoveend:!0,onmovestart:!0,onoffline:!0,ononline:!0,onpage:!0,onpaste:!0,onprogress:!0,onpropertychange:!0,onreadystatechange:!0,onreset:!0,onresize:!0,onresizeend:!0,onresizestart:!0,onrowenter:!0,onrowexit:!0,onrowsdelete:!0,onrowsinserted:!0,onscroll:!0,onselect:!0,onselectionchange:!0,onselectstart:!0,onstart:!0,onstop:!0,onstorage:!0,onstoragecommit:!0,onsubmit:!0,ontimeout:!0,onunload:!0};if(e!==null&&e!==undefined){e===document&&document.createEvent&&!e.dispatchEvent&&(e=document.documentElement),document.createEvent?(r=document.createEvent("HTMLEvents"),typeof i[t]=="undefined"?r.initEvent("dataavailable",!0,!0):r.initEvent(t,!0,!0)):(r=document.createEventObject(),typeof i["on"+t]=="undefined"?r.eventType="ondataavailable":r.eventType="on"+t),r.eventName=t,r.memo=n||{};try{if(document.createEvent)e.dispatchEvent(r);else{if(!e.fireEvent)return;e.fireEvent(r.eventType,r)}}catch(s){}return r}},_callbackForCustomEvents:function(e,t,n){var r=t==="hashchange"&&e.attachEvent&&!window.onhashchange,i=t.indexOf(":")!==-1;if(r||i){var s=n;return Ink.bindEvent(function(e,t,n){e.eventName===t&&(window.addEventListener&&(window.event=e),n())},this,t,s)}return null},observe:function(e,t,n,r){e=Ink.i(e);if(e!==null&&e!==undefined){var i=this._callbackForCustomEvents(e,t,n);return i&&(n=i,t="dataavailable"),e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent("on"+t,n),n}},observeMulti:function(e,t,n,r){typeof e=="string"?e=Ink.ss(e):e instanceof Element&&(e=[e]);if(!e[0])return!1;var i=this._callbackForCustomEvents(e[0],t,n);i&&(n=i,t="dataavailable");for(var s=0,o=e.length;s<o;s++)this.observe(e[s],t,n,r);return n},stopObserving:function(e,t,n,r){e=Ink.i(e),e!==null&&e!==undefined&&(e.removeEventListener?e.removeEventListener(t,n,!!r):e.detachEvent("on"+t,n))},stop:function(e){e.cancelBubble!==null&&(e.cancelBubble=!0),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),window.attachEvent&&(e.returnValue=!1),e.cancel!==null&&(e.cancel=!0)},stopPropagation:function(e){e.cancelBubble!==null&&(e.cancelBubble=!0),e.stopPropagation&&e.stopPropagation()},stopDefault:function(e){e.preventDefault&&e.preventDefault(),window.attachEvent&&(e.returnValue=!1),e.cancel!==null&&(e.cancel=!0)},pointer:function(e){return{x:e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}},pointerX:function(e){return e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(e){return e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},isLeftClick:function(e){if(window.addEventListener){if(e.button===0)return!0;if(e.type.substring(0,5)==="touch"&&e.button===null)return!0}else if(e.button===1)return!0;return!1},isRightClick:function(e){return e.button===2},isMiddleClick:function(e){return window.addEventListener?e.button===1:e.button===4},getCharFromKeyboardEvent:function(e,t){var n=e.keyCode,r=String.fromCharCode(n),i=e.shiftKey;if(n>=65&&n<=90)return typeof t=="boolean"&&(i=t),i?r:r.toLowerCase();if(n>=96&&n<=105)return String.fromCharCode(48+(n-96));switch(n){case 109:case 189:return"-";case 107:case 187:return"+"}return r},debug:function(){}};return e}),Ink.createModule("Ink.Dom.FormSerialize",1,[],function(){"use strict";var e={serialize:function(e){e=Ink.i(e);var t=this._getFieldNameInputsMap(e),n={};for(var r in t)if(t.hasOwnProperty(r))if(r!==null){var i=r.replace(/\[\]$/,"");n[i]=this._getValuesOfField(t[r])}else n[r]=this._getValuesOfField(t[r]);return delete n["null"],n},fillIn:function(e,t){e=Ink.i(e);var n=this._getFieldNameInputsMap(e);delete n["null"];for(var r in t)t.hasOwnProperty(r)&&this._setValuesOfField(n[r],t[r])},_getFieldNameInputsMap:function(e){var t,n,r,i={};for(var s=0,o=e.elements.length;s<o;++s){r=e.elements[s],t=r.getAttribute("name"),n=r.nodeName.toLowerCase();if(n==="fieldset")continue;i[t]===undefined?i[t]=[r]:i[t].push(r)}return i},_getValuesOfField:function(e){var t=e[0].nodeName.toLowerCase(),n=e[0].getAttribute("type"),r=e[0].value,i,s,o,u,a,f,l=[];switch(t){case"select":for(i=0,s=e.length;i<s;++i){l[i]=[],f=e[i].getAttribute("multiple");for(o=0,u=e[i].options.length;o<u;++o){a=e[i].options[o];if(a.selected){if(!f){l[i]=a.value;break}l[i].push(a.value)}}}return e.length>0&&/\[[^\]]*\]$/.test(e[0].getAttribute("name"))?l:l[0];case"textarea":case"input":if(n==="checkbox"||n==="radio"){for(i=0,s=e.length;i<s;++i)a=e[i],a.checked&&l.push(a.value);return n==="checkbox"?e.length>1?l:!!l.length:e.length>1?l[0]:!!l.length}if(e.length>0&&/\[[^\]]*\]$/.test(e[0].getAttribute("name"))){var c=[];for(i=0,s=e.length;i<s;++i)c.push(e[i].value);return c}return r;default:return undefined}},_valInArray:function(e,t){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1},_setValuesOfField:function(e,t){if(!e)return;var n=e[0].nodeName.toLowerCase(),r=e[0].getAttribute("type"),i,s,o;switch(n){case"select":if(e.length>1)throw"Got multiple select elements with same name!";for(i=0,s=e[0].options.length;i<s;++i)o=e[0].options[i],o.selected=t instanceof Array?this._valInArray(o.value,t):o.value===t;break;case"textarea":case"input":if(r==="checkbox"||r==="radio")for(i=0,s=e.length;i<s;++i)o=e[i],o.checked=t instanceof Array?this._valInArray(o.value,t):e.length>1?o.value===t:!!t;else{if(e.length>1)throw"Got multiple input elements with same name!";r!=="file"&&(e[0].value=t)}break;default:throw'Unsupported element: "'+n+'"!'}}};return e}),Ink.createModule("Ink.Dom.Loaded",1,[],function(){"use strict";var e={_contexts:[],run:function(e,t){t||(t=e,e=window);var n;for(var r=0,i=this._contexts.length;r<i;r++)if(this._contexts[r][0]===e){n=this._contexts[r][1];break}n||(n={cbQueue:[],win:e,doc:e.document,root:e.document.documentElement,done:!1,top:!0},n.handlers={checkState:Ink.bindEvent(this._checkState,this,n),poll:Ink.bind(this._poll,this,n)},this._contexts.push([e,n]));var s=n.doc.addEventListener;n.add=s?"addEventListener":"attachEvent",n.rem=s?"removeEventListener":"detachEvent",n.pre=s?"":"on",n.det=s?"DOMContentLoaded":"onreadystatechange",n.wet=n.pre+"load";var o=n.handlers.checkState,u=n.doc.readyState==="complete"&&n.win.location.toString()!=="about:blank";if(u)setTimeout(Ink.bind(function(){t.call(n.win,"lazy")},this),0);else{n.cbQueue.push(t),n.doc[n.add](n.det,o),n.win[n.add](n.wet,o);var a=1;try{a=n.win.frameElement}catch(f){}if(!s&&n.root&&n.root.doScroll){try{n.top=!a}catch(f){}n.top&&this._poll(n)}}},_checkState:function(e,t){if(!e||e.type==="readystatechange"&&t.doc.readyState!=="complete")return;var n=e.type==="load"?t.win:t.doc;n[t.rem](t.pre+e.type,t.handlers.checkState,!1),this._ready(t)},_poll:function(e){try{e.root.doScroll("left")}catch(t){return setTimeout(e.handlers.poll,50)}this._ready(e)},_ready:function(e){if(!e.done){e.done=!0;for(var t=0;t<e.cbQueue.length;++t)e.cbQueue[t].call(e.win);e.cbQueue=[]}}};return e}),Ink.createModule("Ink.Dom.Selector",1,[],function(){"use strict";/*! * Sizzle CSS Selector Engine * Copyright 2013 jQuery Foundation and other contributors * Released under the MIT license * http://sizzlejs.com/ */;function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(r,i){return t.push(r+=" ")>n.cacheLength&&delete e[t.shift()],e[r]=i}}function st(e){return e[g]=!0,e}function ot(e){var t=l.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,c,d,v,w,E;(t?t.ownerDocument||t:y)!==l&&f(t),t=t||l,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(h&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&m(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&b.getElementsByClassName&&t.getElementsByClassName)return _.apply(n,t.getElementsByClassName(o)),n}if(b.qsa&&!p.test(e)){d=!0,v=g,w=t,E=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){c=ht(e),(d=t.getAttribute("id"))?v=d.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=c.length;while(a--)c[a]=v+pt(c[a]);w=$.test(e)&&t.parentNode||t,E=c.join(",")}if(E)try{return _.apply(n,w.querySelectorAll(E)),n}catch(S){}finally{d||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var r,i,s,o,u,a,f,l=x[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=n.preFilter;while(u){if(!r||(i=U.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);r=!1;if(i=z.exec(u))r=i.shift(),s.push({value:r,type:i[0].replace(R," ")}),u=u.slice(r.length);for(o in n.filter)(i=V[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(r=i.shift(),s.push({value:r,type:o,matches:i}),u=u.slice(r.length));if(!r)break}return t?u.length:u?ut.error(e):x(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,n,r){var i=n.dir,s=r&&i==="parentNode",o=E++;return n.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(n,r,u){var a,f,l,c=w+" "+o;if(u){while(n=n[i])if(n.nodeType===1||s)if(e(n,r,u))return!0}else while(n=n[i])if(n.nodeType===1||s){l=n[g]||(n[g]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===t)return a===!0}else{f=l[i]=[c],f[1]=e(n,r,u)||t;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[g]&&(r=gt(r)),i&&!i[g]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,r,i,s=e.length,u=n.relative[e[0].type],a=u||n.relative[" "],f=u?1:0,l=dt(function(e){return e===t},a,!0),c=dt(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,r){return!u&&(r||n!==o)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;f<s;f++)if(r=n.relative[e[f].type])h=[dt(vt(h),r)];else{r=n.filter[e[f].type].apply(null,e[f].matches);if(r[g]){i=++f;for(;i<s;i++)if(n.relative[e[i].type])break;return gt(f>1&&vt(h),f>1&&pt(e.slice(0,f-1)).replace(R,"$1"),r,f<i&&yt(e.slice(f,i)),i<s&&yt(e=e.slice(i)),i<s&&pt(e))}h.push(r)}return vt(h)}function bt(e,r){var i=0,s=r.length>0,u=e.length>0,a=function(a,f,c,h,p){var d,v,m,g=[],y=0,b="0",E=a&&[],S=p!=null,x=o,T=a||u&&n.find.TAG("*",p&&f.parentNode||f),N=w+=x==null?1:Math.random()||.1;S&&(o=f!==l&&f,t=i);for(;(d=T[b])!=null;b++){if(u&&d){v=0;while(m=e[v++])if(m(d,f,c)){h.push(d);break}S&&(w=N,t=++i)}s&&((d=!m&&d)&&y--,a&&E.push(d))}y+=b;if(s&&b!==y){v=0;while(m=r[v++])m(E,g,f,c);if(a){if(y>0)while(b--)!E[b]&&!g[b]&&(g[b]=O.call(h));g=mt(g)}_.apply(h,g),S&&!a&&g.length>0&&y+r.length>1&&ut.uniqueSort(h)}return S&&(w=N,o=x),E};return s?st(a):a}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,r,i){var o,u,a,f,l,c=ht(e);if(!i&&c.length===1){u=c[0]=c[0].slice(0);if(u.length>2&&(a=u[0]).type==="ID"&&t.nodeType===9&&h&&n.relative[u[1].type]){t=(n.find.ID(a.matches[0].replace(et,tt),t)||[])[0];if(!t)return r;e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){a=u[o];if(n.relative[f=a.type])break;if(l=n.find[f])if(i=l(a.matches[0].replace(et,tt),$.test(u[0].type)&&t.parentNode||t)){u.splice(o,1),e=i.length&&pt(u);if(!e)return _.apply(r,i),r;break}}}return s(e,c)(i,t,!h,r,$.test(e)),r}function St(){}var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g="sizzle"+ -(new Date),y=window.document,b={},w=0,E=0,S=it(),x=it(),T=it(),N=!1,C=function(){return 0},k=typeof undefined,L=1<<31,A=[],O=A.pop,M=A.push,_=A.push,D=A.slice,P=A.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{_.apply(A=D.call(y.childNodes),y.childNodes),A[y.childNodes.length].nodeType}catch(nt){_={apply:A.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}i=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},f=ut.setDocument=function(e){var t=e?e.ownerDocument||e:y;if(t===l||t.nodeType!==9||!t.documentElement)return l;l=t,c=t.documentElement,h=!i(t),b.getElementsByTagName=ot(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),b.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),b.getElementsByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),b.getByName=ot(function(e){e.id=g+0,e.appendChild(l.createElement("a")).setAttribute("name",g),e.appendChild(l.createElement("i")).setAttribute("name",g),c.appendChild(e);var n=t.getElementsByName&&t.getElementsByName(g).length===2+t.getElementsByName(g+0).length;return c.removeChild(e),n}),b.sortDetached=ot(function(e){return e.compareDocumentPosition&&e.compareDocumentPosition(l.createElement("div"))&1}),n.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==k&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},b.getByName?(n.find.ID=function(e,t){if(typeof t.getElementById!==k&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},n.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(n.find.ID=function(e,t){if(typeof t.getElementById!==k&&h){var n=t.getElementById(e);return n?n.id===e||typeof n.getAttributeNode!==k&&n.getAttributeNode("id").value===e?[n]:undefined:[]}},n.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==k&&e.getAttributeNode("id");return n&&n.value===t}}),n.find.TAG=b.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==k)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},n.find.NAME=b.getByName&&function(e,t){if(typeof t.getElementsByName!==k)return t.getElementsByName(name)},n.find.CLASS=b.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==k&&h)return t.getElementsByClassName(e)},d=[],p=[":focus"];if(b.qsa=rt(t.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||p.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||p.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&p.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||p.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),p.push(",.*:")});return(b.matchesSelector=rt(v=c.matchesSelector||c.mozMatchesSelector||c.webkitMatchesSelector||c.oMatchesSelector||c.msMatchesSelector))&&ot(function(e){b.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),d.push("!=",q)}),p=new RegExp(p.join("|")),d=d.length&&new RegExp(d.join("|")),m=rt(c.contains)||c.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},C=c.compareDocumentPosition?function(e,n){if(e===n)return N=!0,0;var r=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(r)return r&1||u&&n.compareDocumentPosition(e)===r?e===t||m(y,e)?-1:n===t||m(y,n)?1:a?P.call(a,e)-P.call(a,n):0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n)return N=!0,0;if(!s||!o)return e===t?-1:n===t?1:s?-1:o?1:0;if(s===o)return at(e,n);r=e;while(r=r.parentNode)u.unshift(r);r=n;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?at(u[i],a[i]):u[i]===y?-1:a[i]===y?1:0},l},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==l&&f(e),t=t.replace(Z,"='$1']");if(b.matchesSelector&&h&&(!d||!d.test(t))&&!p.test(t))try{var n=v.call(e,t);if(n||b.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,l,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==l&&f(e),m(e,t)},ut.attr=function(e,t){var r;return(e.ownerDocument||e)!==l&&f(e),h&&(t=t.toLowerCase()),(r=n.attrHandle[t])?r(e):!h||b.attributes?e.getAttribute(t):((r=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:r&&r.specified?r.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=0,i=0;N=!b.detectDuplicates,u=!b.sortDetached,a=!b.sortStable&&e.slice(0),e.sort(C);if(N){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return e},r=ut.getText=function(e){var t,n="",i=0,s=e.nodeType;if(!s)for(;t=e[i];i++)n+=r(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(s===3||s===4)return e.nodeValue;return n},n=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&S(e,function(e){return t.test(e.className||typeof e.getAttribute!==k&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,y=u&&t.nodeName.toLowerCase(),b=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===y:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&b){l=m[g]||(m[g]={}),f=l[e]||[],p=f[0]===w&&f[1],h=f[0]===w&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[w,p,h];break}}else if(b&&(f=(t[g]||(t[g]={}))[e])&&f[0]===w)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===y:c.nodeType===1)&&++h){b&&((c[g]||(c[g]={}))[e]=[w,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return i[g]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=P.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,r)}):i}},pseudos:{not:st(function(e){var t=[],n=[],r=s(e.replace(R,"$1"));return r[g]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=lt(e);return s=ut.compile=function(e,t){var n,r=[],i=[],s=T[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[g]?r.push(s):i.push(s);s=T(e,bt(i,r))}return s},n.pseudos.nth=n.pseudos.eq,St.prototype=n.filters=n.pseudos,n.setFilters=new St,b.sortStable=g.split("").sort(C).join("")===g,f(),[0,0].sort(C),b.detectDuplicates=N,{select:ut,matches:ut.matches,matchesSelector:ut.matchesSelector}}),Ink.createModule("Ink.Dom.Browser","1",[],function(){"use strict";var e={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser(),this.setDimensions(),this.setReferrer()},setDimensions:function(){var e=0,t=0;typeof window.innerWidth=="number"?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),this.windowWidth=e,this.windowHeight=t},setReferrer:function(){this.referrer=document.referrer!==undefined?document.referrer.length>0?window.escape(document.referrer):!1:!1},detectBrowser:function(){var e=navigator.userAgent;this.userAgent=e,e=e.toLowerCase();if((new RegExp("applewebkit/")).test(e))(new RegExp("chrome/")).test(e)?(this.CHROME=!0,this.model="chrome",this.version=e.replace(new RegExp("(.*)chrome/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit"):(this.SAFARI=!0,this.model="safari",this.version=e.replace(new RegExp("(.*)applewebkit/([^\\s]+)(.*)"),"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit");else if((new RegExp("opera")).test(e))this.OPERA=!0,this.model="opera",this.version=e.replace(new RegExp("(.*)opera.([^\\s$]+)(.*)"),"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if((new RegExp("konqueror")).test(e))this.KONQUEROR=!0,this.model="konqueror",this.version=e.replace(new RegExp("(.*)konqueror/([^;]+);(.*)"),"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if((new RegExp("msie\\ ")).test(e))this.IE=!0,this.model="ie",this.version=e.replace(new RegExp("(.*)\\smsie\\s([^;]+);(.*)"),"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if((new RegExp("gecko")).test(e)){this.GECKO=!0;var t=new RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");if(t.test(e))this.model=e.match(t)[1],this.version=e.replace(new RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2"),this.cssPrefix="-moz-",this.domPrefix="Moz";else{this.model="mozilla";var n=new RegExp("(.*)rv:([^)]+)(.*)");n.test(e)&&(this.version=e.replace(n,"$2")),this.cssPrefix="-moz-",this.domPrefix="Moz"}}},debug:function(){var e="known browsers: (ie, gecko, opera, safari, konqueror) \n";e+=[this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n",e+="model -> "+this.model+"\n",e+="version -> "+this.version+"\n",e+="\n",e+="original UA -> "+this.userAgent,alert(e)}};return e.init(),e}),Ink.createModule("Ink.Util.Url","1",[],function(){"use strict";var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(e,t){var n=e.indexOf("?")!==-1,r,i,s,o=[e];for(i in t)t.hasOwnProperty(i)&&(n?r="&":(r="?",n=!0),s=t[i],typeof s!="number"&&!s&&(s=""),o=o.concat([r,encodeURIComponent(i),"=",encodeURIComponent(s)]));return o.join("")},getQueryString:function(e){var t;e&&typeof e!="undefined"?t=e:t=this.getUrl();var n={};if(t.match(/\?(.+)/i)){var r=t.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2");if(r.length>0){var i=r.split(/[;&]/);for(var s=0;s<i.length;s++){var o=i[s].split("=");n[decodeURIComponent(o[0])]=typeof o[1]!="undefined"&&o[1]?decodeURIComponent(o[1]):!1}}}return n},getAnchor:function(e){var t;e&&typeof e!="undefined"?t=e:t=this.getUrl();var n=!1;return t.match(/#(.+)/)&&(n=t.replace(/([^#]+)#(.*)/,"$2")),n},getAnchorString:function(e){var t;e&&typeof e!="undefined"?t=e:t=this.getUrl();var n={};if(t.match(/#(.+)/i)){var r=t.replace(/^([^#]+)#(.*)?/g,"$2");if(r.length>0){var i=r.split(/[;&]/);for(var s=0;s<i.length;s++){var o=i[s].split("=");n[decodeURIComponent(o[0])]=typeof o[1]!="undefined"&&o[1]?decodeURIComponent(o[1]):!1}}}return n},parseUrl:function(e){var t={};if(e&&typeof e!="undefined"&&typeof e=="string"){if(e.match(/^([^:]+):\/\//i)){var n=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;e.match(n)&&(t.scheme=e.replace(n,"$1"),t.host=e.replace(n,"$2"),t.path="/"+e.replace(n,"$3"),t.query=e.replace(n,"$4")||!1,t.fragment=e.replace(n,"$5")||!1)}else{var r=new RegExp("^([^\\?]+)\\?([^#]+)#(.*)","i"),i=new RegExp("^([^\\?]+)\\?([^#]+)#?","i"),s=new RegExp("^([^\\?]+)\\??","i");e.match(r)?(t.scheme=!1,t.host=!1,t.path=e.replace(r,"$1"),t.query=e.replace(r,"$2"),t.fragment=e.replace(r,"$3")):e.match(i)?(t.scheme=!1,t.host=!1,t.path=e.replace(i,"$1"),t.query=e.replace(i,"$2"),t.fragment=!1):e.match(s)&&(t.scheme=!1,t.host=!1,t.path=e.replace(s,"$1"),t.query=!1,t.fragment=!1)}if(t.host){var o=new RegExp("^(.*)\\:(\\d+)$","i");if(t.host.match(o)){var u=t.host;t.host=u.replace(o,"$1"),t.port=u.replace(o,"$2")}else t.port=!1;if(t.host.match(/@/i)){var a=t.host;t.host=a.split("@")[1];var f=a.split("@")[0];f.match(/\:/)?(t.user=f.split(":")[0],t.pass=f.split(":")[1]):(t.user=f,t.pass=!1)}}}return t},currentScriptElement:function(e){var t=document.getElementsByTagName("script");if(typeof e=="undefined")return t.length>0?t[t.length-1]:!1;var n=!1,r=new RegExp(""+e+"","i");for(var i=0,s=t.length;i<s;i++){n=t[i];if(r.test(n.src))return n}return!1},_debug:function(){}};return e}),Ink.createModule("Ink.Util.Swipe","1",["Ink.Dom.Event_1"],function(e){"use strict";var t=function(e,t){this._options=Ink.extendObj({callback:undefined,forceAxis:undefined,maxDist:undefined,maxDuration:undefined,minDist:undefined,minDuration:undefined,stopEvents:!0,storeGesture:!1},t||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._element=Ink.i(e),this._init()};return t._supported="ontouchstart"in document.documentElement,t.prototype={_init:function(){var t=document.body;e.observe(t,"touchstart",this._handlers.down),this._options.storeGesture&&e.observe(t,"touchmove",this._handlers.move),e.observe(t,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(e,t){if(!e)return;do{if(e===t)return!0;e=e.parentNode}while(e);return!1},_onDown:function(t){if(event.changedTouches.length!==1)return;if(!this._isMeOrParent(t.target,this._element))return;this._options.stopEvents===!0&&e.stop(t),t=t.changedTouches[0],this._isOn=!0,this._target=t.target,this._t0=(new Date).valueOf(),this._p0=[t.pageX,t.pageY],this._options.storeGesture&&(this._gesture=[this._p0],this._time=[0])},_onMove:function(t){if(!this._isOn||event.changedTouches.length!==1)return;this._options.stopEvents===!0&&e.stop(t),t=t.changedTouches[0];var n=(new Date).valueOf(),r=(n-this._t0)*.001;this._gesture.push([t.pageX,t.pageY]),this._time.push(r)},_onUp:function(t){if(!this._isOn||event.changedTouches.length!==1)return;this._options.stopEvents&&e.stop(t),t=t.changedTouches[0],this._isOn=!1;var n=(new Date).valueOf(),r=[t.pageX,t.pageY],i=(n-this._t0)*.001,s=[r[0]-this._p0[0],r[1]-this._p0[1]],o=Math.sqrt(s[0]*s[0]+s[1]*s[1]),u=Math.abs(s[0])>Math.abs(s[1])?"x":"y",a=this._options;if(a.minDist&&o<a.minDist)return;if(a.maxDist&&o>a.maxDist)return;if(a.minDuration&&i<a.minDuration)return;if(a.maxDuration&&i>a.maxDuration)return;if(a.forceAxis&&u!==a.forceAxis)return;var f={upEvent:t,elementId:this._element.id,duration:i,dr:s,dist:o,axis:u,target:this._target};this._options.storeGesture&&(f.gesture=this._gesture,f.time=this._time),this._options.callback(this,f)}},t}),Ink.createModule("Ink.Util.String","1",[],function(){"use strict";var InkUtilString={_chars:["&","\u00e0","\u00e1","\u00e2","\u00e3","\u00e4","\u00e5","\u00e6","\u00e7","\u00e8","\u00e9","\u00ea","\u00eb","\u00ec","\u00ed","\u00ee","\u00ef","\u00f0","\u00f1","\u00f2","\u00f3","\u00f4","\u00f5","\u00f6","\u00f8","\u00f9","\u00fa","\u00fb","\u00fc","\u00fd","\u00fe","\u00ff","\u00c0","\u00c1","\u00c2","\u00c3","\u00c4","\u00c5","\u00c6","\u00c7","\u00c8","\u00c9","\u00ca","\u00cb","\u00cc","\u00cd","\u00ce","\u00cf","\u00d0","\u00d1","\u00d2","\u00d3","\u00d4","\u00d5","\u00d6","\u00d8","\u00d9","\u00da","\u00db","\u00dc","\u00dd","\u00de","\u20ac",'"',"\u00df","<",">","\u00a2","\u00a3","\u00a4","\u00a5","\u00a6","\u00a7","\u00a8","\u00a9","\u00aa","\u00ab","\u00ac","\u00ad","\u00ae","\u00af","\u00b0","\u00b1","\u00b2","\u00b3","\u00b4","\u00b5","\u00b6","\u00b7","\u00b8","\u00b9","\u00ba","\u00bb","\u00bc","\u00bd","\u00be"],_entities:["amp","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","euro","quot","szlig","lt","gt","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34"],_accentedChars:["\u00e0","\u00e1","\u00e2","\u00e3","\u00e4","\u00e5","\u00e8","\u00e9","\u00ea","\u00eb","\u00ec","\u00ed","\u00ee","\u00ef","\u00f2","\u00f3","\u00f4","\u00f5","\u00f6","\u00f9","\u00fa","\u00fb","\u00fc","\u00e7","\u00f1","\u00c0","\u00c1","\u00c2","\u00c3","\u00c4","\u00c5","\u00c8","\u00c9","\u00ca","\u00cb","\u00cc","\u00cd","\u00ce","\u00cf","\u00d2","\u00d3","\u00d4","\u00d5","\u00d6","\u00d9","\u00da","\u00db","\u00dc","\u00c7","\u00d1"],_accentedRemovedChars:["a","a","a","a","a","a","e","e","e","e","i","i","i","i","o","o","o","o","o","u","u","u","u","c","n","A","A","A","A","A","A","E","E","E","E","I","I","I","I","O","O","O","O","O","U","U","U","U","C","N"],_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(e,t){var n=t?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return e?String(e).replace(n,function(e,t,n,r){return t+n.toUpperCase()+r.toLowerCase()}):e},trim:function(e){return typeof e=="string"?e.replace(/^\s+|\s+$|\n+$/g,""):e},stripTags:function(e,t){if(t&&typeof t=="string"){var n=InkUtilString.trim(t).split(","),r=[],i=!1;for(var s=0;s<n.length;s++)InkUtilString.trim(n[s])!==""&&(i=InkUtilString.trim(n[s].replace(/(\<|\>)/g,"").replace(/\s/,"")),r.push("(<"+i+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+i+">)"));var o=r.join("|"),u=new RegExp(o,"i"),a=e.match(new RegExp("<[^>]*>","g"));for(var f=0;f<a.length;f++)a[f].match(u)||(e=e.replace(new RegExp(a[f],"gm"),""));return e}return e.replace(/\<[^\>]+\>/g,"")},htmlEntitiesEncode:function(e){if(e&&e.replace){var t=!1;for(var n=0;n<InkUtilString._chars.length;n++)t=new RegExp(InkUtilString._chars[n],"gm"),e=e.replace(t,"&"+InkUtilString._entities[n]+";")}return e},htmlEntitiesDecode:function(e){if(e&&e.replace){var t=!1;for(var n=0;n<InkUtilString._entities.length;n++)t=new RegExp("&"+InkUtilString._entities[n]+";","gm"),e=e.replace(t,InkUtilString._chars[n]);e=e.replace(/&#[^;]+;?/g,function(e){return e.charAt(2)==="x"?String.fromCharCode(parseInt(e.substring(3),16)):String.fromCharCode(parseInt(e.substring(2),10))})}return e},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},shortString:function(e,t){var n=e.split(" "),r="";for(var i=0;i<n.length;i++){if((r+n[i]+" ").length>=t){r+="&hellip;";break}r+=n[i]+" "}return r},truncateString:function(e,t){return e.length-1>t?e.substr(0,t-1)+"\u2026":e},utf8Decode:function(e){var t="",n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63),n+=3);return t},removeAccentedChars:function(e){var t=e,n=!1;for(var r=0;r<InkUtilString._accentedChars.length;r++)n=new RegExp(InkUtilString._accentedChars[r],"gm"),t=t.replace(n,""+InkUtilString._accentedRemovedChars[r]+"");return t},substrCount:function(e,t){return e?e.split(t).length-1:0},evalJSON:function(strJSON,sanitize){if(typeof sanitize=="undefined"||sanitize===null||InkUtilString.isJSON(strJSON))try{return typeof JSON!="undefined"&&typeof JSON.parse!="undefined"?JSON.parse(strJSON):eval("("+strJSON+")")}catch(e){throw new Error("ERROR: Bad JSON string...")}},isJSON:function(e){return e=e.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(e)},htmlEscapeUnsafe:function(e){var t=InkUtilString._htmlUnsafeChars;return e!=null?String(e).replace(/[<>&'"]/g,function(e){return t[e]}):e},normalizeWhitespace:function(e){return e!=null?InkUtilString.trim(String(e).replace(/\s+/g," ")):e},toUnicode:function(e){if(typeof e=="string"){var t="",n=!1,r=!1,i=e.length,s=0;while(s<i){n=e.charCodeAt(s);if(n>=32&&n<=126||n==8||n==9||n==10||n==12||n==13||n==32||n==34||n==47||n==58||n==92)n==8?r="\\b":n==9?r="\\t":n==10?r="\\n":n==12?r="\\f":n==13?r="\\r":r=e.charAt(s);else{r=e.charCodeAt(s).toString(16)+"".toUpperCase();while(r.length<4)r="0"+r;r="\\u"+r}t+=r,s++}return t}},escape:function(e){var t=e.charCodeAt(0).toString(16).split("");if(t.length<3){while(t.length<2)t.unshift("0");t.unshift("x")}else{while(t.length<4)t.unshift("0");t.unshift("u")}return t.unshift("\\"),t.join("")},unescape:function(e){var t=e.lastIndexOf("0");t=t===-1?2:Math.min(t,2);var n=e.substring(t),r=parseInt(n,16);return String.fromCharCode(r)},escapeText:function(e,t){t===undefined&&(t=["[","]","'",","]);var n=[],r,i;for(var s=0,o=e.length;s<o;++s){r=e[s],i=r.charCodeAt(0);if(i<32||i>126&&t.indexOf(r)===-1)r=InkUtilString.escape(r);n.push(r)}return n.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(e){var t;while(t=InkUtilString.escapedCharRegex.exec(e))t=t[0],e=e.replace(t,InkUtilString.unescape(t)),InkUtilString.escapedCharRegex.lastIndex=0;return e},strcmp:function(e,t){return e===t?0:e>t?1:-1},packetize:function(e,t){var n=e.length,r=new Array(Math.ceil(n/t)),i=e.split(""),s,o=0;while(n)s=Math.min(t,n),r[o++]=i.splice(0,s).join(""),n-=s;return r}};return InkUtilString}),Ink.createModule("Ink.Util.Json","1",[],function(){"use strict";function twoDigits(e){var t=""+e;return t.length===1?"0"+t:t}var function_call=Function.prototype.call,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,date_toISOString=Date.prototype.toISOString?Ink.bind(function_call,Date.prototype.toISOString):function(e){return e.getUTCFullYear()+"-"+twoDigits(e.getUTCMonth()+1)+"-"+twoDigits(e.getUTCDate())+"T"+twoDigits(e.getUTCHours())+":"+twoDigits(e.getUTCMinutes())+":"+twoDigits(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},InkJson={_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(e){var t={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/([\x00-\x1f\\"])/g,function(e,n){var r=t[n];return r?r:(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})),e},_toUnicode:function(e){if(!this._convertToUnicode)return this._escape(e);var t="",n=!1,r=!1,i=0,s=e.length;while(i<s){n=e.charCodeAt(i);if(n>=32&&n<=126||n===8||n===9||n===10||n===12||n===13||n===32||n===34||n===47||n===58||n===92)n===34||n===92||n===47?r="\\"+e.charAt(i):n===8?r="\\b":n===9?r="\\t":n===10?r="\\n":n===12?r="\\f":n===13?r="\\r":r=e.charAt(i);else if(this._convertToUnicode){r=e.charCodeAt(i).toString(16)+"".toUpperCase();while(r.length<4)r="0"+r;r="\\u"+r}else r=e.charAt(i);t+=r,i++}return t},_stringifyValue:function(e){if(typeof e=="string")return'"'+this._toUnicode(e)+'"';if(typeof e=="number"&&(isNaN(e)||!isFinite(e)))return"null";if(typeof e=="undefined"||e===null)return"null";if(typeof e.toJSON=="function"){var t=e.toJSON();return typeof t=="string"?'"'+this._escape(t)+'"':this._escape(t.toString())}if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="function")return"null";if(e.constructor===Date)throw"";if(e.constructor===Array){var n="";for(var r=0,i=e.length;r<i;r++)r>0&&(n+=","),n+=this._stringifyValue(e[r]);return"["+n+"]"}var s="";for(var o in e)(({})).hasOwnProperty.call(e,o)&&(s!==""&&(s+=","),s+='"'+this._escape(o)+'": '+this._stringifyValue(e[o]));return"{"+s+"}"},stringify:function(e,t){return this._convertToUnicode=!!t,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(e):this._stringifyValue(e)},parse:function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};return InkJson}),Ink.createModule("Ink.Util.I18n","1",[],function(){"use strict";var e=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,t=function(e,t){return typeof e=="function"?e.apply(this,t):typeof e!==undefined?e:""},n=function(e,t,r){if(!(this instanceof n))return new n(e,t,r);this.reset().lang(t).testMode(r).append(e||{},t)};return n.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},append:function(e){return this._dicts.push(e),this._dict=Ink.extendObj(this._dict,e[this._lang]),this},lang:function(e){if(!arguments.length)return this._lang;if(e&&this._lang!==e){this._lang=e,this._dict={};for(var t=0,n=this._dicts.length;t<n;t++)this._dict=Ink.extendObj(this._dict,this._dicts[t][e]||{})}return this},testMode:function(e){return arguments.length?(e!==undefined&&(this._testMode=!!e),this):!!this._testMode},getKey:function(e){var t,r=this._gLang,i=this._lang;return e in this._dict?t=this._dict[e]:(n.lang(i),t=this._gDict[e],n.lang(r)),t},text:function(n){if(typeof n!="string")return;var r=Array.prototype.slice.call(arguments,1),i=0,s=typeof r[0]=="object",o=this.getKey(n);return o===undefined&&(o=this._testMode?"["+n+"]":n),typeof o=="number"&&(o+=""),typeof o=="string"?(o=o.replace(e,function(e,n,o,u){var a=n?n:o?r[o-(s?0:1)]:u?r[0][u]||"":r[i++ +(s?1:0)];return t(a,[i].concat(r))}),o):typeof o=="function"?o.apply(this,r):o instanceof Array?t(o[r[0]],r):typeof o=="object"?t(o[r[0]],r):""},ntext:function(e,t,n){var r=Array.prototype.slice.apply(arguments),i;if(r.length===2&&typeof t=="number"){i=this.getKey(e);if(!(i instanceof Array))return"";r.splice(0,1),i=i[t===1?0:1]}else r.splice(0,2),i=n===1?e:t;return this.text.apply(this,[i].concat(r))},ordinal:function(e){if(e===undefined)return"";var n=+e.toString().slice(-1),r=this.getKey("_ordinals");if(r===undefined)return"";if(typeof r=="string")return r;var i;if(typeof r=="function"){i=r(e,n);if(typeof i=="string")return i}if("exceptions"in r){i=typeof r.exceptions=="function"?r.exceptions(e,n):e in r.exceptions?t(r.exceptions[e],[e,n]):undefined;if(typeof i=="string")return i}if("byLastDigit"in r){i=typeof r.byLastDigit=="function"?r.byLastDigit(n,e):n in r.byLastDigit?t(r.byLastDigit[n],[n,e]):undefined;if(typeof i=="string")return i}if("default"in r){i=t(r["default"],[e,n]);if(typeof i=="string")return i}return""},alias:function(){var e=Ink.bind(n.prototype.text,this);return e.ntext=Ink.bind(n.prototype.ntext,this),e.append=Ink.bind(n.prototype.append,this),e.ordinal=Ink.bind(n.prototype.ordinal,this),e.testMode=Ink.bind(n.prototype.testMode,this),e}},n.reset=function(){n.prototype._gDicts=[],n.prototype._gDict={},n.prototype._gLang="pt_PT"},n.reset(),n.append=function(e,t){if(t){if(!(t in e)){var r={};r[t]=e,e=r}t!==n.prototype._gLang&&n.lang(t)}n.prototype._gDicts.push(e),Ink.extendObj(n.prototype._gDict,e[n.prototype._gLang])},n.lang=function(e){if(!arguments.length)return n.prototype._gLang;if(e&&n.prototype._gLang!==e){n.prototype._gLang=e,n.prototype._gDict={};for(var t=0,r=n.prototype._gDicts.length;t<r;t++)Ink.extendObj(n.prototype._gDict,n.prototype._gDicts[t][e]||{})}},n}),Ink.createModule("Ink.Util.Dumper","1",[],function(){"use strict";var e={_tab:"\u00a0\u00a0\u00a0\u00a0",_formatParam:function(e){var t="";switch(typeof e){case"string":t="(string) "+e;break;case"number":t="(number) "+e;break;case"boolean":t="(boolean) "+e;break;case"object":e!==null?e.constructor===Array?t="Array \n{\n"+this._outputFormat(e,0)+"\n}":t="Object \n{\n"+this._outputFormat(e,0)+"\n}":t="null";break;default:t=!1}return t},_getTabs:function(e){var t="";for(var n=0;n<e;n++)t+=this._tab;return t},_outputFormat:function(e,t){var n="",r=!1;for(var i in e)if(e[i]!==null)if(typeof e[i]!="object"||e[i].constructor!==Array&&e[i].constructor!==Object){if(e[i].constructor===Function)continue;n=n+this._tab+this._getTabs(t)+"["+i+"] => "+e[i]+"\n"}else e[i].constructor===Array?r="Array":e[i].constructor===Object&&(r="Object"),n+=this._tab+this._getTabs(t)+"["+i+"] => <b>"+r+"</b>\n",n+=this._tab+this._getTabs(t)+"{\n",n+=this._outputFormat(e[i],t+1)+this._tab+this._getTabs(t)+"}\n";else n=n+this._tab+this._getTabs(t)+"["+i+"] => null \n";return n},printDump:function(e,t){if(!t||typeof t=="undefined")document.write("<pre>"+this._formatParam(e)+"</pre>");else if(typeof t=="string")document.getElementById(t).innerHTML="<pre>"+this._formatParam(e)+"</pre>";else{if(typeof t!="object")throw"TARGET must be an element or an element ID";t.innerHTML="<pre>"+this._formatParam(e)+"</pre>"}},returnDump:function(e){return this._formatParam(e)},alertDump:function(e){window.alert(this._formatParam(e).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(e){var t="dumperwindow_"+Math.random()*1e4,n=window.open("",t,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");n.document.open(),n.document.write("<pre>"+this._formatParam(e)+"</pre>"),n.document.close(),n.focus()}};return e}),Ink.createModule("Ink.Util.Date","1",[],function(){"use strict";var e={_months:function(e){var t=["Janeiro","Fevereiro","Mar\u00e7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return t[e]},_iMonth:function(e){return Number(e)?+e-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"mar\u00e7o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[e.toLowerCase()]},_wDays:function(e){var t=["Domingo","Segunda","Ter\u00e7a","Quarta","Quinta","Sexta","S\u00e1bado"];return t[e]},_iWeek:function(e){return Number(e)?+e||7:{segunda:1,seg:1,"ter\u00e7a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"s\u00e1bado":6,"s\u00e1b":6,domingo:7,dom:7}[e.toLowerCase()]},_daysInMonth:function(e,t){var n;return e===1||e===3||e===5||e===7||e===8||e===10||e===12?n=31:e===4||e===6||e===9||e===11?n=30:t%400===0||t%4===0&&t%100!==0?n=29:n=28,n},get:function(e,t){if(typeof e=="undefined"||e==="")e="Y-m-d";var n=e.split(""),r=new Array(n.length),i="\\",s;typeof t=="undefined"?s=new Date:typeof t=="number"?s=new Date(t*1e3):s=new Date(t);var o,u,a;for(var f=0;f<n.length;f++)switch(n[f]){case i:r[f]=n[f+1],f++;break;case"d":var l=s.getDate();r[f]=String(l).length>1?l:"0"+l;break;case"D":r[f]=this._wDays(s.getDay()).substring(0,3);break;case"j":r[f]=s.getDate();break;case"l":r[f]=this._wDays(s.getDay());break;case"N":r[f]=s.getDay()||7;break;case"S":var c=s.getDate(),h=["st","nd","rd"],p="";c>=11&&c<=13?r[f]="th":r[f]=(p=h[String(c).substr(-1)-1])?p:"th";break;case"w":r[f]=s.getDay();break;case"z":o=Date.UTC(s.getFullYear(),0,0),u=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate()),r[f]=Math.floor((u-o)/864e5);break;case"W":var d=new Date(s.getFullYear(),0,1);o=d.getDay()||7;var v=Math.floor((s-d)/864e5+1);r[f]=Math.ceil((v-(8-o))/7)+1;break;case"F":r[f]=this._months(s.getMonth());break;case"m":var m=String(s.getMonth()+1);r[f]=m.length>1?m:"0"+m;break;case"M":r[f]=this._months(s.getMonth()).substring(0,3);break;case"n":r[f]=s.getMonth()+1;break;case"t":r[f]=this._daysInMonth(s.getMonth()+1,s.getYear());break;case"L":var g=s.getFullYear();r[f]=g%4?!1:g%100?!0:g%400?!1:!0;break;case"o":throw'"o" not implemented!';case"Y":r[f]=s.getFullYear();break;case"y":r[f]=String(s.getFullYear()).substring(2);break;case"a":r[f]=s.getHours()<12?"am":"pm";break;case"A":r[f]=s.getHours<12?"AM":"PM";break;case"B":throw'"B" not implemented!';case"g":a=s.getHours(),r[f]=a<=12?a:a-12;break;case"G":r[f]=String(s.getHours());break;case"h":a=String(s.getHours()),a=a<=12?a:a-12,r[f]=a.length>1?a:"0"+a;break;case"H":a=String(s.getHours()),r[f]=a.length>1?a:"0"+a;break;case"i":var y=String(s.getMinutes());r[f]=y.length>1?y:"0"+y;break;case"s":var b=String(s.getSeconds());r[f]=b.length>1?b:"0"+b;break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":o=new Date(s.getFullYear(),0,1),r[f]=s.getTimezoneOffset()!==o.getTimezoneOffset()?1:0;break;case"O":var w=s.getTimezoneOffset(),E=w%60;a=String((w-E)/60*-1),a.charAt(0)!=="-"&&(a="+"+a),a=a.length===3?a:a.replace(/([+\-])(\d)/,"$10$2"),r[f]=a+E+"0";break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":r[f]=s.getTimezoneOffset()*60;break;case"c":throw'"c" not implemented!';case"r":var S=this._wDays(s.getDay()).substr(0,3),x=this._months(s.getMonth()).substr(0,3);r[f]=S+", "+s.getDate()+" "+x+this.get(" Y H:i:s O",s);break;case"U":r[f]=Math.floor(s.getTime()/1e3);break;default:r[f]=n[f]}return r.join("")},set:function(e,t){if(typeof t=="undefined")return;if(typeof e=="undefined"||e==="")e="Y-m-d";var n=e.split(""),r=new Array(n.length),i="\\",s,o={year:undefined,month:undefined,day:undefined,dayY:undefined,dayW:undefined,week:undefined,hour:undefined,hourD:undefined,min:undefined,sec:undefined,msec:undefined,ampm:undefined,diffM:undefined,diffH:undefined,date:undefined},u=0;for(var a=0;a<n.length;a++)switch(n[a]){case i:r[a]=n[a+1],a++;break;case"d":r[a]="(\\d{2})",o.day={original:a,match:u++};break;case"j":r[a]="(\\d{1,2})",o.day={original:a,match:u++};break;case"D":r[a]="([\\w\u00e1]{3})",o.dayW={original:a,match:u++};break;case"l":r[a]="([\\w\u00e1]{5,7})",o.dayW={original:a,match:u++};break;case"N":r[a]="(\\d)",o.dayW={original:a,match:u++};break;case"w":r[a]="(\\d)",o.dayW={original:a,match:u++};break;case"S":r[a]="\\w{2}";break;case"z":r[a]="(\\d{1,3})",o.dayY={original:a,match:u++};break;case"W":r[a]="(\\d{1,2})",o.week={original:a,match:u++};break;case"F":r[a]="([\\w\u00e7]{4,9})",o.month={original:a,match:u++};break;case"M":r[a]="(\\w{3})",o.month={original:a,match:u++};break;case"m":r[a]="(\\d{2})",o.month={original:a,match:u++};break;case"n":r[a]="(\\d{1,2})",o.month={original:a,match:u++};break;case"t":r[a]="\\d{2}";break;case"L":r[a]="\\w{4,5}";break;case"o":throw'"o" not implemented!';case"Y":r[a]="(\\d{4})",o.year={original:a,match:u++};break;case"y":r[a]="(\\d{2})";if(typeof o.year=="undefined"||n[o.year.original]!=="Y")o.year={original:a,match:u++};break;case"a":r[a]="(am|pm)",o.ampm={original:a,match:u++};break;case"A":r[a]="(AM|PM)",o.ampm={original:a,match:u++};break;case"B":throw'"B" not implemented!';case"g":r[a]="(\\d{1,2})",o.hourD={original:a,match:u++};break;case"G":r[a]="(\\d{1,2})",o.hour={original:a,match:u++};break;case"h":r[a]="(\\d{2})",o.hourD={original:a,match:u++};break;case"H":r[a]="(\\d{2})",o.hour={original:a,match:u++};break;case"i":r[a]="(\\d{2})",o.min={original:a,match:u++};break;case"s":r[a]="(\\d{2})",o.sec={original:a,match:u++};break;case"u":throw'"u" not implemented!';case"e":throw'"e" not implemented!';case"I":r[a]="\\d";break;case"O":r[a]="([-+]\\d{4})",o.diffH={original:a,match:u++};break;case"P":throw'"P" not implemented!';case"T":throw'"T" not implemented!';case"Z":r[a]="(\\-?\\d{1,5})",o.diffM={original:a,match:u++};break;case"c":throw'"c" not implemented!';case"r":r[a]="([\\w\u00e1]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})",o.date={original:a,match:u++};break;case"U":r[a]="(\\d{1,13})",o.date={original:a,match:u++};break;default:r[a]=n[a]}var f=new RegExp(r.join(""));try{s=t.match(f);if(!s)return}catch(l){return}var c=typeof o.date!="undefined",h=typeof o.year!="undefined",p=typeof o.dayY!="undefined",d=typeof o.day!="undefined",v=typeof o.month!="undefined",m=v&&d,g=!v&&d,y=typeof o.dayW!="undefined",b=typeof o.week!="undefined",w=b&&y,E=!b&&y,S=p||m||!h&&g||w||!h&&E,x=!h&&!p&&!d&&!v&&!y&&!b,T=typeof o.hourD!="undefined"&&typeof o.ampm!="undefined",N=typeof o.hour!="undefined",C=T||N,k=typeof o.min!="undefined",L=typeof o.sec!="undefined",A=typeof o.msec!="undefined",O=!x||C,M=O||k,_=typeof o.diffM!="undefined",D=typeof o.diffH!="undefined",P,H;if(c){if(n[o.date.original]==="U")return new Date(+s[o.date.match+1]*1e3);var B=s[o.date.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return P=+B[4]+ +B[7].slice(0,3),H=+B[5]+(B[7].slice(0,1)+B[7].slice(3))/100*60,new Date(B[3],this._iMonth(B[2]),B[1],P,H,B[6])}var j=new Date,F,I,q,R,U,z,W;if(!S&&!x)return;if(S){if(h){var X=j.getFullYear()-50+"";F=s[o.year.match+1],n[o.year.original]==="y"&&(F=+X.slice(0,2)+(F>=X.slice(2)?0:1)+F)}else F=j.getFullYear();if(p)I=0,q=s[o.dayY.match+1];else if(d)v?I=this._iMonth(s[o.month.match+1]):I=j.getMonth(),q=s[o.day.match+1];else{I=0;var V;b?V=s[o.week.match+1]:V=this.get("W",j),q=(V-2)*7+(8-((new Date(F,0,1)).getDay()||7))+this._iWeek(s[o.week.match+1])}if(I===0&&q>31){var $=new Date(F,I,q);I=$.getMonth(),q=$.getDate()}}else F=j.getFullYear(),I=j.getMonth(),q=j.getDate();return R=F+"-"+(I+1)+"-"+q+" ",T?P=+s[o.hourD.match+1]+(s[o.ampm.match+1]==="pm"?12:0):N?P=s[o.hour.match+1]:x?P=j.getHours():P="00",k?H=s[o.min.match+1]:O?H="00":H=j.getMinutes(),L?U=s[o.sec.match+1]:M?U="00":U=j.getSeconds(),A?z=s[o.msec.match+1]:z="000",D?W=s[o.diffH.match+1]:_?W=String(-1*s[o.diffM.match+1]/60*100).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):W="+0000",new Date(R+P+":"+H+":"+U+"."+z+W)}};return e}),Ink.createModule("Ink.Util.Cookie","1",[],function(){"use strict";var e={get:function(e){var t=document.cookie||!1,n={};if(t){t=t.replace(new RegExp("; ","g"),";");var r=t.split(";"),i=[];if(r.length>0)for(var s=0;s<r.length;s++)i=r[s].split("="),i.length===2&&(n[i[0]]=decodeURIComponent(i[1])),i=[]}return e?typeof n[e]!="undefined"?n[e]:null:n},set:function(e,t,n,r,i,s){var o;if(!e||t===!1||typeof e=="undefined"||typeof t=="undefined")return!1;o=e+"="+encodeURIComponent(t);var u=!1,a=!1,f=!1,l=!1;if(n&&typeof n!="undefined"&&!isNaN(n)){var c=new Date,h=parseInt(Number(c.valueOf()),10)+Number(parseInt(n,10))*1e3,p=new Date(h),d=p.toGMTString(),v=new RegExp("([^\\s]+)(\\s\\d\\d)\\s(\\w\\w\\w)\\s(.*)");d=d.replace(v,"$1$2-$3-$4"),u="expires="+d}else typeof n!="undefined"&&!isNaN(n)&&Number(parseInt(n,10))===0?u="":u="expires=Thu, 01-Jan-2037 00:00:01 GMT";r&&typeof r!="undefined"?a="path="+r:a="path=/";if(i&&typeof i!="undefined")f="domain="+i;else{var m=new RegExp(":(.*)");f="domain="+window.location.host,f=f.replace(m,"")}s&&typeof s!="undefined"?l=s:l=!1,document.cookie=o+"; "+u+"; "+a+"; "+f+"; "+l},remove:function(e,t,n){var r=!1,i=!1,s=-999999999;t&&typeof t!="undefined"?r=t:r="/",n&&typeof n!="undefined"?i=n:i=window.location.host,this.set(e,"deleted",s,r,i)}};return e}),Ink.createModule("Ink.Util.BinPack","1",[],function(){"use strict";var e=function(e,t){this.init(e,t)};e.prototype={init:function(e,t){this.root={x:0,y:0,w:e,h:t}},fit:function(e){var t,n,r;for(t=0;t<e.length;++t){r=e[t];if(n=this.findNode(this.root,r.w,r.h))r.fit=this.splitNode(n,r.w,r.h)}},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e}};var t=function(){};t.prototype={fit:function(e){var t,n,r,i=e.length,s=i>0?e[0].w:0,o=i>0?e[0].h:0;this.root={x:0,y:0,w:s,h:o};for(t=0;t<i;t++)r=e[t],(n=this.findNode(this.root,r.w,r.h))?r.fit=this.splitNode(n,r.w,r.h):r.fit=this.growNode(r.w,r.h)},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e},growNode:function(e,t){var n=e<=this.root.w,r=t<=this.root.h,i=r&&this.root.h>=this.root.w+e,s=n&&this.root.w>=this.root.h+t;return i?this.growRight(e,t):s?this.growDown(e,t):r?this.growRight(e,t):n?this.growDown(e,t):null},growRight:function(e,t){this.root={used:!0,x:0,y:0,w:this.root.w+e,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:e,h:this.root.h}};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null},growDown:function(e,t){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+t,down:{x:0,y:this.root.h,w:this.root.w,h:t},right:this.root};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null}};var n={random:function(){return Math.random()-.5},w:function(e,t){return t.w-e.w},h:function(e,t){return t.h-e.h},a:function(e,t){return t.area-e.area},max:function(e,t){return Math.max(t.w,t.h)-Math.max(e.w,e.h)},min:function(e,t){return Math.min(t.w,t.h)-Math.min(e.w,e.h)},height:function(e,t){return n.msort(e,t,["h","w"])},width:function(e,t){return n.msort(e,t,["w","h"])},area:function(e,t){return n.msort(e,t,["a","h","w"])},maxside:function(e,t){return n.msort(e,t,["max","min","h","w"])},msort:function(e,t,r){var i,s;for(s=0;s<r.length;++s){i=n[r[s]](e,t);if(i!==0)return i}return 0}},r=function(){return[this.w," x ",this.h].join("")},i={binPack:function(i){var s,o,u;for(s=0,o=i.blocks.length;s<o;++s)u=i.blocks[s],"area"in u||(u.area=u.w*u.h);var a=i.dimensions?new e(i.dimensions[0],i.dimensions[1]):new t;i.sorter||(i.sorter="maxside"),i.blocks.sort(n[i.sorter]),a.fit(i.blocks);var f=[a.root.w,a.root.h],l=[],c=[];for(s=0,o=i.blocks.length;s<o;++s)u=i.blocks[s],u.fit?l.push(u):(u.toString=r,c.push(u));var h=f[0]*f[1],p=0;for(s=0,o=l.length;s<o;++s)u=l[s],p+=u.area;return{dimensions:f,filled:p/h,blocks:i.blocks,fitted:l,unfitted:c}}};return i}),Ink.createModule("Ink.Util.Array","1",[],function(){"use strict";var e=Array.prototype,t={inArray:function(e,t){if(typeof t=="object")for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1},sortMulti:function(e,t){if(typeof e=="undefined"||e.constructor!==Array)return!1;if(typeof t!="string")return e.sort();if(e.length>0){if(typeof e[0][t]=="undefined")return!1;e.sort(function(e,n){var r=e[t],i=n[t];return r<i?-1:r>i?1:0})}return e},keyValue:function(e,t,n){if(typeof e!="undefined"&&typeof t=="object"&&this.inArray(e,t)){var r=[];for(var i=0,s=t.length;i<s;++i)if(t[i]===e){if(typeof n!="undefined"&&n===!0)return i;r.push(i)}return r}return!1},shuffle:function(e){if(typeof e!="undefined"&&e.constructor!==Array)return!1;var t=e.length,n=!1,r=!1;while(t--)r=Math.floor(Math.random()*(t+1)),n=e[t],e[t]=e[r],e[r]=n;return e},forEach:function(t,n,r){if(e.forEach)return e.forEach.call(t,n,r);for(var i=0,s=t.length>>>0;i<s;i++)n.call(r,t[i],i,t)},each:function(){t.forEach.apply(t,[].slice.call(arguments))},map:function(t,n,r){if(e.map)return e.map.call(t,n,r);var i=new Array(o);for(var s=0,o=t.length>>>0;s<o;s++)i[s]=n.call(r,t[s],s,t);return i},filter:function(t,n,r){if(e.filter)return e.filter.call(t,n,r);var i=[],s=null;for(var o=0,u=t.length;o<u;o++)s=t[o],n.call(r,s,o,t)&&i.push(s);return i},some:function(e,t,n){if(e===null)throw new TypeError("First argument is invalid.");var r=Object(e),i=r.length>>>0;if(typeof t!="function")throw new TypeError("Second argument must be a function.");for(var s=0;s<i;s++)if(s in r&&t.call(n,r[s],s,r))return!0;return!1},intersect:function(e,t){if(!e||!t||e instanceof Array==0||t instanceof Array==0)return[];var n=[];for(var r=0,i=e.length;r<i;++r)for(var s=0,o=t.length;s<o;++s)e[r]===t[s]&&n.push(e[r]);return n},convert:function(t){return e.slice.call(t||[],0)},insert:function(e,t,n){e.splice(t,0,n)},remove:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){if(i>=t&&i<t+n)continue;r.push(e[i])}return r}};return t}),Ink.createModule("Ink.Util.Validator","1",[],function(){"use strict";var e={_countryCodes:["AO","CV","MZ","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de s\u00f4r",243:"santar\u00e9m",244:"leiria",245:"portalegre",249:"torres novas",251:"valen\u00e7a",252:"vila nova de famalic\u00e3o",253:"braga",254:"peso da r\u00e9gua",255:"penafiel",256:"s\u00e3o jo\u00e3o da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ra\u00ednha",263:"vila franca de xira",265:"set\u00fabal",266:"\u00e9vora",268:"estremoz",269:"santiago do cac\u00e9m",271:"guarda",272:"castelo branco",273:"bragan\u00e7a",274:"proen\u00e7a-a-nova",275:"covilh\u00e3",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portim\u00e3o",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do hero\u00edsmo, graciosa, s\u00e3o jorge, terceira",296:"ponta delgada, s\u00e3o miguel, santa maria",91:"rede m\u00f3vel 91 (Vodafone / Yorn)",93:"rede m\u00f3vel 93 (Optimus)",96:"rede m\u00f3vel 96 (TMN)",92:"rede m\u00f3vel 92 (TODOS)",707:"n\u00famero \u00fanico",760:"n\u00famero \u00fanico",800:"n\u00famero gr\u00e1tis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"m\u00f3vel 91",95:"m\u00f3vel 95",97:"m\u00f3vel 97",98:"m\u00f3vel 98",99:"m\u00f3vel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"m\u00f3vel 91",92:"m\u00f3vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"m\u00f3vel 82",84:"m\u00f3vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"m\u00f3vel 7"},_characterGroups:{numbers:["0-9"],asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","\u00c0-\u00ff"],unicodeAlpha:["a-zA-Z","\u00c0-\u00ff","\u0100-\u1fff","\u2c00-\ud7ff"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["	 "],newline:["\n"],whitespace:["	\n\f\r\u00a0 "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:["!-/",":-@","[-`","{-~","\u00a1-\u00bf","\u00d7","\u00f7"],unicodePunctuation:["!-/",":-@","[-`","{-~","\u00a1-\u00bf","\u00d7","\u00f7","\u2000-\u206f","\u2e00-\u2e7f","\u3000-\u303f"]},createRegExp:function(t){var n="^[";for(var r in t)if(t.hasOwnProperty(r)){if(!(r in e._characterGroups))throw new Error("group "+r+" is not a valid character group");t[r]&&(n+=e._characterGroups[r].join(""))}return new RegExp(n+"]*?$")},checkCharacterGroups:function(t,n){return e.createRegExp(n).test(t)},unicode:function(t,n){return e.checkCharacterGroups(t,Ink.extendObj({unicodeAlpha:!0},n))},latin1:function(t,n){return e.checkCharacterGroups(t,Ink.extendObj({latin1Alpha:!0},n))},ascii:function(t,n){return e.checkCharacterGroups(t,Ink.extendObj({asciiAlpha:!0},n))},number:function(t,n){t+="";var r=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},n||{});if(r.thousandSep)return t=t.replace(new RegExp("\\"+r.thousandSep,"g"),""),r.thousandSep="",e.number(t,r);if(r.negative===!1)return r.min=0,r.negative=!0,e.number(t,r);r.decimalSep!=="."&&(t=t.replace(new RegExp("\\"+r.decimalSep,"g"),"."));if(!/^(-)?(\d+)?(\.\d+)?$/.test(t)||t==="")return!1;var i;if(r.decimalSep&&t.indexOf(r.decimalSep)!==-1){i=t.split(r.decimalSep);if(r.decimalPlaces!==null&&i[1].length>r.decimalPlaces)return!1}else i=[""+t,""];if(r.maxDigits!==null&&i[0].replace(/-/g,"").length>r.maxDigits)return i;var s=parseFloat(t);return r.maxExcl!==null&&s>=r.maxExcl||r.minExcl!==null&&s<=r.minExcl?!1:r.max!==null&&s>r.max||r.min!==null&&s<r.min?!1:r.returnNumber?s:!0},_isLeapYear:function(e){var t=/^\d{4}$/;return t.test(e)?e%4?!1:e%100?!0:e%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(e,t){var n=0;return e===1||e===3||e===5||e===7||e===8||e===10||e===12?n=31:e===4||e===6||e===9||e===11?n=30:t%400===0||t%4===0&&t%100!==0?n=29:n=28,n},_isValidDate:function(e,t,n){var r=/^\d{4}$/,i=/^\d{1,2}$/;return r.test(e)&&i.test(t)&&i.test(n)&&t>=1&&t<=12&&n>=1&&this._daysInMonth(t,e)>=n?!0:!1},email:function(e){var t=new RegExp("^[_a-z0-9-]+((\\.|\\+)[_a-z0-9-]+)*@([\\w]*-?[\\w]*\\.)+[a-z]{2,4}$","i");return t.test(e)?!0:!1},mail:function(t){return e.email(t)},url:function(e,t){if(typeof t=="undefined"||t===!1){var n=new RegExp("(^(http\\:\\/\\/|https\\:\\/\\/)(.+))","i");n.test(e)===!1&&(e="http://"+e)}var r=new RegExp("^(http:\\/\\/|https:\\/\\/)([\\w]*(-?[\\w]*)*\\.)+[a-z]{2,4}","i");return r.test(e)===!1?!1:!0},isPTPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosPT)typeof this._indicativosPT[n]=="string"&&t.push(n);var r=t.join("|"),i=/^(00351|\+351)/;i.test(e)&&(e=e.replace(i,""));var s=/(\s|\-|\.)+/g;e=e.replace(s,"");var o=/[\d]{9}/i;if(e.length===9&&o.test(e)){var u=new RegExp("^("+r+")");if(u.test(e))return!0}return!1},isPortuguesePhone:function(e){return this.isPTPhone(e)},isCVPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosCV)typeof this._indicativosCV[n]=="string"&&t.push(n);var r=t.join("|"),i=/^(00238|\+238)/;i.test(e)&&(e=e.replace(i,""));var s=/(\s|\-|\.)+/g;e=e.replace(s,"");var o=/[\d]{7}/i;if(e.length===7&&o.test(e)){var u=new RegExp("^("+r+")");if(u.test(e))return!0}return!1},isAOPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosAO)typeof this._indicativosAO[n]=="string"&&t.push(n);var r=t.join("|"),i=/^(00244|\+244)/;i.test(e)&&(e=e.replace(i,""));var s=/(\s|\-|\.)+/g;e=e.replace(s,"");var o=/[\d]{9}/i;if(e.length===9&&o.test(e)){var u=new RegExp("^("+r+")");if(u.test(e))return!0}return!1},isMZPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosMZ)typeof this._indicativosMZ[n]=="string"&&t.push(n);var r=t.join("|"),i=/^(00258|\+258)/;i.test(e)&&(e=e.replace(i,""));var s=/(\s|\-|\.)+/g;e=e.replace(s,"");var o=/[\d]{8,9}/i;if((e.length===9||e.length===8)&&o.test(e)){var u=new RegExp("^("+r+")");if(u.test(e)){if(e.indexOf("2")===0&&e.length===8)return!0;if(e.indexOf("8")===0&&e.length===9)return!0}}return!1},isTLPhone:function(e){e=e.toString();var t=[];for(var n in this._indicativosTL)typeof this._indicativosTL[n]=="string"&&t.push(n);var r=t.join("|"),i=/^(00670|\+670)/;i.test(e)&&(e=e.replace(i,""));var s=/(\s|\-|\.)+/g;e=e.replace(s,"");var o=/[\d]{7}/i;if(e.length===7&&o.test(e)){var u=new RegExp("^("+r+")");if(u.test(e))return!0}return!1},isPhone:function(){var e;if(arguments.length===0)return!1;var t=arguments[0];if(arguments.length>1){if(arguments[1].constructor!==Array){if(typeof this["is"+arguments[1].toUpperCase()+"Phone"]=="function")return this["is"+arguments[1].toUpperCase()+"Phone"](t);throw"Invalid Country Code!"}var n;for(e=0;e<arguments[1].length;e++){if(typeof (n=this["is"+arguments[1][e].toUpperCase()+"Phone"])!="function")throw"Invalid Country Code!";if(n(t))return!0}}else for(e=0;e<this._countryCodes.length;e++)if(this["is"+this._countryCodes[e]+"Phone"](t))return!0;return!1},codPostal:function(e,t,n){var r=/^(\s*\-\s*|\s+)$/,i=/^\s+|\s+$/g,s=/^[1-9]\d{3}$/,o=/^\d{3}$/,u=/^(.{4})(.*)(.{3})$/;n=!!n,e=e.replace(i,"");if(typeof t!="undefined"){t=t.replace(i,"");if(s.test(e)&&o.test(t))return n===!0?[!0,!0]:!0}else{if(s.test(e))return n===!0?[!0,!1]:!0;var a=e.match(u);if(a!==null&&s.test(a[1])&&r.test(a[2])&&o.test(a[3]))return n===!0?[!0,!1]:!0}return n===!0?[!1,!1]:!1},isDate:function(e,t){if(typeof this._dateParsers[e]=="undefined")return!1;var n=this._dateParsers[e].year,r=this._dateParsers[e].month,i=this._dateParsers[e].day,s=this._dateParsers[e].parser,o=this._dateParsers[e].sep,u=t.match(s);if(u!==null&&u[2]===u[4]&&u[2]===o){var a=u[n].length===2?"20"+u[n].toString():u[n];if(this._isValidDate(a,u[r].toString(),u[i].toString()))return!0}return!1},isColor:function(e){var t,n=!1,r=/^[a-zA-Z]+$/,i=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,s=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,o=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,u=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/,a=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(r.test(e)||i.test(e))return!0;var f;if((t=s.exec(e))!==null||(t=o.exec(e))!==null){f=t.length;while(f--){if((f===2||f===4||f===6)&&typeof t[f]!="undefined"&&t[f]!==""){if(!(typeof t[f-1]!="undefined"&&t[f-1]>=0&&t[f-1]<=100))return!1;n=!0}if(f===1||f===3||f===5&&(typeof t[f+1]=="undefined"||t[f+1]==="")){if(!(typeof t[f]!="undefined"&&t[f]>=0&&t[f]<=255))return!1;n=!0}}}if((t=u.exec(e))!==null||(t=a.exec(e))!==null){f=t.length;while(f--){if(f===3||f===5){if(!(typeof t[f-1]!="undefined"&&typeof t[f]!="undefined"&&t[f]!==""&&t[f-1]>=0&&t[f-1]<=100))return!1;n=!0}if(f===1){if(!(typeof t[f]!="undefined"&&t[f]>=0&&t[f]<=360))return!1;n=!0}}}return n},isIP:function(e,t){if(typeof e!="string")return!1;t=(t||"ipv4").toLowerCase();switch(t){case"ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e);case"ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e);default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(e){e=parseInt(e,10);if(typeof e!="number"&&e%1!==0)return!1;e+="";var t=e.length,n,r=0;for(n=t-1;n>=0;n-=2)r+=parseInt(e.substr(n,1),10);for(n=t-2;n>=0;n-=2){var i=parseInt(e.substr(n,1)*2,10);r+=i>=10?i-9:i}return r%10===0},isCreditCard:function(e,t){if(/\d+/.test(e)===!1)return!1;if(typeof t=="undefined")t="default";else if(typeof t=="array"){var n,r=t.length;for(n=0;n<r;n++)if(this.isCreditCard(e,t[n]))return!0;return!1}t=t.toLowerCase();if(typeof this._creditCardSpecs[t]=="undefined")return!1;var i=e.length+"";return this._creditCardSpecs[t].length.split(",").indexOf(i)===-1?!1:this._creditCardSpecs[t].prefix.test(e)?this._creditCardSpecs[t].luhn===!1?!0:this._luhn(e):!1}};return e}),Ink.createModule("Ink.UI.Aux","1",["Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(e,t,n,r){"use strict";var i={},s=0,o={Layouts:{SMALL:"small",MEDIUM:"medium",LARGE:"large"},isDOMElement:function(e){return typeof e=="object"&&"nodeType"in e&&e.nodeType===1},isInteger:function(e){return typeof e=="number"&&e%1===0},elOrSelector:function(e,t){if(!this.isDOMElement(e)){var r=n.select(e);if(r.length===0)throw new TypeError(t+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself.");return r[0]}return e},clone:function(e){try{if(typeof e!="object")throw new Error("Given argument is not an object!");return JSON.parse(JSON.stringify(e))}catch(t){throw new Error("Given object cannot have loops!")}},childIndex:function(e){if(o.isDOMElement(e)){var t=n.select("> *",e.parentNode);for(var r=0,i=t.length;r<i;++r)if(t[r]===e)return r}throw"not found!"},ajaxJSON:function(t,n,r){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(e){try{e=e.responseJSON;if(e.status!=="ok")throw"server error: "+e.message;r(null,e)}catch(t){r(t)}},onFailure:function(){r("communication failure")}})},currentLayout:function(){var e,r,i,s,o,u=n.select("#ink-layout-detector")[0];if(!u){u=document.createElement("div"),u.id="ink-layout-detector";for(i in this.Layouts)this.Layouts.hasOwnProperty(i)&&(s=this.Layouts[i],o=document.createElement("div"),o.className="show-"+s+" hide-all",o.setAttribute("data-ink-layout",s),u.appendChild(o));document.body.appendChild(u)}for(e=0,r=u.childNodes.length;e<r;++e){o=u.childNodes[e];if(t.getStyle(o,"visibility")!=="hidden")return o.getAttribute("data-ink-layout")}},hashSet:function(e){if(typeof e!="object")throw new TypeError("o should be an object!");var t=r.getAnchorString();t=Ink.extendObj(t,e),window.location.hash=r.genQueryString("",t).substring(1)},cleanChildren:function(e){if(!o.isDOMElement(e))throw"Please provide a valid DOMElement";var t,n=e.lastChild;while(n)t=n.previousSibling,e.removeChild(n),n=t},storeIdAndClasses:function(e,t){if(!o.isDOMElement(e))throw"Please provide a valid DOMElement as first parameter";var n=e.id;n&&(t._id=n);var r=e.className;r&&(t._classes=r)},restoreIdAndClasses:function(e,t){if(!o.isDOMElement(e))throw"Please provide a valid DOMElement as first parameter";t._id&&e.id!==t._id&&(e.id=t._id),t._classes&&e.className.indexOf(t._classes)===-1&&(e.className?e.className+=" "+t._classes:e.className=t._classes),t._instanceId&&!e.getAttribute("data-instance")&&e.setAttribute("data-instance",t._instanceId)},registerInstance:function(e,t,n){if(e._instanceId)return;if(typeof e!="object")throw new TypeError("1st argument must be a JavaScript object!");if(e._options&&e._options.skipRegister)return;if(!this.isDOMElement(t))throw new TypeError("2nd argument must be a DOM element!");if(n!==undefined&&typeof n!="string")throw new TypeError("3rd argument must be a string!");var r=(n||"instance")+ ++s;i[r]=e,e._instanceId=r;var o=t.getAttribute("data-instance");o=o!==null?[o,r].join(" "):r,t.setAttribute("data-instance",o)},unregisterInstance:function(e){delete i[e]},getInstance:function(e){var t;if(this.isDOMElement(e)){t=e.getAttribute("data-instance");if(t===null)throw new Error("argument is not a DOM instance element!")}else t=e;t=t.split(" ");var n,r,s,o=t.length,u=[];for(s=0;s<o;++s){r=t[s];if(!r)throw new Error("Element is not a JS instance!");n=i[r];if(!n)throw new Error('Instance "'+r+'" not found!');u.push(n)}return o===1?u[0]:u},getInstanceFromSelector:function(e){var t=n.select(e)[0];if(!t)throw new Error("Element not found!");return this.getInstance(t)},getInstanceIds:function(){var e=[];for(var t in i)i.hasOwnProperty(t)&&e.push(t);return e},getInstances:function(){var e=[];for(var t in i)i.hasOwnProperty(t)&&e.push(i[t]);return e},destroyComponent:function(){Ink.Util.Aux.unregisterInstance(this._instanceId),this._element.parentNode.removeChild(this._element)}};return o}),Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(e,t,n,r,i){"use strict";var s=function(e,t){var n=document.createElement("a");return n.setAttribute("href","#"),t!==undefined&&n.setAttribute("data-index",t),n.innerHTML=e,n},o=function(t,i){this._element=e.elOrSelector(t,"1st argument"),this._options=Ink.extendObj({size:undefined,start:1,firstLabel:"First",lastLabel:"Last",previousLabel:"Previous",nextLabel:"Next",onChange:undefined,setHash:!1,hashParameter:"page",numberFormatter:function(e){return e+1}},i||{},r.data(this._element)),this._options.previousPageLabel||(this._options.previousPageLabel="Previous "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel="Next "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)};if(!e.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(!e.isInteger(this._options.start)&&this._options.start>0&&this._options.start<=this._options.size)throw new TypeError("start option is a required integer between 1 and size!");if(this._options.maxSize&&!e.isInteger(this._options.maxSize)&&this._options.maxSize>0)throw new TypeError("maxSize option is a positive integer!");if(this._options.size<0)throw new RangeError("size option must be equal or more than 0!");if(this._options.onChange!==undefined&&typeof this._options.onChange!="function")throw new TypeError("onChange option must be a function!");n.hasClassName(Ink.s("ul",this._element),"dotted")&&(this._options.numberFormatter=function(){return'<i class="icon-circle"></i>'}),this._current=this._options.start-1,this._itemLiEls=[],this._init()};return o.prototype={_init:function(){this._generateMarkup(this._element),this._updateItems(),this._observe(),e.registerInstance(this,this._element,"pagination")},_observe:function(){t.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var e=this._itemLiEls,t=this._options.size===e.length,r,i,o;if(t)for(r=0,i=this._options.size;r<i;++r)n.setClassName(e[r],"active",r===this._current);else{for(r=e.length-1;r>=0;--r)this._ulEl.removeChild(e[r]);e=[];for(r=0,i=this._options.size;r<i;++r)o=document.createElement("li"),o.appendChild(s(this._options.numberFormatter(r),r)),n.setClassName(o,"active",r===this._current),this._ulEl.insertBefore(o,this._nextEl),e.push(o);this._itemLiEls=e}if(this._options.maxSize){var u=Math.floor(this._current/this._options.maxSize),a=this._options.maxSize*u,f=a+this._options.maxSize-1;for(r=0,i=this._options.size;r<i;++r)o=e[r],n.setClassName(o,"hide-all",r<a||r>f);this._pageStart=a,this._pageEnd=f,this._page=u,n.setClassName(this._prevPageEl,"disabled",!this.hasPreviousPage()),n.setClassName(this._nextPageEl,"disabled",!this.hasNextPage()),n.setClassName(this._firstEl,"disabled",this.isFirst()),n.setClassName(this._lastEl,"disabled",this.isLast())}n.setClassName(this._prevEl,"disabled",!this.hasPrevious()),n.setClassName(this._nextEl,"disabled",!this.hasNext())},_generateMarkup:function(e){n.addClassName(e,"ink-navigation");var t,r,o=!1;(t=i.select("ul.pagination",e)).length<1?(t=document.createElement("ul"),n.addClassName(t,"pagination")):(o=!0,t=t[0]),this._options.maxSize&&(r=document.createElement("li"),r.appendChild(s(this._options.firstLabel)),this._firstEl=r,n.addClassName(r,"first"),t.appendChild(r),r=document.createElement("li"),r.appendChild(s(this._options.previousPageLabel)),this._prevPageEl=r,n.addClassName(r,"previousPage"),t.appendChild(r)),r=document.createElement("li"),r.appendChild(s(this._options.previousLabel)),this._prevEl=r,n.addClassName(r,"previous"),t.appendChild(r),r=document.createElement("li"),r.appendChild(s(this._options.nextLabel)),this._nextEl=r,n.addClassName(r,"next"),t.appendChild(r),this._options.maxSize&&(r=document.createElement("li"),r.appendChild(s(this._options.nextPageLabel)),this._nextPageEl=r,n.addClassName(r,"nextPage"),t.appendChild(r),r=document.createElement("li"),r.appendChild(s(this._options.lastLabel)),this._lastEl=r,n.addClassName(r,"last"),t.appendChild(r)),o||e.appendChild(t),this._ulEl=t},_onClick:function(e){t.stop(e);var r=t.element(e);if(r.nodeName.toLowerCase()!=="a"){do r=r.parentNode;while(r.nodeName.toLowerCase()!=="a"&&r!==this._element);if(r===this._element)return}var i=r.parentNode;if(i.nodeName.toLowerCase()!=="li")return;if(n.hasClassName(i,"active")||n.hasClassName(i,"disabled"))return;var s=n.hasClassName(i,"previous"),o=n.hasClassName(i,"next"),u=n.hasClassName(i,"previousPage"),a=n.hasClassName(i,"nextPage"),f=n.hasClassName(i,"first"),l=n.hasClassName(i,"last");if(f)this.setCurrent(0);else if(l)this.setCurrent(this._options.size-1);else if(u||a)this.setCurrent((u?-1:1)*this._options.maxSize,!0);else if(s||o)this.setCurrent(s?-1:1,!0);else{var c=parseInt(r.getAttribute("data-index"),10);this.setCurrent(c)}},setSize:function(t){if(!e.isInteger(t))throw new TypeError("1st argument must be an integer number!");this._options.size=t,this._updateItems(),this._current=0},setCurrent:function(t,n){if(!e.isInteger(t))throw new TypeError("1st argument must be an integer number!");n&&(t+=this._current),t<0?t=0:t>this._options.size-1&&(t=this._options.size-1),this._current=t,this._updateItems(),this._options.onChange&&this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return this._current===0},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._options.size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._options.size-this._current>=this._options.maxSize+1},destroy:e.destroyComponent},o}),Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,s){"use strict";var o=function(t,n){this._element=e.elOrSelector(t,"1st argument");if(!e.isDOMElement(t)&&typeof t!="string")throw"[Ink.UI.SortableList] :: Invalid selector";if(typeof t=="string"){this._element=Ink.Dom.Selector.select(t);if(this._element.length<1)throw"[Ink.UI.SortableList] :: Selector has returned no elements";this._element=this._element[0]}else this._element=t;this._options=Ink.extendObj({dragObject:"li"},Ink.Dom.Element.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._model=[],this._index=undefined,this._isMoving=!1;if(this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if(this._element.nodeName.toLowerCase()!=="ul")throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}this._dragTriggers=i.select(this._options.dragObject,this._element);if(!this._dragTriggers)throw"[Ink.UI.SortableList] :: Drag object not found";this._init()};return o.prototype={_init:function(){this._createdFrom==="DOM"&&(this._extractModelFromDOM(),this._createdFrom="JSON");var n="ontouchstart"in document.documentElement;this._down=n?"touchstart":"mousedown",this._move=n?"touchmove":"mousemove",this._up=n?"touchend":"mouseup";var r=document.body;t.observe(r,this._move,this._handlers.move),t.observe(r,this._up,this._handlers.up),this._observe(),e.registerInstance(this,this._element,"sortableList")},_observe:function(){t.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var e=this,t=i.select("> li",this._element);s.each(t,function(t){var n=t.innerHTML;e._model.push(n)})},_generateMarkup:function(){var e=document.createElement("ul");e.className="unstyled ink-sortable-list";var t=this;return s.each(this._model,function(n,r){var i=document.createElement("li");r===t._index&&(i.className="drag"),i.innerHTML=[n].join(""),e.appendChild(i)}),e},_getY:function(e){return e.type.indexOf("touch")===0?e.changedTouches[0].pageY:typeof e.pageY=="number"?e.pageY:e.clientY},_refresh:function(t){var n=this._generateMarkup();this._element.parentNode.replaceChild(n,this._element),this._element=n,e.restoreIdAndClasses(this._element,this),this._dragTriggers=i.select(this._options.dragObject,this._element),t||this._observe()},_onDown:function(n){if(this._isMoving)return;var r=t.element(n);if(!s.inArray(r,this._dragTriggers)){while(!s.inArray(r,this._dragTriggers)&&r.nodeName.toLowerCase()!=="body")r=r.parentNode;if(r.nodeName.toLowerCase()==="body")return}t.stop(n);var i;if(r.nodeName.toLowerCase()!=="li")while(r.nodeName.toLowerCase()!=="li"&&r.nodeName.toLowerCase()!=="body")r=r.parentNode;return i=r,this._index=e.childIndex(i),this._height=i.offsetHeight,this._startY=this._getY(n),this._isMoving=!0,document.body.style.cursor="move",this._refresh(!1),!1},_onMove:function(e){if(!this._isMoving)return;t.stop(e);var n=this._getY(e),r=n-this._startY,i=r>0?1:-1,s=i*Math.floor(Math.abs(r)/this._height);if(s===0)return;s/=Math.abs(s);if(s===-1&&this._index===0||s===1&&this._index===this._model.length-1)return;var o=s>0?this._index:this._index+s,u=s<0?this._index:this._index+s;this._model.splice(o,2,this._model[u],this._model[o]),this._index+=s,this._startY=n,this._refresh(!1)},_onUp:function(e){if(!this._isMoving)return;t.stop(e),this._index=undefined,this._isMoving=!1,document.body.style.cursor="",this._refresh()},getModel:function(){return this._model.slice()},destroy:e.destroyComponent},o}),Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,s){"use strict";var o=function(t,n){this._rootElement=e.elOrSelector(t,"1st argument"),this._options=Ink.extendObj({target:undefined},r.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),this._options.target=e.elOrSelector(this._options.target,"Target"),this._scrollTimeout=null,this._init()};return o.prototype={_elements:[],_init:function(){t.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),this._elements.push(this._rootElement)},_onScroll:function(){var e=r.scrollHeight();if(e<this._rootElement.offsetTop)return;for(var t=0,o=this._elements.length;t<o;t++)if(this._elements[t].offsetTop<=e&&this._elements[t]!==this._rootElement&&this._elements[t].offsetTop>this._rootElement.offsetTop)return;s.each(i.select("a",this._options.target),Ink.bind(function(e){var t="name"in this._rootElement&&this._rootElement.name?"#"+this._rootElement.name:"#"+this._rootElement.id;e.href.substr(e.href.indexOf("#"))===t?n.addClassName(r.findUpwardsByTag(e,"li"),"active"):n.removeClassName(r.findUpwardsByTag(e,"li"),"active")},this))}},o}),Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(e,t,n,r,i){"use strict";var s=function(t,n){if(typeof t!="object"&&typeof t!="string")throw"[Sticky] :: Invalid selector defined";if(typeof t=="object")this._rootElement=t;else{this._rootElement=i.select(t);if(this._rootElement.length<=0)throw"[Sticky] :: Can't find any element with the specified selector";this._rootElement=this._rootElement[0]}this._options=Ink.extendObj({offsetBottom:0,offsetTop:0,topElement:undefined,bottomElement:undefined},r.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),typeof this._options.topElement!="undefined"?this._options.topElement=e.elOrSelector(this._options.topElement,"Top Element"):this._options.topElement=e.elOrSelector("body","Top Element"),typeof this._options.bottomElement!="undefined"?this._options.bottomElement=e.elOrSelector(this._options.bottomElement,"Bottom Element"):this._options.bottomElement=e.elOrSelector("body","Top Element"),this._computedStyle=window.getComputedStyle?window.getComputedStyle(this._rootElement,null):this._rootElement.currentStyle,this._dims={height:this._computedStyle.height,width:this._computedStyle.width},this._init()};return s.prototype={_init:function(){t.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),t.observe(window,"resize",Ink.bindEvent(this._onResize,this)),this._calculateOriginalSizes(),this._calculateOffsets()},_onScroll:function(){var e=document.compatMode==="CSS1Compat"?document.documentElement:document.body;if(r.elementWidth(this._rootElement)*100/e.clientWidth>90||e.clientWidth<=649){r.hasAttribute(this._rootElement,"style")&&this._rootElement.removeAttribute("style");return}this._scrollTimeout&&clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(Ink.bind(function(){var e=r.scrollHeight();if(r.hasAttribute(this._rootElement,"style"))e<=this._options.originalTop-this._options.originalOffsetTop?this._rootElement.removeAttribute("style"):document.body.scrollHeight-(e+parseInt(this._dims.height,10))<this._options.offsetBottom?(this._rootElement.style.position="fixed",this._rootElement.style.top="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._options.offsetBottom<parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+e),10)?this._rootElement.style.bottom=this._options.originalOffsetBottom+"px":this._rootElement.style.bottom=this._options.offsetBottom-parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+e),10)+"px",this._rootElement.style.width=this._options.originalWidth+"px"):document.body.scrollHeight-(e+parseInt(this._dims.height,10))>=this._options.offsetBottom&&(this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.position="fixed",this._rootElement.style.bottom="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.top=this._options.originalOffsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px");else{if(e<=this._options.originalTop-this._options.originalOffsetTop)return;this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.position="fixed",this._rootElement.style.bottom="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.top=this._options.originalOffsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px"}this._scrollTimeout=undefined},this),0)},_onResize:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(Ink.bind(function(){this._rootElement.removeAttribute("style"),this._calculateOriginalSizes(),this._calculateOffsets()},this),0)},_calculateOffsets:function(){if(typeof this._options.topElement!="undefined")if(this._options.topElement.nodeName.toLowerCase()!=="body"){var e=r.elementHeight(this._options.topElement),t=r.elementTop(this._options.topElement);this._options.offsetTop=parseInt(e,10)+parseInt(t,10)+parseInt(this._options.originalOffsetTop,10)}else this._options.offsetTop=parseInt(this._options.originalOffsetTop,10);if(typeof this._options.bottomElement!="undefined")if(this._options.bottomElement.nodeName.toLowerCase()!=="body"){var n=r.elementHeight(this._options.bottomElement);this._options.offsetBottom=parseInt(n,10)+parseInt(this._options.originalOffsetBottom,10)}else this._options.offsetBottom=parseInt(this._options.originalOffsetBottom,10);this._onScroll()},_calculateOriginalSizes:function(){typeof this._options.originalOffsetTop=="undefined"&&(this._options.originalOffsetTop=parseInt(this._options.offsetTop,10),this._options.originalOffsetBottom=parseInt(this._options.offsetBottom,10)),this._options.originalTop=parseInt(this._rootElement.offsetTop,10),this._options.originalLeft=parseInt(this._rootElement.offsetLeft,10),isNaN(this._options.originalWidth=parseInt(this._dims.width,10))&&(this._options.originalWidth=0),this._options.originalWidth=parseInt(this._computedStyle.width,10)}},s}),Ink.createModule("Ink.UI.Table","1",["Ink.Net.Ajax_1","Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1"],function(e,t,n,r,i,s,o,u){"use strict";var a=function(e,n){this._rootElement=t.elOrSelector(e,"1st argument");if(this._rootElement.nodeName.toLowerCase()!=="table")throw"[Ink.UI.Table] :: The element is not a table";this._options=Ink.extendObj({pageSize:undefined,endpoint:undefined,loadMode:"full",allowResetSorting:!1,visibleFields:undefined},i.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),this._markupMode=typeof this._options.endpoint=="undefined",!this._options.visibleFields||(this._options.visibleFields=this._options.visibleFields.split(",")),this._handlers={click:Ink.bindEvent(this._onClick,this)},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._headers=[],this._pagination=null,this._totalRows=0,this._init()};return a.prototype={_init:function(){if(!this._markupMode)this._getData(this._options.endpoint,!0);else{this._setHeadersHandlers(),o.each(s.select("tbody tr",this._rootElement),Ink.bind(function(e){this._data.push(e)},this)),this._originalData=this._data.slice(0),this._totalRows=this._data.length;if("pageSize"in this._options&&typeof this._options.pageSize!="undefined"){this._pagination=this._rootElement.nextSibling;while(this._pagination.nodeType!==1)this._pagination=this._pagination.nextSibling;if(this._pagination.nodeName.toLowerCase()!=="nav")throw"[Ink.UI.Table] :: Missing the pagination markup or is mis-positioned";var e=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new e(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(e){this._paginate(e._current+1)},this)}),this._paginate(1)}}},_onClick:function(e){var r=n.element(e),a=i.data(r),f,l,c="pageSize"in this._options&&typeof this._options.pageSize!="undefined";if(!(r.nodeName.toLowerCase()==="th"&&"sortable"in a&&a.sortable.toString()==="true"))return;n.stop(e),f=-1;if(o.inArray(r,this._headers))for(l=0;l<this._headers.length;l++)if(this._headers[l]===r){f=l;break}if(!this._markupMode&&c){for(var h in this._sortableFields)h!=="col_"+f&&(this._sortableFields[h]="none",this._headers[h.replace("col_","")].innerHTML=u.stripTags(this._headers[h.replace("col_","")].innerHTML));this._sortableFields["col_"+f]==="asc"?(this._sortableFields["col_"+f]="desc",this._headers[f].innerHTML=u.stripTags(this._headers[f].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+f]="asc",this._headers[f].innerHTML=u.stripTags(this._headers[f].innerHTML)+'<i class="icon-caret-up"></i>'),this._pagination.setCurrent(this._pagination._current)}else{if(f===-1)return;if(this._sortableFields["col_"+f]==="desc"&&this._options.allowResetSorting&&this._options.allowResetSorting.toString()==="true")this._headers[f].innerHTML=u.stripTags(this._headers[f].innerHTML),this._sortableFields["col_"+f]="none",this._data=this._originalData.slice(0);else{for(var h in this._sortableFields)h!=="col_"+f&&(this._sortableFields[h]="none",this._headers[h.replace("col_","")].innerHTML=u.stripTags(this._headers[h.replace("col_","")].innerHTML));this._sort(f),this._sortableFields["col_"+f]==="asc"?(this._data.reverse(),this._sortableFields["col_"+f]="desc",this._headers[f].innerHTML=u.stripTags(this._headers[f].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+f]="asc",this._headers[f].innerHTML=u.stripTags(this._headers[f].innerHTML)+'<i class="icon-caret-up"></i>')}var p=s.select("tbody",this._rootElement)[0];t.cleanChildren(p),o.each(this._data,function(e){p.appendChild(e)}),this._pagination.setCurrent(0),this._paginate(1)}},_paginate:function(e){o.each(this._data,Ink.bind(function(t,n){n>=(e-1)*parseInt(this._options.pageSize,10)&&n<(e-1)*parseInt(this._options.pageSize,10)+parseInt(this._options.pageSize,10)?r.removeClassName(t,"hide-all"):r.addClassName(t,"hide-all")},this))},_sort:function(e){this._data.sort(Ink.bind(function(t,n){var r=i.textContent(s.select("td",t)[e]),o=i.textContent(s.select("td",n)[e]),u=new RegExp(/\d/g);return!isNaN(r)&&u.test(r)?r=parseInt(r,10):isNaN(r)||(r=parseFloat(r)),!isNaN(o)&&u.test(o)?o=parseInt(o,10):isNaN(o)||(o=parseFloat(o)),r===o?0:r>o?1:-1},this))},_setHeaders:function(e,t){var n,r,o,u,a,f=0;if((o=s.select("thead",this._rootElement)).length===0){o=this._rootElement.createTHead(),u=o.insertRow(0);for(n in e)if(e.hasOwnProperty(n)){if(!!this._options.visibleFields&&this._options.visibleFields.indexOf(n)===-1)continue;a=document.createElement("th"),r=e[n],"sortable"in r&&r.sortable.toString()==="true"&&a.setAttribute("data-sortable","true"),"label"in r&&i.setTextContent(a,r.label),this._originalFields.push(n),u.appendChild(a)}}else{var l=t[0];for(n in l)if(l.hasOwnProperty(n)){if(!!this._options.visibleFields&&this._options.visibleFields.indexOf(n)===-1)continue;this._originalFields.push(n)}}},_setHeadersHandlers:function(){var e=s.select("thead",this._rootElement);if(!e.length)return;n.observe(e[0],"click",this._handlers.click),this._headers=s.select("thead tr th",this._rootElement),o.each(this._headers,Ink.bind(function(e,t){var n=i.data(e);"sortable"in n&&n.sortable.toString()==="true"&&(this._sortableFields["col_"+t]="none")},this))},_setData:function(e){var t,n,r,i,o,u;n=s.select("tbody",this._rootElement),n.length===0?(n=document.createElement("tbody"),this._rootElement.appendChild(n)):(n=n[0],n.innerHTML=""),this._data=[];for(o in e)if(e.hasOwnProperty(o)){r=document.createElement("tr"),n.appendChild(r),u=0;for(t in e[o])if(e[o].hasOwnProperty(t)){if(!!this._options.visibleFields&&this._options.visibleFields.indexOf(t)===-1)continue;i=r.insertCell(u++),i.innerHTML=e[o][t]}this._data.push(r)}this._originalData=this._data.slice(0)},setEndpoint:function(e,t){this._markupMode||(this._options.endpoint=e,this._pagination.setCurrent(t?parseInt(t,10):0))},_setPagination:function(){var e="pageSize"in this._options&&typeof this._options.pageSize!="undefined";if("pageSize"in this._options&&typeof this._options.pageSize!="undefined"&&!this._pagination){this._pagination=document.createElement("nav"),this._pagination.className="ink-navigation",this._rootElement.parentNode.insertBefore(this._pagination,this._rootElement.nextSibling),this._pagination.appendChild(document.createElement("ul")).className="pagination";var t=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new t(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(){this._getData(this._options.endpoint)},this)})}},_getData:function(e){Ink.requireModules(["Ink.Util.Url_1"],Ink.bind(function(t){var n=t.parseUrl(e),r="pageSize"in this._options&&typeof this._options.pageSize!="undefined",i=this._pagination?this._pagination._current+1:1;n.query?n.query=n.query.split("&"):n.query=[];if(!r)this._getDataViaAjax(e);else{n.query.push("rows_per_page="+this._options.pageSize),n.query.push("page="+i);var s="";for(var o in this._sortableFields)if(this._sortableFields[o]!=="none"){n.query.push("sortField="+this._originalFields[parseInt(o.replace("col_",""),10)]),n.query.push("sortOrder="+this._sortableFields[o]);break}this._getDataViaAjax(e+"?"+n.query.join("&"))}},this))},_getDataViaAjax:function(t){var n="pageSize"in this._options&&typeof this._options.pageSize!="undefined";new e(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(e){if(e.status===200){var t=JSON.parse(e.responseText);this._headers.length===0&&(this._setHeaders(t.headers,t.rows),this._setHeadersHandlers()),this._setData(t.rows),n?!this._totalRows||parseInt(t.totalRows,10)===parseInt(this._totalRows,10)?this._totalRows=t.totalRows:(this._totalRows=t.totalRows,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):!this._totalRows||t.rows.length===parseInt(this._totalRows,10)?this._totalRows=t.rows.length:(this._totalRows=t.rows.length,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))),this._setPagination()}},this)})}},a}),Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,s){"use strict";var o=function(t,n){if(!e.isDOMElement(t)){t=i.select(t);if(t.length===0)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=t[0]}else this._element=t;this._options=Ink.extendObj({preventUrlChange:!1,active:undefined,disabled:[],onBeforeChange:undefined,onChange:undefined},r.data(t)),this._options=Ink.extendObj(this._options,n||{}),this._handlers={tabClicked:Ink.bindEvent(this._onTabClicked,this),disabledTabClicked:Ink.bindEvent(this._onDisabledTabClicked,this),resize:Ink.bindEvent(this._onResize,this)},this._init()};return o.prototype={_init:function(){this._menu=i.select(".tabs-nav",this._element)[0],this._menuTabs=this._getChildElements(this._menu),this._contentTabs=i.select(".tabs-content",this._element),this._initializeDom(),this._observe(),this._setFirstActive(),this._changeTab(this._activeMenuLink),this._handlers.resize(),e.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var e=0;e<this._contentTabs.length;e++)n.hide(this._contentTabs[e])},_observe:function(){s.each(this._menuTabs,Ink.bind(function(e){var t=i.select("a",e)[0];s.inArray(t.getAttribute("href"),this._options.disabled)?this.disable(t):this.enable(t)},this)),t.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){var e=window.location.hash;this._activeContentTab=i.select(e,this._element)[0]||i.select(this._hashify(this._options.active),this._element)[0]||i.select(".tabs-content",this._element)[0],this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id")),this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(e,t){t&&typeof this._options.onBeforeChange!="undefined"&&this._options.onBeforeChange(this);var r=e.getAttribute("href");n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeContentTab,"active"),n.addClassName(this._activeContentTab,"hide-all"),this._activeMenuLink=e,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeContentTab=i.select(r.substr(r.indexOf("#")),this._element)[0],n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeContentTab,"active"),n.removeClassName(this._activeContentTab,"hide-all"),n.show(this._activeContentTab),t&&typeof this._options.onChange!="undefined"&&this._options.onChange(this)},_onTabClicked:function(e){t.stop(e);var n=t.findElement(e,"A");if(n.nodeName.toLowerCase()!=="a")return;this._options.preventUrlChange.toString()!=="true"&&(window.location.hash=n.getAttribute("href").substr(n.getAttribute("href").indexOf("#")));if(n===this._activeMenuLink)return;this.changeTab(n)},_onDisabledTabClicked:function(e){t.stop(e)},_onResize:function(){var t=e.currentLayout();if(t===this._lastLayout)return;t===e.Layouts.SMALL||t===e.Layouts.MEDIUM?(n.removeClassName(this._menu,"menu"),n.removeClassName(this._menu,"horizontal")):(n.addClassName(this._menu,"menu"),n.addClassName(this._menu,"horizontal")),this._lastLayout=t},_hashify:function(e){return e?e.indexOf("#")===0?e:"#"+e:""},_findLinkByHref:function(e){e=this._hashify(e);var t;return s.each(this._menuTabs,Ink.bind(function(n){var r=i.select("a",n)[0];r.getAttribute("href").indexOf("#")!==-1&&r.getAttribute("href").substr(r.getAttribute("href").indexOf("#"))===e&&(t=r)},this)),t},_getChildElements:function(e){var t=[],n=e.children;for(var r=0;r<n.length;r++)n[r].nodeType===1&&t.push(n[r]);return t},changeTab:function(e){var t=e.nodeType===1?e:this._findLinkByHref(this._hashify(e));if(!t||n.hasClassName(t,"ink-disabled"))return;this._changeTab(t,!0)},disable:function(e){var r=e.nodeType===1?e:this._findLinkByHref(this._hashify(e));if(!r)return;t.stopObserving(r,"click",this._handlers.tabClicked),t.observe(r,"click",this._handlers.disabledTabClicked),n.addClassName(r,"ink-disabled")},enable:function(e){var r=e.nodeType===1?e:this._findLinkByHref(this._hashify(e));if(!r)return;t.stopObserving(r,"click",this._handlers.disabledTabClicked),t.observe(r,"click",this._handlers.tabClicked),n.removeClassName(r,"ink-disabled")},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:e.destroyComponent},o}),Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,s){"use strict";var o=function(e,t){if(typeof e!="string"&&typeof e!="object")throw"[Ink.UI.Toggle] Invalid CSS selector to determine the root element";if(typeof e=="string"){this._rootElement=i.select(e);if(this._rootElement.length<=0)throw"[Ink.UI.Toggle] Root element not found";this._rootElement=this._rootElement[0]}else this._rootElement=e;this._options=Ink.extendObj({target:undefined,triggerEvent:"click",closeOnClick:!0},r.data(this._rootElement)),this._options=Ink.extendObj(this._options,t||{}),this._targets=function(e){if(typeof e=="string")return i.select(e);if(typeof e=="object")return e.constructor===Array?e:[e]}(this._options.target);if(!this._targets.length)throw"[Ink.UI.Toggle] Toggle target was not found! Supply a valid selector, array, or element through the `target` option.";this._init()};return o.prototype={_init:function(){this._accordion=n.hasClassName(this._rootElement.parentNode,"accordion")||n.hasClassName(this._targets[0].parentNode,"accordion"),t.observe(this._rootElement,this._options.triggerEvent,Ink.bindEvent(this._onTriggerEvent,this)),this._options.closeOnClick.toString()==="true"&&t.observe(document,"click",Ink.bindEvent(this._onClick,this))},_onTriggerEvent:function(e){if(this._accordion){var t,s,o;n.hasClassName(this._targets[0].parentNode,"accordion")?o=this._targets[0].parentNode:o=this._targets[0].parentNode.parentNode,t=i.select(".toggle",o);for(s=0;s<t.length;s+=1){var u=r.data(t[s]),a=i.select(u.target,o);a.length>0&&a[0]!==this._targets[0]&&(a[0].style.display="none")}}var f,l;for(var c=0,h=this._targets.length;c<h;c++)f=n.getStyle(this._targets[c],"display")==="none"?"show-all":"hide-all",l=n.getStyle(this._targets[c],"display")==="none"?"block":"none",n.removeClassName(this._targets[c],"show-all"),n.removeClassName(this._targets[c],"hide-all"),n.addClassName(this._targets[c],f),this._targets[c].style.display=l;f==="show-all"?n.addClassName(this._rootElement,"active"):n.removeClassName(this._rootElement,"active")},_onClick:function(e){var n=t.element(e),i,o=s.some(this._targets,function(e){return r.isAncestorOf(e,n)});if(this._rootElement===n||r.isAncestorOf(this._rootElement,n)||o)return;if((i=Ink.ss(".ink-shade")).length){var u=i.length;for(var a=0;a<u;a++)if(r.isAncestorOf(i[a],n)&&r.isAncestorOf(i[a],this._rootElement))return}if(!r.findUpwardsByClass(n,"toggle"))return;this._dismiss(this._rootElement)},_dismiss:function(){if(n.getStyle(this._targets[0],"display")==="none")return;for(var e=0,t=this._targets.length;e<t;e++)n.removeClassName(this._targets[e],"show-all"),n.addClassName(this._targets[e],"hide-all"),this._targets[e].style.display="none";n.removeClassName(this._rootElement,"active")}},o}),Ink.createModule("Ink.UI.Tooltip","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Dom.Css_1","Ink.Dom.Browser_1"],function(e,t,n,r,i,s){"use strict";function o(e,t){this._init(e,t||{})}function u(e,t){this._init(e,t)}var a,f,l;(function(){var e=document.createElement("DIV"),t=["transition","oTransition","msTransition","mozTransition","webkitTransition"];for(var n=0;n<t.length;n++)if(typeof e.style[t[n]+"Duration"]!="undefined"){a=t[n]+"Duration",f=t[n]+"Property",l=t[n]+"TimingFunction";break}})();var c=document.getElementsByTagName("body"),h=c&&c.length?c[0]:document.documentElement;return o.prototype={_init:function(e,t){var n;this.options=Ink.extendObj({where:"up",zIndex:1e4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:.3,text:""},t||{});if(typeof e=="string")n=r.select(e);else{if(typeof e!="object")throw"Element expected";n=[e]}this.tooltips=[];for(var i=0,s=n.length;i<s;i++)this.tooltips[i]=new u(this,n[i])},destroy:function(){i.each(this.tooltips,function(e){e._destroy()}),this.tooltips=null,this.options=null}},u.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(e,n){t.observe(n,"mouseover",Ink.bindEvent(this._onMouseOver,this)),t.observe(n,"mouseout",Ink.bindEvent(this._onMouseOut,this)),t.observe(n,"mousemove",Ink.bindEvent(this._onMouseMove,this)),this.root=e,this.element=n,this._delayTimeout=null,this.tooltip=null},_makeTooltip:function(e){if(!this._getOpt("text"))return!1;var n=this._createTooltipElement();this.tooltip&&this._removeTooltip(),this.tooltip=n,this._fadeInTooltipElement(n),this._placeTooltipElement(n,e),t.observe(n,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));var r=this._getFloatOpt("timeout");r&&setTimeout(Ink.bind(function(){this.tooltip===n&&this._removeTooltip()},this),r*1e3)},_createTooltipElement:function(){var t=this._getOpt("template"),i=this._getOpt("templatefield"),o,u;if(t){var a=document.createElement("DIV");a.innerHTML=e.elOrSelector(t,"options.template").outerHTML,o=a.firstChild;if(i){u=r.select(i,o);if(!u)throw"options.templatefield must be a valid selector within options.template";u=u[0]}else u=o}else o=document.createElement("DIV"),s.addClassName(o,"ink-tooltip"),s.addClassName(o,this._getOpt("color")),u=document.createElement("DIV"),s.addClassName(u,"content"),o.appendChild(u);return n.setTextContent(u,this._getOpt("text")),o.style.display="block",o.style.position="absolute",o.style.zIndex=this._getIntOpt("zIndex"),o},_fadeInTooltipElement:function(e){var t=this._getFloatOpt("fade");a&&t&&(e.style.opacity="0",e.style[a]=t+"s",e.style[f]="opacity",e.style[l]="ease-in-out",setTimeout(function(){e.style.opacity="1"},0))},_placeTooltipElement:function(e,t){var r=this._getOpt("where");if(r==="mousemove"||r==="mousefix"){var i=t;this._setPos(i[0],i[1]),h.appendChild(e)}else if(r.match(/(up|down|left|right)/)){h.appendChild(e);var o=n.offset(this.element),u=o[0],a=o[1];u instanceof Array&&(a=u[1],u=u[0]);var f=n.elementWidth(this.element)/2-n.elementWidth(e)/2,l=n.elementHeight(this.element)/2-n.elementHeight(e)/2,c=this._getIntOpt("spacing"),p=n.elementDimensions(e),d=n.elementDimensions(this.element),v=n.scrollWidth()+n.viewportWidth(),m=n.scrollHeight()+n.viewportHeight();r==="left"&&u-p[0]<0?r="right":r==="right"&&u+p[0]>v?r="left":r==="up"&&a-p[1]<0?r="down":r==="down"&&a+p[1]>m&&(r="up"),r==="up"?(a-=p[1],a-=c,u+=f):r==="down"?(a+=d[1],a+=c,u+=f):r==="left"?(u-=p[0],u-=c,a+=l):r==="right"&&(u+=d[0],u+=c,a+=l);var g=null;r.match(/(up|down|left|right)/)&&(g=document.createElement("SPAN"),s.addClassName(g,"arrow"),s.addClassName(g,this._oppositeDirections[r]),e.appendChild(g));var y=this._getLocalScroll(),b=u-y[0],w=a-y[1],E=w+p[1]-m,S=b+p[0]-v,x=0-b,T=0-w;E>0?(g&&(g.style.top=p[1]/2+E+"px"),w-=E):T>0?(g&&(g.style.top=p[1]/2-T+"px"),w+=T):S>0?(g&&(g.style.left=p[0]/2+S+"px"),b-=S):x>0&&(g&&(g.style.left=p[0]/2-x+"px"),b+=x),e.style.left=b+"px",e.style.top=w+"px"}},_removeTooltip:function(){var e=this.tooltip;if(!e)return;var t=Ink.bind(n.remove,{},e);this._getOpt("where")!=="mousemove"&&a?(e.style.opacity=0,setTimeout(t,this._getFloatOpt("fade")*1e3)):t(),this.tooltip=null},_getOpt:function(e){var t=n.data(this.element)[n._camelCase("tip-"+e)];if(t)return t;var r=this.root.options[e];if(typeof r!="undefined")return r},_getIntOpt:function(e){return parseInt(this._getOpt(e),10)},_getFloatOpt:function(e){return parseFloat(this._getOpt(e),10)},_destroy:function(){this.tooltip&&n.remove(this.tooltip),this.root=null,this.element=null,this.tooltip=null},_onMouseOver:function(e){var t=this._getMousePosition(e),n=this._getFloatOpt("delay");n?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(t),this._delayTimeout=null},this),n*1e3):this._makeTooltip(t)},_onMouseMove:function(e){if(this._getOpt("where")==="mousemove"&&this.tooltip){var t=this._getMousePosition(e);this._setPos(t[0],t[1])}},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip(),this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(e,t){e+=this._getIntOpt("left"),t+=this._getIntOpt("top");var r=this._getPageXY();if(this.tooltip){var i=[n.elementWidth(this.tooltip),n.elementHeight(this.tooltip)],s=this._getScroll();i[0]+e-s[0]>=r[0]-20&&(e=e-i[0]-this._getIntOpt("left")-10),i[1]+t-s[1]>=r[1]-20&&(t=t-i[1]-this._getIntOpt("top")-10),this.tooltip.style.left=e+"px",this.tooltip.style.top=t+"px"}},_getPageXY:function(){var e=0,t=0;return typeof window.innerWidth=="number"?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),[parseInt(e,10),parseInt(t,10)]},_getScroll:function(){var e=document.documentElement,t=document.body;return e&&(e.scrollLeft||e.scrollTop)?[e.scrollLeft,e.scrollTop]:t?[t.scrollLeft,t.scrollTop]:[0,0]},_getLocalScroll:function(){var e=[0,0],t=this.element.parentNode,n,r;while(t&&t!==document.documentElement&&t!==document.body)n=t.scrollLeft,r=t.scrollTop,n&&(e[0]+=n),r&&(e[1]+=r),t=t.parentNode;return e},_getMousePosition:function(e){return[parseInt(t.pointerX(e),10),parseInt(t.pointerY(e),10)]}},o}),Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,s){"use strict";var o=function(t,n){if(!e.isDOMElement(t)&&typeof t!="string")throw"[Ink.UI.TreeView] :: Invalid selector";if(typeof t=="string"){this._element=i.select(t);if(this._element.length<1)throw"[Ink.UI.TreeView] :: Selector has returned no elements";this._element=this._element[0]}else this._element=t;this._options=Ink.extendObj({node:"li",child:"ul"},r.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._init()};return o.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},t.observe(this._element,"click",this._handlers.click);var e=i.select(this._options.node,this._element),r;s.each(e,Ink.bind(function(e){if(n.hasClassName(e,"open"))return;n.hasClassName(e,"closed")||n.addClassName(e,"closed"),r=i.select(this._options.child,e),s.each(r,Ink.bind(function(e){n.hasClassName(e,"hide-all")||n.addClassName(e,"hide-all")},this))},this))},_onClick:function(e){var r=t.element(e);if(this._options.node[0]==="."){if(!n.hasClassName(r,this._options.node.substr(1)))while(!n.hasClassName(r,this._options.node.substr(1))&&r.nodeName.toLowerCase()!=="body")r=r.parentNode}else if(this._options.node[0]==="#"){if(r.id!==this._options.node.substr(1))while(r.id!==this._options.node.substr(1)&&r.nodeName.toLowerCase()!=="body")r=r.parentNode}else if(r.nodeName.toLowerCase()!==this._options.node)while(r.nodeName.toLowerCase()!==this._options.node&&r.nodeName.toLowerCase()!=="body")r=r.parentNode;if(r.nodeName.toLowerCase()==="body")return;var s=i.select(this._options.child,r);s.length>0&&(t.stop(e),s=s[0],n.hasClassName(s,"hide-all")?(n.removeClassName(s,"hide-all"),n.addClassName(r,"open"),n.removeClassName(r,"closed")):(n.addClassName(s,"hide-all"),n.removeClassName(r,"open"),n.addClassName(r,"closed")))}},o}),Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Loaded_1"],function(e,t,n){"use strict";var r={speed:10,gy:function(e){var t;t=e.offsetTop;if(e.offsetParent)while(e=e.offsetParent)t+=e.offsetTop;return t},scrollTop:function(){var e=document.body,t=document.documentElement;return e&&e.scrollTop?e.scrollTop:t&&t.scrollTop?t.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(t,n,r){e.observe(t,n,r);return},end:function(t){if(window.event){window.event.cancelBubble=!0,window.event.returnValue=!1;return}e.stop(t)},scroll:function(e){var t=Ink.UI.SmoothScroller.scrollTop();e>t?t+=Math.ceil((e-t)/Ink.UI.SmoothScroller.speed):t+=(e-t)/Ink.UI.SmoothScroller.speed,window.scrollTo(0,t),(t===e||Ink.UI.SmoothScroller.offsetTop===t)&&clearInterval(Ink.UI.SmoothScroller.interval),Ink.UI.SmoothScroller.offsetTop=t},init:function(){n.run(Ink.UI.SmoothScroller.render)},render:function(){var n=t.select("a.scrollableLink");Ink.UI.SmoothScroller.end(this);for(var r=0;r<n.length;r++){var i=n[r];i.href&&i.href.indexOf("#")!==-1&&(i.pathname===location.pathname||"/"+i.pathname===location.pathname)&&(Ink.UI.SmoothScroller.add(i,"click",Ink.UI.SmoothScroller.end),e.observe(i,"click",Ink.bindEvent(Ink.UI.SmoothScroller.clickScroll,this,i)))}},clickScroll:function(e,n){Ink.UI.SmoothScroller.end(n);if(n!==null&&n.getAttribute("href")!==null){var r=n.href.indexOf("#");if(r===-1)return;var i=n.href.substr(r+1),s=t.select('a[name="'+i+'"],#'+i);if(typeof s[0]!="undefined"){if(n.parentNode.className.indexOf("active")===-1){var o=n.parentNode.parentNode,u=o.firstChild;do if(typeof u.tagName!="undefined"&&u.tagName.toUpperCase()==="LI"&&u.className.indexOf("active")!==-1){u.className=u.className.replace("active","");break}while(u=u.nextSibling);n.parentNode.className+=" active"}clearInterval(Ink.UI.SmoothScroller.interval),Ink.UI.SmoothScroller.interval=setInterval("Ink.UI.SmoothScroller.scroll("+Ink.UI.SmoothScroller.gy(s[0])+")",10)}}}};return r}),Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,s){"use strict";var o=function(t,n){if(!e.isDOMElement(t)&&typeof t!="string")throw"[ImageQuery] :: Invalid selector";if(typeof t=="string"){this._element=i.select(t);if(this._element.length<1)throw"[ImageQuery] :: Selector has returned no elements";if(this._element.length>1){var s;for(s=1;s<this._element.length;s+=1)new Ink.UI.ImageQuery(this._element[s],n)}this._element=this._element[0]}else this._element=t;this._options=Ink.extendObj({queries:[],onLoad:null},r.data(this._element)),this._options=Ink.extendObj(this._options,n||{});var o;if((o=this._element.src.lastIndexOf("?"))!==-1){var u=this._element.src.substr(o);this._filename=this._element.src.replace(u,"").split("/").pop()+u}else this._filename=this._element.src.split("/").pop();this._init()};return o.prototype={_init:function(){this._options.queries=s.sortMulti(this._options.queries,"width").reverse(),this._handlers={resize:Ink.bindEvent(this._onResize,this),load:Ink.bindEvent(this._onLoad,this)},typeof this._options.onLoad=="function"&&t.observe(this._element,"onload",this._handlers.load),t.observe(window,"resize",this._handlers.resize),this._handlers.resize.call(this)},_onResize:function(){clearTimeout(e);var e=setTimeout(Ink.bind(function(){if(!this._options.queries||this._options.queries==={}){clearTimeout(e);return}var t,n,r;typeof window.innerWidth=="number"?r=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?r=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(r=document.body.clientWidth);for(t=0;t<this._options.queries.length;t+=1)if(this._options.queries[t].width<=r){n=t;break}typeof n=="undefined"&&(n=this._options.queries.length-1);var i=this._options.queries[n].src||this._options.src;"devicePixelRatio"in window&&window.devicePixelRatio>1&&"retina"in this._options&&(i=this._options.queries[n].retina||this._options.retina),this._options.queries[n].file=this._filename;if(typeof i=="function"){i=i.apply(this,[this._element,this._options.queries[n]]);if(typeof i!="string")throw'[ImageQuery] :: "src" callback does not return a string'}var s;for(s in this._options.queries[n])if(this._options.queries[n].hasOwnProperty(s)){if(s==="src"||s==="retina")continue;i=i.replace("{:"+s+"}",this._options.queries[n][s])}this._element.src=i,delete this._options.queries[n].file,e=undefined},this),300)},_onLoad:function(){this._options.onLoad.call(this)}},o}),Ink.createModule("Ink.UI.FormValidator","2",["Ink.UI.Aux_1","Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Css_1","Ink.Util.Array_1","Ink.Util.I18n_1","Ink.Util.Validator_1"],function(e,t,n,r,i,s,o,u){"use strict";var a={required:function(e){return typeof e!="undefined"&&!/^\s*$/.test(e)},min_length:function(e,t){return typeof e=="string"&&e.length>=parseInt(t,10)},max_length:function(e,t){return typeof e=="string"&&e.length<=parseInt(t,10)},exact_length:function(e,t){return typeof e=="string"&&e.length===parseInt(t,10)},email:function(e){return typeof e=="string"&&u.mail(e)},url:function(e,t){return t=t||!1,typeof e=="string"&&u.url(e,t)},ip:function(e,t){return typeof e!="string"?!1:u.isIP(e,t)},phone:function(e,t){if(typeof e!="string")return!1;var n=t?t.toUpperCase():"";return u["is"+n+"Phone"](e)},credit_card:function(e,t){return typeof e!="string"?!1:u.isCreditCard(e,t||"default")},date:function(e,t){return typeof e=="string"&&u.isDate(t,e)},alpha:function(e,t){return u.ascii(e,{singleLineWhitespace:t})},text:function(e,t,n){return u.unicode(e,{singleLineWhitespace:t,unicodePunctuation:n})},latin:function(e,t,n){return typeof e!="string"?!1:u.latin1(e,{latin1Punctuation:t,singleLineWhitespace:n})},alpha_numeric:function(e){return u.ascii(e,{numbers:!0})},alpha_dash:function(e){return u.ascii(e,{dash:!0,underscore:!0})},digit:function(e){return typeof e=="string"&&/^[0-9]{1}$/.test(e)},integer:function(e,t){return u.number(e,{negative:!t,decimalPlaces:0})},decimal:function(e,t,n,r){return u.number(e,{decimalSep:t||".",decimalPlaces:+n||null,maxDigits:+r})},numeric:function(e,t,n,r){return t=t||".",e.indexOf(t)!==-1?a.decimal(e,t,n,r):a.integer(e)},range:function(e,t,n,r){return e=+e,t=+t,n=+n,isNaN(e)||isNaN(t)||isNaN(n)?!1:e<t||e>n?!1:r?(e-t)%r===0:!0},color:function(e){return u.isColor(e)},matches:function(e,t){return e===this.getFormElements()[t][0].getValue()}},f=new o({en_US:{"formvalidator.required":"The {field} filling is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters","formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card","formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dashes":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit","formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}","formvalidator.validation_function_not_found":"The rule {rule} has not been defined"},pt_PT:{"formvalidator.required":"Preencher {field} \u00e9 obrigat\u00f3rio","formvalidator.min_length":"{field} deve ter no m\u00ednimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho m\u00e1ximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail v\u00e1lido","formvalidator.url":"O {field} deve ser um URL v\u00e1lido","formvalidator.ip":"{field} n\u00e3o tem um endere\u00e7o IP {param1} v\u00e1lido","formvalidator.phone":"{field} deve ser preenchido com um n\u00famero de telefone {param1} v\u00e1lido.","formvalidator.credit_card":"{field} n\u00e3o tem um cart\u00e3o de cr\u00e9dito {param1} v\u00e1lido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfab\u00e9ticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfab\u00e9ticos","formvalidator.latin":"O campo {field} deve conter apenas caracteres alfab\u00e9ticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e n\u00fameros","formvalidator.alpha_dashes":"{field} deve conter apenas letras e tra\u00e7os","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um d\u00edgito","formvalidator.integer":"{field} deve conter um n\u00famero inteiro","formvalidator.decimal":"{field} deve conter um n\u00famero v\u00e1lido","formvalidator.numeric":"{field} deve conter um n\u00famero v\u00e1lido","formvalidator.range":"{field} deve conter um n\u00famero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor v\u00e1lida","formvalidator.matches":"{field} deve corresponder ao campo {param1}","formvalidator.validation_function_not_found":"[A regra {rule} n\u00e3o foi definida]"}},"en_US"),l=function(n,r){this._element=e.elOrSelector(n,"Invalid FormElement"),this._errors={},this._rules={},this._value=null,this._options=Ink.extendObj({label:this._getLabel()},t.data(this._element)),this._options=Ink.extendObj(this._options,r||{})};l.prototype={_getLabel:function(){var e=t.findUpwardsByClass(this._element,"control-group"),n=Ink.s("label",e);return n?n=t.textContent(n):n=this._element.name||this._element.id||"",n},_parseRules:function(e){this._rules={},e=e.split("|");var t,n=e.length,r,i,s;if(n>0)for(t=0;t<n;t++){r=e[t];if(!r)continue;if((s=r.indexOf("["))!==-1){i=r.substr(s+1),i=i.split("]"),i=i[0],i=i.split(",");for(var o=0,u=i.length;o<u;o++)i[o]=i[o]==="true"?!0:i[o]==="false"?!1:i[o];i.splice(0,0,this.getValue()),r=r.substr(0,s),this._rules[r]=i}else this._rules[r]=[this.getValue()]}},_addError:function(e){var t=this._rules[e]||[],n={field:this._options.label,value:this.getValue()};for(var r=1;r<t.length;r++)n["param"+r]=t[r];var i="formvalidator."+e;this._errors[e]=f.text(i,n),this._errors[e]===i&&(this._errors[e]="Validation message not found")},getValue:function(){switch(this._element.nodeName.toLowerCase()){case"select":return Ink.s("option:selected",this._element).value;case"textarea":return this._element.innerHTML;case"input":if(!("type"in this._element))return this._element.value;if(this._element.type==="radio"&&this._element.type==="checkbox"){if(this._element.checked)return this._element.value}else if(this._element.type!=="file")return this._element.value;return;default:return this._element.innerHTML}},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements},validate:function(){this._errors={},("rules"in this._options||1)&&this._parseRules(this._options.rules);if("required"in this._rules||this.getValue()!=="")for(var e in this._rules)if(this._rules.hasOwnProperty(e)){if(typeof a[e]!="function")return this._addError(null),!1;if(a[e].apply(this,this._rules[e])===!1)return this._addError(e),!1}return!0}};var c=function(r,i){this._rootElement=e.elOrSelector(r),this._formElements={},this._errorMessages=[],this._markedErrorElements=[],this._options=Ink.extendObj({eventTrigger:"submit",searchFor:"input, select, textarea, .control-group",beforeValidation:undefined,onError:undefined,onSuccess:undefined},t.data(this._rootElement)),this._options=Ink.extendObj(this._options,i||{}),typeof this._options.eventTrigger=="string"&&n.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this)),this._init()};return c.setRule=function(e,t,n){a[e]=n;if(f.getKey("formvalidator."+e)!==t){var r={};r["formvalidator."+e]=t;var i={};i[f.lang()]=r,f.append(i)}},c.getI18n=function(){return f},c.setI18n=function(e){f=e},c.appendI18n=function(){f.append.apply(f,[].slice.call(arguments))},c.setLanguage=function(e){f.lang(e)},c.getRules=function(){return a},c.prototype={_init:function(){},getElements:function(){this._formElements={};var e=r.select(this._options.searchFor,this._rootElement);if(e.length){var n,i;for(n=0;n<e.length;n+=1){i=e[n];var s=t.data(i);if(!("rules"in s))continue;var o={form:this},u;"name"in i&&i.name?u=i.name:"id"in i&&i.id?u=i.id:(u="element_"+Math.floor(Math.random()*100),i.id=u),u in this._formElements?this._formElements[u].push(new l(i,o)):this._formElements[u]=[new l(i,o)]}}return this._formElements},validate:function(e){n.stop(e),typeof this._options.beforeValidation=="function"&&this._options.beforeValidation(),this.getElements();var r=[];for(var o in this._formElements)if(this._formElements.hasOwnProperty(o))for(var u=0;u<this._formElements[o].length;u+=1)this._formElements[o][u].validate()||r.push(this._formElements[o][u]);return r.length===0?(typeof this._options.onSuccess=="function"&&this._options.onSuccess(),!0):(typeof this._options.onError=="function"&&this._options.onError(r),s.each(this._markedErrorElements,Ink.bind(i.removeClassName,i,"validation")),s.each(this._markedErrorElements,Ink.bind(i.removeClassName,i,"error")),s.each(this._errorMessages,t.remove),this._errorMessages=[],this._markedErrorElements=[],s.each(r,Ink.bind(function(e){var n,r;i.hasClassName(e.getElement(),"control-group")?(n=e.getElement(),r=Ink.s(".control",e.getElement())):(n=t.findUpwardsByClass(e.getElement(),"control-group"),r=t.findUpwardsByClass(e.getElement(),"control"));if(!r||!n)r=n=e.getElement();i.addClassName(n,"validation"),i.addClassName(n,"error"),this._markedErrorElements.push(n);var s=document.createElement("p");i.addClassName(s,"tip"),t.insertAfter(s,r);var o=e.getErrors(),u=[];for(var a in o)o.hasOwnProperty(a)&&u.push(o[a]);s.innerHTML=u.join("<br/>"),this._errorMessages.push(s)},this)),!1)}},c}),Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Css_1","Ink.Util.Validator_1"],function(e,t){"use strict";var n={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(e,t){this._free(),t=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},t||{}),typeof e=="string"&&(e=document.getElementById(e));if(e===null)return!1;this.element=e;if(typeof this.element.id=="undefined"||this.element.id===null||this.element.id==="")this.element.id="ink-fv_randomid_"+Math.round(Math.random()*99999);this.custom=t.customFlag,this.confirmGroup=t.confirmGroup;var n=this._validateElements();return n.length>0?(t.onError?t.onError(n):this._showError(e,n),!1):(t.onError||this._clearError(e),this._clearCache(),t.onSuccess&&t.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){this.elements[this.element.id]=[],this.confirmElms[this.element.id]=[];var t=this.element.elements,n=!1;for(var r=0,i=t.length;r<i;r++){n=t[r];if(n.getAttribute("type")!==null&&n.getAttribute("type").toLowerCase()==="radio"){if(this.elements[this.element.id].length===0||n.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("type")&&n.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("name"))for(var s in this._flagMap)if(e.hasClassName(n,s)){this.elements[this.element.id].push(n);break}}else{for(var o in this._flagMap)if(e.hasClassName(n,o)&&o!=="ink-fv-confirm"){this.elements[this.element.id].push(n);break}e.hasClassName(n,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(n),this.hasConfirm[this.element.id]=!0)}}},_validateElements:function(){var t;this._getElements(),typeof this.hasConfirm[this.element.id]!="undefined"&&this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());var n=[],r=!1,i=!1,s;for(var o=0,u=this.elements[this.element.id].length;o<u;o++){s=!1,r=this.elements[this.element.id][o];if(!r.disabled)for(var a in this._flagMap)e.hasClassName(r,a)&&(a!=="ink-fv-custom"&&a!=="ink-fv-confirm"?this._isValid(r,a)||(s?n[n.length-1].errors.push(a):(n.push({elm:r,errors:[a]}),s=!0)):a!=="ink-fv-confirm"?(i=this._isCustomValid(r),i.length>0&&n.push({elm:r,errors:[a],custom:i})):a==="ink-fv-confirm")}return n=this._validateConfirmGroups(t,n),n},_validateConfirmGroups:function(e,t){var n=!1;for(var r in e)e.hasOwnProperty(r)&&(n=e[r],n.length===2&&n[0].value!==n[1].value&&t.push({elm:n[1],errors:["ink-fv-confirm"]}));return t},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};var n=!1,r=!1;for(var i=0,s=this.confirmElms[this.element.id].length;i<s;i++){n=this.confirmElms[this.element.id][i];for(var o=0,u=this.confirmGroup.length;o<u;o++)r=this.confirmGroup[o],e.hasClassName(n,r)&&(typeof t[r]=="undefined"?t[r]=[n]:t[r].push(n))}return t}return this.confirmElms[this.element.id].length===2&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){var n=[],r=!1;for(var i=0,s=this.custom.length;i<s;i++)r=this.custom[i],e.hasClassName(t,r.flag)&&(r.callback(t,r.msg)||n.push({flag:r.flag,msg:r.msg}));return n},_isValid:function(n,r){switch(r){case"ink-fv-required":if(n.nodeName.toLowerCase()==="select")return n.selectedIndex>0?!0:!1;if(n.getAttribute("type")!=="checkbox"&&n.getAttribute("type")!=="radio"){if(this._trim(n.value)!=="")return!0}else if(n.getAttribute("type")==="checkbox"){if(n.checked===!0)return!0}else if(n.getAttribute("type")==="radio"){var i=n.form[n.name];typeof i.length=="undefined"&&(i=[i]);var s=!1;for(var o=0,u=i.length;o<u;o++)i[o].checked===!0&&(s=!0);return s}break;case"ink-fv-email":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.mail(n.value))return!0;break;case"ink-fv-url":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.url(n.value))return!0;break;case"ink-fv-number":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;if(!isNaN(Number(n.value)))return!0;break;case"ink-fv-phone_pt":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isPTPhone(n.value))return!0;break;case"ink-fv-phone_cv":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isCVPhone(n.value))return!0;break;case"ink-fv-phone_ao":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isAOPhone(n.value))return!0;break;case"ink-fv-phone_mz":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isMZPhone(n.value))return!0;break;case"ink-fv-date":if(this._trim(n.value)==="")return e.hasClassName(n,"ink-fv-required")?!1:!0;var a=Ink.getModule("Ink.Dom.Element",1),f=a.data(n),l="yyyy-mm-dd";e.hasClassName(n,"ink-datepicker")&&"format"in f?l=f.format:"validFormat"in f&&(l=f.validFormat);if(l in t._dateParsers)return t.isDate(l,n.value);var c=[];for(var h in t._dateParsers)t._dateParsers.hasOwnProperty(h)&&c.push(h);throw"The attribute data-valid-format must be one of the following values: "+c.join(",");case"ink-fv-custom":}return!1},_showError:function(t,n){this._clearError(t);var r=!1;for(var i=0,s=n.length;i<s;i++){r=n[i].elm;if(r.getAttribute("type")!=="radio"){var o=document.createElement("p");e.addClassName(o,this._errorClassName),e.addClassName(o,this._errorTypeErrorClassName),n[i].errors[0]!=="ink-fv-custom"?o.innerHTML=this._flagMap[n[i].errors[0]].msg:o.innerHTML=n[i].custom[0].msg,r.getAttribute("type")!=="checkbox"&&(r.nextSibling.parentNode.insertBefore(o,r.nextSibling),e.hasClassName(r.parentNode,"control")&&(e.addClassName(r.parentNode.parentNode,"validation"),n[i].errors[0]==="ink-fv-required"?e.addClassName(r.parentNode.parentNode,"error"):e.addClassName(r.parentNode.parentNode,"warning")))}else e.hasClassName(r.parentNode.parentNode,"control-group")&&(e.addClassName(r.parentNode.parentNode,"validation"),e.addClassName(r.parentNode.parentNode,"error"))}},_clearError:function(t){var n=t.getElementsByTagName("p"),r=!1;for(var i=n.length-1;i>=0;i--)r=n[i],e.hasClassName(r,this._errorClassName)&&(e.hasClassName(r.parentNode,"control")&&(e.removeClassName(r.parentNode.parentNode,"validation"),e.removeClassName(r.parentNode.parentNode,"error"),e.removeClassName(r.parentNode.parentNode,"warning")),e.hasClassName(r,"tip")&&e.hasClassName(r,"error")&&r.parentNode.removeChild(r));var s=t.getElementsByTagName("ul");for(i=s.length-1;i>=0;i--)r=s[i],e.hasClassName(r,"control-group")&&(e.removeClassName(r,"validation"),e.removeClassName(r,"error"))},_trim:function(e){if(typeof e=="string")return e.replace(/^\s+|\s+$|\n+$/g,"")}};return n}),Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.UI.Aux_1","Ink.Util.Array_1","Ink.Dom.Selector_1"],function(e,t,n,r,i,s){var o=function(e){return function(t){return n.addClassName(e,t)}},u=function(e){return function(t){return n.removeClassName(e,t)}},a={debug:!1,_droppables:[],_draggables:[],add:function(t,n){function s(e){e.style.position="inherit"}t=r.elOrSelector(t,"Droppable.add target element");var i=Ink.extendObj({hoverClass:n.hoverclass||!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},n||{},e.data(t));typeof i.hoverClass=="string"&&(i.hoverClass=i.hoverClass.split(/\s+/));var o=this,u={move:function(e,t,n){s(e),t.appendChild(e)},copy:function(e,t,n){s(e),t.appendChild(e.cloneNode)},revert:function(e,t,n){o._findDraggable(e).originalParent.appendChild(e),s(e)}},a;if(typeof i.onHover=="string"){a=i.onHover,i.onHover=u[a];if(i.onHover===undefined)throw new Error("Unknown hover event handler: "+a)}if(typeof i.onDrop=="string"){a=i.onDrop,i.onDrop=u[a];if(i.onDrop===undefined)throw new Error("Unknown drop event handler: "+a)}if(typeof i.onDropOut=="string"){a=i.onDropOut,i.onDropOut=u[a];if(i.onDropOut===undefined)throw new Error("Unknown dropOut event handler: "+a)}var f={element:t,data:{},options:i};this._droppables.push(f),this._update(f)},_findData:function(e){var t=this._droppables;for(var n=0,r=t.length;n<r;n++)if(t[n].element===e)return t[n]},_findDraggable:function(e){var t=this._draggables;for(var n=0,r=t.length;n<r;n++)if(t[n].element===e)return t[n]},updateAll:function(){i.each(this._droppables,a._update)},update:function(e){this._update(this._findData(e))},_update:function(t){var n=t.data,r=t.element;n.left=e.offsetLeft(r),n.top=e.offsetTop(r),n.right=n.left+e.elementWidth(r),n.bottom=n.top+e.elementHeight(r)},remove:function(e){e=r.elOrSelector(e);var t=this._droppables.length;for(var n=0;n<t;n++)if(this._droppables[n].element===e){this._droppables.splice(n,1);break}return t!==this._droppables.length},action:function(e,t,n,r){i.each(this._droppables,Ink.bind(function(a){var f=a.data,l=a.options,c=a.element;if(l.accept&&!s.matches(l.accept,[r]).length)return;t==="drag"&&!this._findDraggable(r)&&this._draggables.push({element:r,originalParent:r.parentNode}),e.x>=f.left&&e.x<=f.right&&e.y>=f.top&&e.y<=f.bottom?t==="drag"?(l.hoverClass&&i.each(l.hoverClass,o(c)),l.onHover&&l.onHover(r,c)):t==="drop"&&(l.hoverClass&&i.each(l.hoverClass,u(c)),l.onDrop&&l.onDrop(r,c,n)):t==="drag"&&l.hoverClass?i.each(l.hoverClass,u(c)):t==="drop"&&l.onDropOut&&l.onDropOut(r,c,n)},this))}};return a}),Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.UI.Aux_1"],function(e,t,n,r,i,s){function a(e,t,n){return e=Math.min(e,n),e=Math.max(e,t),e}var o=0,u=1,f=function(e,t){this.init(e,t)};return f.prototype={init:function(n,i){var o=Ink.extendObj({constraint:!1,constraintElm:!1,top:!1,right:!1,bottom:!1,left:!1,handle:i.handler||!1,revert:!1,cursor:"move",zindex:i.zindex||9999,dragClass:"drag",onStart:!1,onEnd:!1,onDrag:!1,onChange:!1,droppableProxy:!1,mouseAnchor:undefined,skipChildren:!0,fps:100,debug:!1},i||{},e.data(n));this.options=o,this.element=s.elOrSelector(n),this.constraintElm=o.constraintElm&&s.elOrSelector(o.constraintElm),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,o.fps&&(this.deltaMs=1e3/o.fps,this.lastRunAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(e){return t.stop(e),!1},this.handle=this.options.handle?s.elOrSelector(this.options.handle):this.element,this.handle.style.cursor=o.cursor,t.observe(this.handle,"touchstart",this.handlers.start),t.observe(this.handle,"mousedown",this.handlers.start),r.IE&&t.observe(this.element,"selectstart",this.handlers.selectStart)},destroy:function(){t.stopObserving(this.handle,"touchstart",this.handlers.start),t.stopObserving(this.handle,"mousedown",this.handlers.start),r.IE&&t.stopObserving(this.element,"selectstart",this.handlers.selectStart)},_getCoords:function(t){var n=[e.scrollWidth(),e.scrollHeight()];return{x:(t.touches?t.touches[0].clientX:t.clientX)+n[o],y:(t.touches?t.touches[0].clientY:t.clientY)+n[u]}},_cloneStyle:function(t,r){r.className=t.className,r.style.borderWidth="0",r.style.padding="0",r.style.position="absolute",r.style.width=e.elementWidth(t)+"px",r.style.height=e.elementHeight(t)+"px",r.style.left=e.elementLeft(t)+"px",r.style.top=e.elementTop(t)+"px",r.style.cssFloat=n.getStyle(t,"float"),r.style.display=n.getStyle(t,"display")},_onStart:function(r){if(!this.active&&t.isLeftClick(r)||typeof r.button=="undefined"){var i=t.element(r);if(this.options.skipChildren&&i!==this.handle)return;t.stop(r),n.addClassName(this.element,this.options.dragClass),this.elmStartPosition=[e.elementLeft(this.element),e.elementTop(this.element)];var s=[parseInt(n.getStyle(this.element,"left"),10),parseInt(n.getStyle(this.element,"top"),10)],a=e.elementDimensions(this.element);this.originalPosition=[s[o]?s[o]:null,s[u]?s[u]:null],this.delta=this._getCoords(r),this.active=!0,this.position=n.getStyle(this.element,"position"),this.zindex=n.getStyle(this.element,"zIndex");var f=document.createElement("div");f.style.position=this.position,f.style.width=a[o]+"px",f.style.height=a[u]+"px",f.style.marginTop=n.getStyle(this.element,"margin-top"),f.style.marginBottom=n.getStyle(this.element,"margin-bottom"),f.style.marginLeft=n.getStyle(this.element,"margin-left"),f.style.marginRight=n.getStyle(this.element,"margin-right"),f.style.borderWidth="0",f.style.padding="0",f.style.cssFloat=n.getStyle(this.element,"float"),f.style.display=n.getStyle(this.element,"display"),f.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[o],this.delta.y-this.elmStartPosition[u]];if(this.options.mouseAnchor){var l=this.options.mouseAnchor.split(" "),c=[a[o],a[u]];l[0]==="left"?c[o]=0:l[0]==="center"&&(c[o]=parseInt(c[o]/2,10)),l[1]==="top"?c[u]=0:l[1]==="center"&&(c[u]=parseInt(c[u]/2,10)),this.applyDelta=[this.delta2[o]-c[o],this.delta2[u]-c[u]]}var h=this.options.fps?"dragFacade":"drag";this.placeholder=f,this.options.onStart&&this.options.onStart(this.element,r);if(this.options.droppableProxy){this.proxy=document.createElement("div"),a=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var p=this.proxy.style;p.width=a[o]+"px",p.height=a[u]+"px",p.position="fixed",p.left="0",p.top="0",p.zIndex=this.options.zindex+1,p.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);var d=document.body.firstChild;while(d&&d.nodeType!==1)d=d.nextSibling;document.body.insertBefore(this.proxy,d),t.observe(this.proxy,"mousemove",this.handlers[h]),t.observe(this.proxy,"touchmove",this.handlers[h])}else t.observe(document,"mousemove",this.handlers[h]);return this.element.style.position="absolute",this.element.style.zIndex=this.options.zindex,this.element.parentNode.insertBefore(this.placeholder,this.element),this._onDrag(r),t.observe(document,"mouseup",this.handlers.end),t.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(e){var t=+(new Date);if(!this.lastRunAt||t>this.lastRunAt+this.deltaMs)this.lastRunAt=t,this._onDrag(e)},_onDrag:function(n){if(this.active){t.stop(n),this.dragged=!0;var r=this._getCoords(n),i=r.x,s=r.y,f=this.options,l=!1,c=!1;if(this.prevCoords&&i!==this.prevCoords.x||s!==this.prevCoords.y){f.onDrag&&f.onDrag(this.element,n),this.prevCoords=r,l=this.elmStartPosition[o]+i-this.delta.x,c=this.elmStartPosition[u]+s-this.delta.y;var h=e.elementDimensions(this.element);if(this.constraintElm){var p=e.offset(this.constraintElm),d=e.elementDimensions(this.constraintElm),v=p[u]+(f.top||0),m=p[u]+d[u]-(f.bottom||0),g=p[o]+(f.left||0),b=p[o]+d[o]-(f.right||0);c=a(c,v,m-h[u]),l=a(l,g,b-h[o])}else if(f.constraint){var w=f.right===!1?e.pageWidth()-h[o]:f.right,E=f.left===!1?0:f.left,S=f.top===!1?0:f.top,T=f.bottom===!1?e.pageHeight()-h[u]:f.bottom;if(f.constraint==="horizontal"||f.constraint==="both")l=a(l,E,w);if(f.constraint==="vertical"||f.constraint==="both")c=a(c,S,T)}var N=Ink.getModule("Ink.UI.Droppable_1");this.firstDrag&&(N&&N.updateAll(),this.firstDrag=!1),l&&(this.element.style.left=l+"px"),c&&(this.element.style.top=c+"px");if(N){var C=this.options.mouseAnchor?{x:i-this.applyDelta[o],y:s-this.applyDelta[u]}:r;N.action(C,"drag",n,this.element)}f.onChange&&f.onChange(this)}}},_onEnd:function(r){t.stopObserving(document,"mousemove",this.handlers.drag),t.stopObserving(document,"touchmove",this.handlers.drag),this.options.fps&&this._onDrag(r),n.removeClassName(this.element,this.options.dragClass);if(this.active&&this.dragged){this.options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(e.remove(this.pt),this.pt=undefined),this.placeholder&&e.remove(this.placeholder),this.options.revert&&(this.element.style.position=this.position,this.zindex!==null?this.element.style.zIndex=this.zindex:this.element.style.zIndex="auto",this.element.style.left=this.originalPosition[o]?this.originalPosition[o]+"px":"",this.element.style.top=this.originalPosition[u]?this.originalPosition[u]+"px":""),this.options.onEnd&&this.options.onEnd(this.element,r);var i=Ink.getModule("Ink.UI.Droppable_1");i&&i.action(this._getCoords(r),"drop",r,this.element),this.position=!1,this.zindex=!1,this.firstDrag=!0}this.active=!1,this.dragged=!1}},f}),Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1","Ink.Dom.Browser_1"],function(e,t,n,r,i,s,o){"use strict";var u=function(t,n){t&&(this._dataField=e.elOrSelector(t,"1st argument")),this._options=Ink.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"sapo_component_datepicker",position:"right",onFocus:!0,onYearSelected:undefined,onMonthSelected:undefined,validDayFn:undefined,startDate:!1,onSetDate:!1,displayInSelect:!1,showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Close",cleanText:"Clear",prevLinkText:"\u00ab",nextLinkText:"\u00bb",ofText:"&nbsp;de&nbsp;",month:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},wDay:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}},r.data(this._dataField)||{}),this._options=Ink.extendObj(this._options,n||{}),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=null,this._options.pickerField&&(this._picker=e.elOrSelector(this._options.pickerField,"pickerField")),this._today=new Date,this._day=this._today.getDate(),this._month=this._today.getMonth(),this._year=this._today.getFullYear(),this._setMinMax(this._options.dateRange||this._options.yearRange),this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year,this._month,this._day))),this._options.startDate&&typeof this._options.startDate=="string"&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate)&&this.setDate(this._options.startDate),this._init(),this._render(),this._options.startDate||this._dataField&&typeof this._dataField.value=="string"&&this._dataField.value&&this.setDate(this._dataField.value),e.registerInstance(this,this._containerObject,"datePicker")};return u.prototype={version:"0.1",_init:function(){Ink.extendObj(this._options,this._lang||{})},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.id=this._options.instance,this._containerObject.className="sapo_component_datepicker";var n=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){this._superTopBar=document.createElement("div"),this._superTopBar.className="sapo_cal_top_options";if(this._options.showClean){var i=document.createElement("a");i.className="clean",i.innerHTML=this._options.cleanText,this._superTopBar.appendChild(i)}if(this._options.showClose){var s=document.createElement("a");s.className="close",s.innerHTML=this._options.closeText,this._superTopBar.appendChild(s)}this._containerObject.appendChild(this._superTopBar)}var o=document.createElement("div");o.className="sapo_cal_top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="sapo_cal_month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="sapo_cal_prev",this._monthPrev.innerHTML='<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>",this._monthNext=document.createElement("div"),this._monthNext.className="sapo_cal_next",this._monthNext.innerHTML='<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>",o.appendChild(this._monthPrev),o.appendChild(this._monthDescContainer),o.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="sapo_cal_month",this._containerObject.appendChild(o),this._containerObject.appendChild(this._monthContainer),this._monthSelector=document.createElement("ul"),this._monthSelector.className="sapo_cal_month_selector";var u,a;for(var f=1;f<=12;f++)(f-1)%4===0&&(u=document.createElement("ul")),a=document.createElement("li"),a.innerHTML='<a href="#" class="sapo_calmonth_'+(String(f).length===2?f:"0"+f)+'">'+this._options.month[f].substring(0,3)+"</a>",u.appendChild(a),f%4===0&&this._monthSelector.appendChild(u);this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="sapo_cal_year_selector",this._containerObject.appendChild(this._yearSelector);if(!this._options.onFocus||this._options.displayInSelect)this._options.pickerField?this._picker=e.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=r.elementTop(this._dataField),this._picker.style.left=r.elementLeft(this._dataField)+(r.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker");if(this._options.displayInSelect){if(!(this._options.dayField&&this._options.monthField&&this._options.yearField||this._options.pickerField))throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";this._options.dayField=e.elOrSelector(this._options.dayField,"dayField"),this._options.monthField=e.elOrSelector(this._options.monthField,"monthField"),this._options.yearField=e.elOrSelector(this._options.yearField,"yearField")}n.insertBefore(this._containerObject,n.childNodes[0]),this._picker?t.observe(this._picker,"click",Ink.bindEvent(function(e){t.stop(e),this._containerObject=r.clonePosition(this._containerObject,this._picker),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)):t.observe(this._dataField,"focus",Ink.bindEvent(function(){this._containerObject=r.clonePosition(this._containerObject,this._dataField),this._options.position==="bottom"?(this._containerObject.style.top=r.elementHeight(this._dataField)+r.offsetTop(this._dataField)+"px",this._containerObject.style.left=r.offset(this._dataField)[0]+"px"):(this._containerObject.style.top=r.offset(this._dataField)[1]+"px",this._containerObject.style.left=r.elementWidth(this._dataField)+r.offset(this._dataField)[0]+"px"),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)),this._options.displayInSelect?(t.observe(this._options.dayField,"change",Ink.bindEvent(function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;e!==""&&e!==0&&(this._updateDate(),this._showDefaultView())},this)),t.observe(this._options.monthField,"change",Ink.bindEvent(function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;e!==""&&e!==0&&(this._updateDate(),this._showDefaultView())},this)),t.observe(this._options.yearField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView()},this))):(t.observe(this._dataField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._hoverPicker||(this._containerObject.style.display="none")},this)),t.observe(this._dataField,"blur",Ink.bindEvent(function(){this._hoverPicker||(this._containerObject.style.display="none")},this))),t.observe(document,"click",Ink.bindEvent(function(e){e.target===undefined&&(e.target=e.srcElement),!r.descendantOf(this._containerObject,e.target)&&e.target!==this._dataField&&(this._picker?e.target!==this._picker&&(!this._options.displayInSelect||e.target!==this._options.dayField&&e.target!==this._options.monthField&&e.target!==this._options.yearField)&&(!this._options.dayField||!r.descendantOf(this._options.dayField,e.target)&&!r.descendantOf(this._options.monthField,e.target)&&!r.descendantOf(this._options.yearField,e.target))&&(this._containerObject.style.display="none"):this._containerObject.style.display="none")},this)),this._showMonth(),this._monthChanger=document.createElement("a"),this._monthChanger.href="#monthchanger",this._monthChanger.className="sapo_cal_link_month",this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText=document.createElement("span"),this._deText.innerHTML=this._options._deText,this._yearChanger=document.createElement("a"),this._yearChanger.href="#yearchanger",this._yearChanger.className="sapo_cal_link_year",this._yearChanger.innerHTML=this._year,this._monthDescContainer.innerHTML="",this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._deText),this._monthDescContainer.appendChild(this._yearChanger),t.observe(this._containerObject,"mouseover",Ink.bindEvent(function(e){t.stop(e),this._hoverPicker=!0},this)),t.observe(this._containerObject,"mouseout",Ink.bindEvent(function(e){t.stop(e),this._hoverPicker=!1},this)),t.observe(this._containerObject,"click",Ink.bindEvent(function(e){typeof e.target=="undefined"&&(e.target=e.srcElement);var n=e.target.className,r=n.indexOf("sapo_cal_off")!==-1;t.stop(e);if(n.indexOf("sapo_cal_")===0&&!r){var i=n.substr(9,2);Number(i)?(this.setDate(this._year+"-"+(this._month+1)+"-"+i),this._containerObject.style.display="none"):n==="sapo_cal_link_month"?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):n==="sapo_cal_link_year"&&(this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._showYearSelector(),this._yearSelector.style.display="block")}else if(n.indexOf("sapo_calmonth_")===0&&!r){var s=n.substr(14,2);if(Number(s)){this._month=s-1,this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next";if(this._year<this._yearMin||this._year===this._yearMin&&this._month<=this._monthMin)this._monthPrev.childNodes[0].className="action_inactive";else if(this._year>this._yearMax||this._year===this._yearMax&&this._month>=this._monthMax)this._monthNext.childNodes[0].className="action_inactive";this._updateCal(),this._monthContainer.style.display="block"}}else if(n.indexOf("sapo_calyear_")===0&&!r){var o=n.substr(13,4);Number(o)&&(this._year=o,typeof this._options.onYearSelected=="function"&&this._options.onYearSelected(this,{year:this._year}),this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._yearSelector.style.display="none",this._setActiveMonth(),this._monthSelector.style.display="block")}else n.indexOf("change_month_")===0&&!r?n==="change_month_next"?this._updateCal(1):n==="change_month_prev"&&this._updateCal(-1):n.indexOf("change_year_")===0&&!r?n==="change_year_next"?this._showYearSelector(1):n==="change_year_prev"&&this._showYearSelector(-1):n==="clean"?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value="":n==="close"&&(this._containerObject.style.display="none");this._updateDescription()},this))},_setMinMax:function(e){var t;if(e){var n=e.split(":"),r=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;n[0]&&(n[0]==="NOW"?(this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate()):r.test(n[0])?(t=n[0].split("-"),this._yearMin=Math.floor(t[0]),this._monthMin=Math.floor(t[1])||1,this._dayMin=Math.floor(t[2])||1,1<this._monthMin&&this._monthMin>12&&(this._monthMin=1,this._dayMin=1),1<this._dayMin&&this._dayMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)):(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1));if(n[1])if(n[1]==="NOW")this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate();else if(r.test(n[1])){t=n[1].split("-"),this._yearMax=Math.floor(t[0]),this._monthMax=Math.floor(t[1])||12,this._dayMax=Math.floor(t[2])||this._daysInMonth(this._yearMax,this._monthMax),1<this._monthMax&&this._monthMax>12&&(this._monthMax=12,this._dayMax=31);var i=this._daysInMonth(this._yearMax,this._monthMax);1<this._dayMax&&this._dayMax>i&&(this._dayMax=i)}else this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31;this._yearMax>=this._yearMin&&(this._monthMax>this._monthMin||this._monthMax===this._monthMin&&this._dayMax>=this._dayMin)||(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31},_checkDateRange:function(e,t,n){return this._isValidDate(e,t+1,n)||(e=this._today.getFullYear(),t=this._today.getMonth(),n=this._today.getDate()),e>this._yearMax?(e=this._yearMax,t=this._monthMax-1,n=this._dayMax):e<this._yearMin&&(e=this._yearMin,t=this._monthMin-1,n=this._dayMin),e===this._yearMax&&t+1>this._monthMax?(t=this._monthMax-1,n=this._dayMax):e===this._yearMin&&t+1<this._monthMin&&(t=this._monthMin-1,n=this._dayMin),e===this._yearMax&&t+1===this._monthMax&&n>this._dayMax?n=this._dayMax:e===this._yearMin&&t+1===this._monthMin&&n<this._dayMin?n=this._dayMin:n>this._daysInMonth(e,t+1)&&(n=this._daysInMonth(e,t+1)),[e,t,n]},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next";if(this._year<this._yearMin||this._year===this._yearMin&&this._month+1<=this._monthMin)this._monthPrev.childNodes[0].className="action_inactive";else if(this._year>this._yearMax||this._year===this._yearMax&&this._month+1>=this._monthMax)this._monthNext.childNodes[0].className="action_inactive";this._monthContainer.style.display="block"},_updateDate:function(){var e;this._options.displayInSelect?(e=[],this._isValidDate(e[0]=this._options.yearField[this._options.yearField.selectedIndex].value,e[1]=this._options.monthField[this._options.monthField.selectedIndex].value,e[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(e=this._checkDateRange(e[0],e[1]-1,1),this._isValidDate(e[0],e[1]+1,e[2])&&(this._year=e[0],this._month=e[1],this._day=this._daysInMonth(e[0],e[1]),this.setDate()))):this._dataField.value!==""&&(this._isDate(this._options.format,this._dataField.value)?(e=this._getDataArrayParsed(this._dataField.value),e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat()),this._updateDescription(),this._showMonth()},_updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText.innerHTML=this._options.ofText,this._yearChanger.innerHTML=this._year},_showYearSelector:function(){if(arguments.length){var e=+this._year+arguments[0]*10;e-=e%10;if(e>this._yearMax||e+9<this._yearMin)return;this._year=+this._year+arguments[0]*10}var t="<li>",n=this._year-this._year%10;for(var r=0;r<=11;r++)r%4===0&&(t+="<ul>"),!r||r===11?r&&n+r-1<=this._yearMax&&n+r-1>=this._yearMin?t+='<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>":n+r-1<=this._yearMax&&n+r-1>=this._yearMin?t+='<li><a href="#year_prev" class="change_year_prev">'+this._options.prevLinkText+"</a></li>":t+="<li>&nbsp;</li>":n+r-1<=this._yearMax&&n+r-1>=this._yearMin?t+='<li><a href="#" class="sapo_calyear_'+(n+r-1)+(n+r-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(n+r-1)+"</a></li>":t+='<li><a href="#" class="sapo_cal_off">'+(n+r-1)+"</a></li>",(r+1)%4===0&&(t+="</ul>");t+="</li>",this._yearSelector.innerHTML=t},_getDataArrayParsed:function(e){var t=[],n=o.set(this._options.format,e);return n&&(t=[n.getFullYear(),n.getMonth()+1,n.getDate()]),t},_isValidDate:function(e,t,n){var r=/^\d{4}$/,i=/^\d{1,2}$/;return r.test(e)&&i.test(t)&&i.test(n)&&t>=1&&t<=12&&n>=1&&n<=this._daysInMonth(e,t)},_isDate:function(e,t){try{if(typeof e=="undefined")return!1;var n=o.set(e,t);if(n&&this._isValidDate(n.getFullYear(),n.getMonth()+1,n.getDate()))return!0}catch(r){}return!1},_writeDateInFormat:function(){return o.get(this._options.format,this._data)},setDate:function(e){if(typeof e=="string"&&/\d{4}-\d{1,2}-\d{1,2}/.test(e)){var t=e.split("-");this._year=t[0],this._month=t[1]-1,this._day=t[2]}this._setDate()},_setDate:function(e){typeof e!="undefined"&&e.className&&e.className.indexOf("sapo_cal_")===0&&(this._day=e.className.substr(9,2)),this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day)),this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat(),this._options.onSetDate&&this._options.onSetDate(this,{date:this._data})},_updateCal:function(e){typeof this._options.onMonthSelected=="function"&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),this._updateMonth(e),this._showMonth()},_daysInMonth:function(e,t){var n=31;switch(t){case 2:n=e%400===0||e%4===0&&e%100!==0?29:28;break;case 4:case 6:case 9:case 11:n=30}return n},_updateMonth:function(e){typeof e=="undefined"&&(e="0");var t=this._month+1,n=this._year;switch(e){case-1:if(t===1){if(n===this._yearMin)return;t=12,n--}else t--;this._year=n,this._month=t-1;break;case 1:if(t===12){if(n===this._yearMax)return;t=1,n++}else t++;this._year=n,this._month=t-1;break;default:}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var e,t,n=this._month+1,r=this._year,i=this._daysInMonth(r,n),s=(new Date(r,n-1,1)).getDay(),o=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next";if(r<this._yearMin||r===this._yearMin&&n<=this._monthMin)this._monthPrev.childNodes[0].className="action_inactive";else if(r>this._yearMax||r===this._yearMax&&n>=this._monthMax)this._monthNext.childNodes[0].className="action_inactive";o&&Number(o)&&(o>s?s=7+o-s:s+=o);var u="";u+='<ul class="sapo_cal_header">';for(e=0;e<7;e++)u+="<li>"+this._options.wDay[e+(o+e>6?o-7:o)].substring(0,1)+"</li>";u+="</ul>";var a=0;u+="<ul>";if(s)for(t=o;t<s-o;t++)a||(u+="<ul>"),u+='<li class="sapo_cal_empty">&nbsp;</li>',a++;for(e=1;e<=i;e++){a===7&&(a=0,u+="<ul>");var f="sapo_cal_"+(String(e).length===2?e:"0"+e);f+=r===this._yearMin&&n===this._monthMin&&e<this._dayMin||r===this._yearMax&&n===this._monthMax&&e>this._dayMax||r===this._yearMin&&n<this._monthMin||r===this._yearMax&&n>this._monthMax||r<this._yearMin||r>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(r,n-1,e))?" sapo_cal_off":this._data.getFullYear()===r&&this._data.getMonth()===n-1&&e===this._day?" sapo_cal_on":"",u+='<li><a href="#" class="'+f+'">'+e+"</a></li>",a++,a===7&&(u+="</ul>")}if(a!==7){for(e=a;e<7;e++)u+='<li class="sapo_cal_empty">&nbsp;</li>';u+="</ul>"}u+="</ul>",this._monthContainer.innerHTML=u},_setActiveMonth:function(e){typeof e=="undefined"&&(e=this._monthSelector);var t=e.childNodes.length;if(e.className&&e.className.match(/sapo_calmonth_/)){var r=this._year,i=e.className.substr(14,2);r===this._data.getFullYear()&&i===this._data.getMonth()+1?(n.addClassName(e,"sapo_cal_on"),n.removeClassName(e,"sapo_cal_off")):(n.removeClassName(e,"sapo_cal_on"),r===this._yearMin&&i<this._monthMin||r===this._yearMax&&i>this._monthMax||r<this._yearMin||r>this._yearMax?n.addClassName(e,"sapo_cal_off"):n.removeClassName(e,"sapo_cal_off"))}else if(t!==0)for(var s=0;s<t;s++)this._setActiveMonth(e.childNodes[s])},lang:function(e){this._lang=e},showMonth:function(){this._showMonth()},isMonthRendered:function(){var e=i.select(".sapo_cal_header",this._containerObject)[0];return n.getStyle(e.parentNode,"display")!=="none"&&n.getStyle(e.parentNode.parentNode,"display")!=="none"}},u}),Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(e,t){"use strict";var n=function(){e.observe(document.body,"click",function(n){var r=e.element(n);r=t.findUpwardsByClass(r,"ink-close")||t.findUpwardsByClass(r,"ink-dismiss");if(!r)return;var i=r;i=t.findUpwardsByClass(r,"ink-alert")||t.findUpwardsByClass(r,"ink-alert-block"),i&&(e.stop(n),t.remove(i))})};return n}),Ink.createModule("Ink.UI.Carousel","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.UI.Pagination_1","Ink.Dom.Browser_1","Ink.Dom.Selector_1"],function(e,t,n,r,i,s){"use strict";var o=function(n,s){this._handlers={paginationChange:Ink.bind(this._onPaginationChange,this),windowResize:Ink.bind(this.refit,this)},t.observe(window,"resize",this._handlers.windowResize),this._element=e.elOrSelector(n,"1st argument"),this._options=Ink.extendObj({axis:"x",hideLast:!1,center:!1,keyboardSupport:!1,pagination:null,onChange:null},s||{},r.data(this._element)),this._isY=this._options.axis==="y";var o=this._element,u=Ink.s("ul.stage",o);this._ulEl=u,r.removeTextNodeChildren(u);if(this._options.hideLast){var a=document.createElement("div");a.className="hider",this._element.appendChild(a),a.style.position="absolute",a.style[this._isY?"left":"top"]="0",a.style[this._isY?"right":"bottom"]="0",a.style[this._isY?"bottom":"right"]="0",this._hiderEl=a}this.refit(),this._isY&&(this._ulEl.style.whiteSpace="normal"),this._options.pagination&&(e.isDOMElement(this._options.pagination)||typeof this._options.pagination=="string"?this._pagination=new i(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination._options.onChange=this._handlers.paginationChange,this._pagination.setSize(this._numPages),this._pagination.setCurrent(0)))};return o.prototype={refit:function(){this._liEls=Ink.ss("li.slide",this._ulEl);var e=this._liEls.length;this._ctnLength=this._size(this._element),this._elLength=this._size(this._liEls[0]),this._itemsPerPage=Math.floor(this._ctnLength/this._elLength),this._numPages=Math.ceil(e/this._itemsPerPage),this._deltaLength=this._itemsPerPage*this._elLength,this._isY?(this._element.style.width=this._liEls[0].offsetWidth+"px",this._ulEl.style.width=this._liEls[0].offsetWidth+"px"):this._ulEl.style.height=this._liEls[0].offsetHeight+"px",this._center(),this._updateHider(),this._IE7(),this._pagination&&(this._pagination.setSize(this._numPages),this._pagination.setCurrent(0))},_size:function(e){var t=r.outerDimensions(e);return this._isY?t[1]:t[0]},_center:function(){if(!this._options.center)return;var e=Math.floor((this._ctnLength-this._elLength*this._itemsPerPage)/2),t;this._isY?t=[e,"px 0"]:t=["0 ",e,"px"],this._ulEl.style.padding=t.join("")},_updateHider:function(){if(!this._hiderEl)return;var e=Math.floor(this._ctnLength-this._elLength*this._itemsPerPage);this._options.center&&(e/=2),this._hiderEl.style[this._isY?"height":"width"]=e+"px"},_IE7:function(){if(s.IE&&""+s.version.split(".")[0]=="7"){var e=this._numPages,t=Ink.ss("li.slide",this._ulEl),n=function(e,n){t[r].style[e]=n};for(var r=0,i=t.length;r<i;r++)n("position","absolute"),n(this._isY?"top":"left",r*this._elLength+"px")}},_onPaginationChange:function(e){var t=e.getCurrent();this._ulEl.style[this._options.axis==="y"?"top":"left"]=["-",t*this._deltaLength,"px"].join(""),this._options.onChange&&this._options.onChange.call(this,t)}},o}),Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,r,i,s){"use strict";var o=function(e,o){if(typeof e!="string"&&typeof e!="object"&&typeof o.markup=="undefined")throw"Invalid Modal selector";if(typeof e=="string"){if(e!==""){this._element=i.select(e);if(this._element.length===0)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else!e||(this._element=e);this._options={width:undefined,height:undefined,shadeClass:undefined,modalClass:undefined,trigger:undefined,triggerEvent:"click",autoDisplay:!0,markup:undefined,onShow:undefined,onDismiss:undefined,closeOnClick:!1,responsive:!0,disableScroll:!0},this._handlers={click:Ink.bindEvent(this._onClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:Ink.bindEvent(this._onResize,this)},this._wasDismissed=!1,this._element?this._markupMode=n.hasClassName(this._element,"ink-modal"):this._markupMode=!1;if(!this._markupMode)this._modalShadow=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style,this._modalDiv=document.createElement("div"),this._modalDivStyle=this._modalDiv.style,!this._element||(this._options.markup=this._element.innerHTML),n.addClassName(this._modalShadow,"ink-shade"),n.addClassName(this._modalDiv,"ink-modal"),n.addClassName(this._modalDiv,"ink-space"),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);else{this._modalDiv=this._element,this._modalDivStyle=this._modalDiv.style,this._modalShadow=this._modalDiv.parentNode,this._modalShadowStyle=this._modalShadow.style,this._contentContainer=i.select(".modal-body",this._modalDiv);if(!this._contentContainer.length)throw'Missing div with class "modal-body"';this._contentContainer=this._contentContainer[0],this._options.markup=this._contentContainer.innerHTML,this._options=Ink.extendObj(this._options,r.data(this._element))}this._options=Ink.extendObj(this._options,o||{}),this._markupMode||this.setContentMarkup(this._options.markup),typeof this._options.shadeClass=="string"&&s.each(this._options.shadeClass.split(" "),Ink.bind(function(e){n.addClassName(this._modalShadow,e.trim())},this)),typeof this._options.modalClass=="string"&&s.each(this._options.modalClass.split(" "),Ink.bind(function(e){n.addClassName(this._modalDiv,e.trim())},this));if("trigger"in this._options&&typeof this._options.trigger!="undefined"){var u,a;if(typeof this._options.trigger=="string"){u=i.select(this._options.trigger);if(u.length>0)for(a=0;a<u.length;a++)t.observe(u[a],this._options.triggerEvent,Ink.bindEvent(this.open,this))}}else this._options.autoDisplay&&this.open()};return o.prototype={_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%",this._modalDivStyle.marginTop="-"+~~(r.elementHeight(this._modalDiv)/2)+"px",this._modalDivStyle.marginLeft="-"+~~(r.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(e){typeof e=="boolean"?this._timeoutResizeFunction.call(this):!this._resizeTimeout&&typeof e=="object"&&(this._resizeTimeout=setTimeout(Ink.bind(this._timeoutResizeFunction,this),250))},_timeoutResizeFunction:function(){var e=document.compatMode==="CSS1Compat"?document.documentElement:document.body,t=parseInt(e.clientHeight,10),n=parseInt(e.clientWidth,10);n>this.originalStatus.width?this._modalDivStyle.width=this._modalDivStyle.maxWidth:this._modalDivStyle.width=~~(n*.9)+"px",t>this.originalStatus.height&&parseInt(this._modalDivStyle.maxHeight,10)>=r.elementHeight(this._modalDiv)?this._modalDivStyle.height=this._modalDivStyle.maxHeight:this._modalDivStyle.height=~~(t*.9)+"px",this._resizeContainer(),this._reposition(),this._resizeTimeout=undefined},_onClick:function(e){var s=t.element(e);if(n.hasClassName(s,"ink-close")||n.hasClassName(s,"ink-dismiss")||r.findUpwardsByClass(s,"ink-close")||r.findUpwardsByClass(s,"ink-dismiss")||this._options.closeOnClick&&(!r.descendantOf(this._shadeElement,s)||s===this._shadeElement)){var o=i.select(".ink-alert",this._shadeElement),u=o.length;for(var a=0;a<u;a++)if(r.descendantOf(o[a],s))return;t.stop(e),this.dismiss()}},_onKeyDown:function(e){if(e.keyCode!==27||this._wasDismissed)return;this.dismiss()},_resizeContainer:function(){this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden";var e=r.elementHeight(this._modalDiv);this._modalHeader=i.select(".modal-header",this._modalDiv),this._modalHeader.length>0&&(this._modalHeader=this._modalHeader[0],e-=r.elementHeight(this._modalHeader)),this._modalFooter=i.select(".modal-footer",this._modalDiv),this._modalFooter.length>0&&(this._modalFooter=this._modalFooter[0],e-=r.elementHeight(this._modalFooter)),this._contentContainer.style.height=e+"px",e!==r.elementHeight(this._contentContainer)&&(this._contentContainer.style.height=~~(e-(r.elementHeight(this._contentContainer)-e))+"px");if(this._markupMode)return;this._contentContainer.style.overflow=this._contentContainer.style.overflowX="hidden",this._contentContainer.style.overflowY="auto",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible"},_disableScroll:function(){this._oldScrollPos=r.scroll(),this._onScrollBinded=Ink.bindEvent(function(e){var n=t.element(e);r.descendantOf(this._modalShadow,n)||(t.stop(e),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))},this),t.observe(window,"scroll",this._onScrollBinded),t.observe(document,"touchmove",this._onScrollBinded)},open:function(i){i&&t.stop(i);var s=document.compatMode==="CSS1Compat"?document.documentElement:document.body;this._resizeTimeout=null,n.addClassName(this._modalShadow,"ink-shade"),this._modalShadowStyle.display=this._modalDivStyle.display="block",setTimeout(Ink.bind(function(){n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible")},this),100),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this._markupMode||this.setContentMarkup(this._options.markup),typeof this._options.width!="undefined"?(this._modalDivStyle.width=this._options.width,this._options.width.indexOf("%")===-1&&(this._modalDivStyle.maxWidth=r.elementWidth(this._modalDiv)+"px")):this._modalDivStyle.maxWidth=this._modalDivStyle.width=r.elementWidth(this._modalDiv)+"px",parseInt(s.clientWidth,10)<=parseInt(this._modalDivStyle.width,10)&&(this._modalDivStyle.width=~~(parseInt(s.clientWidth,10)*.9)+"px"),typeof this._options.height!="undefined"?(this._modalDivStyle.height=this._options.height,this._options.height.indexOf("%")===-1&&(this._modalDivStyle.maxHeight=r.elementHeight(this._modalDiv)+"px")):this._modalDivStyle.maxHeight=this._modalDivStyle.height=r.elementHeight(this._modalDiv)+"px",parseInt(s.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=~~(parseInt(s.clientHeight,10)*.9)+"px"),this.originalStatus={viewportHeight:parseInt(s.clientHeight,10),viewportWidth:parseInt(s.clientWidth,10),width:parseInt(this._modalDivStyle.maxWidth,10),height:parseInt(this._modalDivStyle.maxHeight,10)},this._options.responsive?(this._onResize(!0),t.observe(window,"resize",this._handlers.resize)):(this._resizeContainer(),this._reposition()),this._options.onShow&&this._options.onShow(this),this._options.disableScroll&&this._disableScroll(),t.observe(this._shadeElement,"click",this._handlers.click),t.observe(document,"keydown",this._handlers.keyDown),e.registerInstance(this,this._shadeElement,"modal"),this._wasDismissed=!1},dismiss:function(){if(this._options.onDismiss){var e=this._options.onDismiss(this);if(e===!1)return}this._wasDismissed=!0,this._options.disableScroll&&(t.stopObserving(window,"scroll",this._onScrollBinded),t.stopObserving(document,"touchmove",this._onScrollBinded)),this._options.responsive&&t.stopObserving(window,"resize",this._handlers.resize);if(!this._markupMode)this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy();else{n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible");var r,i=Ink.bindEvent(function(){if(!r)return;this._modalShadowStyle.display="none",t.stopObserving(document,"transitionend",i),t.stopObserving(document,"oTransitionEnd",i),t.stopObserving(document,"webkitTransitionEnd",i),clearInterval(r),r=undefined},this);t.observe(document,"transitionend",i),t.observe(document,"oTransitionEnd",i),t.observe(document,"webkitTransitionEnd",i),r||(r=setInterval(Ink.bind(function(){if(this._modalShadowStyle.opacity>0)return;this._modalShadowStyle.display="none",clearInterval(r),r=undefined},this),500))}},destroy:function(){e.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(e){if(!this._markupMode){this._modalDiv.innerHTML=[e].join(""),this._contentContainer=i.select(".modal-body",this._modalDiv);if(!this._contentContainer.length){var t=i.select(".modal-header",this._modalDiv),r=i.select(".modal-footer",this._modalDiv);s.each(t,Ink.bind(function(e){e.parentNode.removeChild(e)},this)),s.each(r,Ink.bind(function(e){e.parentNode.removeChild(e)},this));var o=document.createElement("div");n.addClassName(o,"modal-body"),o.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="",s.each(t,Ink.bind(function(e){this._modalDiv.appendChild(e)},this)),this._modalDiv.appendChild(o),s.each(r,Ink.bind(function(e){this._modalDiv.appendChild(e)},this)),this._contentContainer=i.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}else this._contentContainer.innerHTML=[e].join("");this._contentElement=this._modalDiv,this._resizeContainer()}},o}),Ink.createModule("Ink.UI.ProgressBar","1",["Ink.Dom.Selector_1","Ink.Dom.Element_1"],function(e,t){"use strict";var n=function(n,r){if(typeof n!="object"){if(typeof n!="string")throw"[Ink.UI.ProgressBar] :: Invalid selector";this._element=e.select(n);if(this._element.length<1)throw"[Ink.UI.ProgressBar] :: Selector didn't find any elements";this._element=this._element[0]}else this._element=n;this._options=Ink.extendObj({startValue:0,onStart:function(){},onEnd:function(){}},t.data(this._element)),this._options=Ink.extendObj(this._options,r||{}),this._value=this._options.startValue,this._init()};return n.prototype={_init:function(){this._elementBar=e.select(".bar",this._element);if(this._elementBar.length<1)throw"[Ink.UI.ProgressBar] :: Bar element not found";this._elementBar=this._elementBar[0],this._options.onStart=Ink.bind(this._options.onStart,this),this._options.onEnd=Ink.bind(this._options.onEnd,this),this.setValue(this._options.startValue)},setValue:function(e){this._options.onStart(this._value),e=parseInt(e,10),isNaN(e)||e<0?e=0:e>100&&(e=100),this._value=e,this._elementBar.style.width=this._value+"%",this._options.onEnd(this._value)}},n});(function(){var e={DatePicker_1:".ink-datepicker",Gallery_1:"ul.ink-gallery-source",Modal_1:".ink-modal",ProgressBar_1:".ink-progress-bar",SortableList_1:".ink-sortable-list",Spy_1:'*[data-spy="true"]',Sticky_1:".ink-navigation.sticky",Table_1:".ink-table",Tabs_1:".ink-tabs",TreeView_1:".ink-tree-view",Toggle_1:".toggle",Tooltip_1:".tooltip"};Ink.requireModules(["Ink.Dom.Selector_1","Ink.Dom.Loaded_1","Ink.Util.Array_1","Ink.UI.SmoothScroller_1","Ink.UI.Close_1"],function(t,n,r,i,s){var o,u=function(e){r.each(o,function(t){new e(t)})};n.run(function(){for(var n in e){if(!e.hasOwnProperty(n))continue;o=t.select(e[n]),o.length&&Ink.requireModules(["Ink.UI."+n],u)}i.init(),new s})})})();